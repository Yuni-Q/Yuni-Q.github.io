(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{fzo5:function(r,e,n){"use strict";n.r(e);var t=n("KQm4"),c=n("q1tI"),u=n.n(c),a=n("vOnD").c.table.withConfig({displayName:"tetris__Table",componentId:"sc-fnvdcy-0"})(["width:auto !important;border-collapse:collapse !important;td{border:1px solid black;width:30px;height:30px;padding:0;}"]),o=[{name:"s",center:!1,numCode:1,color:"red",currentShapeIndex:0,shape:[[[0,0,0],[0,1,1],[0,1,1]]]},{name:"t",center:!0,numCode:2,color:"orange",currentShapeIndex:0,shape:[[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]],[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]]]},{name:"z",center:!0,numCode:3,color:"yellow",currentShapeIndex:0,shape:[[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]],[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]]},{name:"zr",center:!0,numCode:4,color:"green",startRow:1,currentShapeIndex:0,shape:[[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]],[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]]},{name:"l",center:!0,numCode:5,color:"blue",currentShapeIndex:0,shape:[[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]]]},{name:"lr",center:!0,numCode:6,color:"navy",currentShapeIndex:0,shape:[[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]],[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]]]},{name:"b",center:!0,numCode:7,color:"violet",currentShapeIndex:0,shape:[[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]]}],l=["red","orange","yellow","green","blue","navy","violet"],f=function(r){return r>0&&r<10},i=function(r){return void 0===r||r>=10};e.default=function(){var r=Object(c.useState)(Array(20).fill([]).map((function(r){return Array(10).fill(0)}))),e=r[0],n=r[1],h=Object(c.useState)(Array(4).fill([]).map((function(r){return Array(4).fill(0)}))),d=h[0],p=h[1],s=Object(c.useState)(0),v=s[0],m=s[1],b=Object(c.useRef)(null),g=Object(c.useRef)(null),w=Object(c.useRef)(!0),E=Object(c.useRef)(null),y=Object(c.useRef)([0,3]);var S=function(){n((function(r){for(var e=[y.current[0]+1,y.current[1]],n=!0,c=b.current.shape[b.current.currentShapeIndex],u=y.current[0];u<y.current[0]+c.length;u++)if(!(u<0||u>=20))for(var a=y.current[1];a<y.current[1]+c.length;a++)f(r[u][a])&&i(r[u+1]&&r[u+1][a])&&(n=!1);n?y.current=e:w.current=!0;for(var o=Object(t.a)(r.map((function(r){return Object(t.a)(r)}))),l=function(e){r[e].forEach((function(r,t){var c;r>0&&r<10&&(null===(c=o[e+1])||void 0===c?void 0:c[t])<10&&n?(o[e+1][t]=r,o[e][t]=0):0!==r&&r<10&&(o[e][t]=10*r)}))},h=o.length-1;h>=0;h--)l(h);var d=function(r){var e=[];r.forEach((function(r,n){var t=0;r.forEach((function(r,e){r>0&&t++})),10===t&&e.push(n)}));var n=e.length;r=r.filter((function(r,n){return!e.includes(n)}));for(var t=0;t<n;t++)r.unshift([0,0,0,0,0,0,0,0,0,0]);return m((function(r){return r+Math.pow(n,2)})),r}(o);return JSON.stringify(o)!==JSON.stringify(r)?d:r}))};return Object(c.useEffect)((function(){p((function(r){return r.map((function(r,e){return r.map((function(r,n){var t,c,u,a;return null!=g&&null!==(t=g.current)&&void 0!==t&&null!==(c=t.shape)&&void 0!==c&&null!==(u=c[0])&&void 0!==u&&null!==(a=u[e])&&void 0!==a&&a[n]&&g.current.shape[0][e][n]?g.current.numCode:0}))}))}))}),[g.current]),Object(c.useEffect)((function(){var r=function(r){n((function(e){switch(r.code){case"ArrowLeft":for(var n=[y.current[0],y.current[1]-1],t=!0,c=b.current.shape[b.current.currentShapeIndex],u=y.current[0];u<y.current[0]+c.length&&t;u++)for(var a=y.current[1];a<y.current[1]+c.length;a++)e[u]&&e[u][a]&&f(e[u][a])&&i(e[u]&&e[u][a-1])&&(t=!1);t&&(y.current=n,e.forEach((function(r,n){for(var t=0;t<r.length;t++){var c=r[t];0===e[n][t-1]&&c<10&&(e[n][t-1]=c,e[n][t]=0)}})));break;case"ArrowRight":for(var o=[y.current[0],y.current[1]+1],l=!0,h=b.current.shape[b.current.currentShapeIndex],d=y.current[0];d<y.current[0]+h.length&&l;d++)for(var p=y.current[1];p<y.current[1]+h.length;p++)e[d]&&e[d][p]&&f(e[d][p])&&i(e[d]&&e[d][p+1])&&(l=!1);l&&(y.current=o,e.forEach((function(r,n){for(var t=r.length-1;t>=0;t--){var c=r[t];0===e[n][t+1]&&c<10&&(e[n][t+1]=c,e[n][t]=0)}})));break;case"ArrowDown":S()}return e}))},e=function(r){switch(r.code){case"Space":for(;!w.current;)S();break;case"ArrowUp":n((function(r){for(var e=b.current.shape[b.current.currentShapeIndex],n=!0,t=b.current.currentShapeIndex+1===b.current.shape.length?0:b.current.currentShapeIndex+1,c=b.current.shape[t],u=y.current[0];u<y.current[0]+e.length&&n;u++)for(var a=y.current[1];a<y.current[1]+e.length;a++)r[u]&&c[u-y.current[0]][a-y.current[1]]>0&&i(r[u]&&r[u][a])&&(n=!1);if(n){for(;y.current[0]<0;)S();for(var o=y.current[0];o<y.current[0]+e.length;o++)for(var l=y.current[1];l<y.current[1]+e.length;l++)if(r[o]){var f=c[o-y.current[0]][l-y.current[1]];f>0&&0===r[o][l]?r[o][l]=b.current.numCode:0===f&&r[o][l]&&r[o][l]<10&&(r[o][l]=0)}b.current.currentShapeIndex=t}return r}))}};return window.addEventListener("keydown",r),window.addEventListener("keyup",e),E.current=setInterval((function(){return S()}),300),function(){clearInterval(E.current),window.removeEventListener("keydown",r),window.removeEventListener("keyup",e)}}),[]),Object(c.useEffect)((function(){w.current&&(w.current=!1,g.current||(g.current=o[Math.floor(Math.random()*o.length)]),b.current?(b.current=g.current,g.current=o[Math.floor(Math.random()*o.length)]):b.current=o[Math.floor(Math.random()*o.length)],y.current=[-1,3],b.current.shape[0].slice(1).forEach((function(r,n){r.forEach((function(r,t){r&&e[n][t+3]&&(clearInterval(E.current),alert("게임오버"))}))})),n((function(r){var e,n=Object(t.a)(r.map((function(r){return Object(t.a)(r)})));return null!=b&&null!==(e=b.current)&&void 0!==e&&e.shape&&b.current.shape[0].slice(1).forEach((function(r,e){r.forEach((function(r,t){n[e][t+3]=r?b.current.numCode:0}))})),n})))}),[w.current]),u.a.createElement(u.a.Fragment,null,u.a.createElement(a,null,u.a.createElement("tbody",null,e.map((function(r,n){return u.a.createElement("tr",{key:r+"-"+n},r.map((function(r,t){return u.a.createElement("td",{style:{backgroundColor:e[n][t]>=10?l[e[n][t]/10-1]:l[e[n][t]-1]},key:r+"-"+t},r)})))})))),u.a.createElement(a,null,u.a.createElement("tbody",null,d.map((function(r,e){return u.a.createElement("tr",{key:r+"-"+e},r.map((function(r,n){return u.a.createElement("td",{style:{backgroundColor:l[d[e][n]-1]},key:r+"-"+n},r)})))})))),u.a.createElement("div",null,v))}}}]);
//# sourceMappingURL=component---src-pages-tetris-tsx-67457e29569268895bab.js.map