{"version":3,"sources":["webpack:///./src/pages/tictactoe.tsx"],"names":["Table","styled","table","Tictactoe","useState","winner","setWinner","Array","fill","data","setData","turn","setTurn","timerId","useRef","useEffect","forEach","tr","idx","console","log","flat","includes","current","setTimeout","trIndex","tdIndex","Math","floor","random","newData","clearTimeout","style","display","justifyContent","alignItems","flexDirection","height","onClick","event","target","dataset","td","map","key","data-tr","data-td"],"mappings":"oJAGMA,E,UAAQC,EAAOC,MAAV,mEAAGD,CAAH,gMA2IIE,UAxHc,WAC3B,MAA4BC,mBAAS,IAA9BC,EAAP,KAAeC,EAAf,KACA,EAAwBF,mBAAS,CAC/BG,MAAM,GAAGC,KAAK,MACdD,MAAM,GAAGC,KAAK,MACdD,MAAM,GAAGC,KAAK,QAHTC,EAAP,KAAaC,EAAb,KAKA,EAAwBN,mBAAS,KAA1BO,EAAP,KAAaC,EAAb,KACMC,EAAUC,iBAAO,MA6DvB,OA3DAC,qBAAU,WACJV,IAGJI,EAAKO,SAAQ,SAACC,EAAIC,GAChBC,QAAQC,IAAI,GAAIH,EAAG,KAAOA,EAAG,GAAIA,EAAG,KAAOA,EAAG,IACxCA,EAAG,IAAMA,EAAG,KAAOA,EAAG,IAAMA,EAAG,KAAOA,EAAG,IAC7CX,EAAUW,EAAG,IAGXR,EAAK,GAAGS,IACVT,EAAK,GAAGS,KAAST,EAAK,GAAGS,IACzBT,EAAK,GAAGS,KAAST,EAAK,GAAGS,IAEzBZ,EAAUG,EAAK,GAAGS,OAIlBT,EAAK,GAAG,IACVA,EAAK,GAAG,KAAOA,EAAK,GAAG,IACvBA,EAAK,GAAG,KAAOA,EAAK,GAAG,IAEvBH,EAAUG,EAAK,GAAG,IAGhBA,EAAK,GAAG,IACVA,EAAK,GAAG,KAAOA,EAAK,GAAG,IACvBA,EAAK,GAAG,KAAOA,EAAK,GAAG,IAEvBH,EAAUG,EAAK,GAAG,IAEfA,EAAKY,OAAOC,SAAS,OACxBhB,EAAU,YAEX,CAACG,IAEJM,qBAAU,WACR,GAAa,MAATJ,GAAgBF,EAAKY,OAAOC,SAAS,MAAO,CAgB9CT,EAAQU,QAAUC,YAfD,WACf,IAAIC,EAAU,EACVC,EAAU,EACd,GACED,EAAUE,KAAKC,MAAsB,EAAhBD,KAAKE,UAC1BH,EAAUC,KAAKC,MAAsB,EAAhBD,KAAKE,gBACnBpB,EAAKgB,GAASC,IAEvBhB,GAAQ,SAACD,GACP,IAAMqB,EAAU,YAAIrB,GAEpB,OADAqB,EAAQL,GAASC,GAAWf,EACrBmB,KAETlB,EAAQ,OAE6B,QAExC,CAACD,IACJI,qBAAU,WACRgB,aAAalB,EAAQU,WACpB,CAAClB,EAAQQ,IAEV,yBACEmB,MAAO,CACLC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,cAAe,SACfC,OAAQ,UAGV,kBAACrC,EAAD,CACEsC,QAAS,SAACC,GACR,IAAIlC,GAAmB,MAATM,EAAd,CAGA,IAAM6B,EAASD,EAAMC,OACff,EAAUe,EAAOC,QAAQxB,GACzBS,EAAUc,EAAOC,QAAQC,GAE1BjB,GAAYC,IAAWjB,EAAKgB,GAASC,KAG1ChB,GAAQ,SAACD,GACP,IAAMqB,EAAU,YAAIrB,GAEpB,OADAqB,EAAQL,GAASC,GAAWf,EACrBmB,KAETlB,EAAQ,SAGV,+BACGH,EAAKkC,KAAI,SAAC1B,EAAIQ,GACb,OACE,wBAAImB,IAAKnB,GACNR,EAAG0B,KAAI,SAACD,EAAIhB,GACX,OACE,wBAAImB,UAASpB,EAASqB,UAASpB,EAASkB,IAAKlB,GAC1CgB,YASjB,6BAAMrC,GAAU,OAAOA","file":"component---src-pages-tictactoe-tsx-e0dfa1180ed18c811711.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\n\nconst Table = styled.table`\n  border-collapse: collapse;\n  tbody {\n    text-align: center;\n  }\n  tr {\n    width: 120px;\n  }\n  td {\n    border: 1px solid black;\n    width: 40px;\n    height: 40px;\n    font-size: 24px;\n    text-align: center;\n    display: inline-block;\n    padding: 5px 0 0;\n  }\n`;\n\nconst Tictactoe: React.VFC = () => {\n  const [winner, setWinner] = useState('');\n  const [data, setData] = useState([\n    Array(3).fill(null),\n    Array(3).fill(null),\n    Array(3).fill(null),\n  ]);\n  const [turn, setTurn] = useState('O');\n  const timerId = useRef(null);\n\n  useEffect(() => {\n    if (winner) {\n      return;\n    }\n    data.forEach((tr, idx) => {\n      console.log(11, tr[0] === tr[1], tr[1] === tr[2]);\n      if (!!tr[0] && tr[0] === tr[1] && tr[1] === tr[2]) {\n        setWinner(tr[0]);\n      }\n      if (\n        !!data[0][idx] &&\n        data[0][idx] === data[1][idx] &&\n        data[1][idx] === data[2][idx]\n      ) {\n        setWinner(data[0][idx]);\n      }\n    });\n    if (\n      !!data[0][0] &&\n      data[0][0] === data[1][1] &&\n      data[1][1] === data[2][2]\n    ) {\n      setWinner(data[0][0]);\n    }\n    if (\n      !!data[0][2] &&\n      data[0][2] === data[1][1] &&\n      data[1][1] === data[2][0]\n    ) {\n      setWinner(data[0][2]);\n    }\n    if (!data.flat().includes(null)) {\n      setWinner('없습니다.');\n    }\n  }, [data]);\n  // 인공지능을 위한 로직\n  useEffect(() => {\n    if (turn === 'X' && data.flat().includes(null)) {\n      const computer = () => {\n        let trIndex = 0;\n        let tdIndex = 0;\n        do {\n          trIndex = Math.floor(Math.random() * 3);\n          tdIndex = Math.floor(Math.random() * 3);\n        } while (data[trIndex][tdIndex]);\n\n        setData((data) => {\n          const newData = [...data];\n          newData[trIndex][tdIndex] = turn;\n          return newData;\n        });\n        setTurn('O');\n      };\n      timerId.current = setTimeout(computer, 1000);\n    }\n  }, [turn]);\n  useEffect(() => {\n    clearTimeout(timerId.current);\n  }, [winner, timerId]);\n  return (\n    <div\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'column',\n        height: '100vh',\n      }}\n    >\n      <Table\n        onClick={(event) => {\n          if (winner || turn === 'X') {\n            return;\n          }\n          const target = event.target as HTMLTableDataCellElement;\n          const trIndex = target.dataset.tr;\n          const tdIndex = target.dataset.td;\n\n          if (!trIndex || !tdIndex || data[trIndex][tdIndex]) {\n            return;\n          }\n          setData((data) => {\n            const newData = [...data];\n            newData[trIndex][tdIndex] = turn;\n            return newData;\n          });\n          setTurn('X');\n        }}\n      >\n        <tbody>\n          {data.map((tr, trIndex) => {\n            return (\n              <tr key={trIndex}>\n                {tr.map((td, tdIndex) => {\n                  return (\n                    <td data-tr={trIndex} data-td={tdIndex} key={tdIndex}>\n                      {td}\n                    </td>\n                  );\n                })}\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n      <div>{winner && `승리자 ${winner}`}</div>\n    </div>\n  );\n};\n\nexport default Tictactoe;\n"],"sourceRoot":""}