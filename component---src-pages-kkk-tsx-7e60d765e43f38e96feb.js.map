{"version":3,"file":"component---src-pages-kkk-tsx-7e60d765e43f38e96feb.js","mappings":"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","sources":["webpack://yuni-q-blog/./src/pages/kkk.tsx"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\n\ntype Words = { second: number; text: string }[];\n\nconst KKK: React.VFC = () => {\n  const [end, setEnd] = useState(false);\n  const [words, setWords] = useState<Words>([]);\n  const [index, setIndex] = useState(-1);\n  const [text, setText] = useState('');\n  const [point, setPoint] = useState(0);\n  const [seconds, setSeconds] = useState(0);\n  const [secondsArray, setSecondsArray] = useState<number[]>([]);\n  const [date, setDate] = useState(0);\n  const [count, setCount] = useState(0);\n  const requestAnimationFrameId = useRef(0);\n\n  useEffect(() => {\n    if (seconds === 0 && point !== 0) {\n      setPoint((point) => point - 1);\n      setIndex((index) => index + 1);\n    }\n    const timer = () => {\n      const newData = new Date().getTime();\n      const diffDate = Math.floor((newData - date) / 1000);\n      const wordsSecond = words[index].second;\n      if (wordsSecond - diffDate >= 0) {\n        if (seconds !== wordsSecond - diffDate) {\n          setSeconds(wordsSecond - diffDate);\n        } else {\n          clearInterval(requestAnimationFrameId.current);\n          requestAnimationFrameId.current = requestAnimationFrame(timer);\n        }\n      }\n    };\n    clearInterval(requestAnimationFrameId.current);\n    requestAnimationFrameId.current = requestAnimationFrame(timer);\n    return () => clearInterval(requestAnimationFrameId.current);\n  }, [seconds]);\n\n  useEffect(() => {\n    if (words.length > 0 && index > words.length - 1) {\n      return setEnd(true);\n    }\n    if (words[index]?.second) {\n      setSeconds(words[index].second);\n      setDate(new Date().getTime());\n    }\n    if (words.length === 0) {\n      const getWords = async () => {\n        const { data }: { data: Words } = await axios(\n          'https://my-json-server.typicode.com/kakaopay-fe/resources/words',\n        );\n        setWords(data);\n        setPoint(data.length);\n        setSecondsArray([]);\n      };\n      getWords();\n    }\n  }, [index, words]);\n  if (end) {\n    return (\n      <div>\n        <div>Mission Complete!</div>\n        <div>당신의 점수는 {point}점입니다.</div>\n        <div>\n          단어당 평균 답변 시작은{' '}\n          {secondsArray.reduce((prev, curr) => prev + curr, 0) / count}\n          초입니다.\n        </div>\n        <button\n          onClick={() => {\n            setEnd(false);\n            setIndex(0);\n          }}\n        >\n          다시 시작\n        </button>\n      </div>\n    );\n  }\n  return (\n    <React.StrictMode>\n      <div>\n        <form\n          onSubmit={(event) => {\n            event.preventDefault();\n            if (index >= 0 && index < words.length) {\n              if (text === words[index].text) {\n                setIndex((index) => index + 1);\n                setText('');\n                setSecondsArray((prevSecondsArray) => [\n                  ...prevSecondsArray,\n                  words[index].second - seconds,\n                ]);\n                setCount((count) => count + 1);\n              }\n            }\n          }}\n        >\n          <div>남은 시간 : {seconds || 0}초</div>\n          <div>점수 : {point}점</div>\n          <div>{words[index]?.text || '문제 단어'}</div>\n          <div>\n            <input\n              type=\"text\"\n              value={text}\n              onChange={(event) => {\n                setText(event.target.value);\n              }}\n            />\n          </div>\n          <button type=\"submit\">입력</button>\n        </form>\n        <button\n          onClick={() => {\n            setIndex(0);\n            if (index > 0) {\n              setIndex(-1);\n            }\n          }}\n        >\n          {index < 0 ? '시작' : '초기화'}\n        </button>\n      </div>\n    </React.StrictMode>\n  );\n};\n\nexport default KKK;\n"],"names":["KKK","_words$index2","end","setEnd","useState","words","setWords","index","setIndex","text","setText","point","setPoint","seconds","setSeconds","secondsArray","setSecondsArray","date","setDate","count","setCount","requestAnimationFrameId","useRef","useEffect","timer","newData","Date","getTime","diffDate","Math","floor","wordsSecond","second","clearInterval","current","requestAnimationFrame","_words$index","length","async","data","axios","getWords","React","reduce","prev","curr","onClick","onSubmit","event","preventDefault","prevSecondsArray","concat","_toConsumableArray","type","value","onChange","target"],"sourceRoot":""}