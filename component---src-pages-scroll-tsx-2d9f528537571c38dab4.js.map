{"version":3,"sources":["webpack:///./src/pages/scroll.tsx"],"names":["GlobalWidth","styled","div","BoxContainer","ImageBox","image","ScrollText","Step","MoveBox","StepWrapper","Scroll","useEffect","setTimeout","scrollTo","actions","move","isTrue","document","querySelector","style","transform","steps","querySelectorAll","graphicItems","currentItem","ioIndex","io","IntersectionObserver","entries","parseInt","target","dataset","index","activate","action","classList","add","window","addEventListener","i","step","observe","boundingRect","getBoundingClientRect","top","innerHeight","remove","Array","fill","map","_","idx","key","className","data-index","data-action"],"mappings":"8FAAA,4CAGMA,EAAcC,IAAOC,IAAV,sEAAGD,CAAH,mDAMXE,EAAeF,IAAOC,IAAV,uEAAGD,CAAH,iFAQZG,EAAWH,IAAOC,IAAV,mEAAGD,CAAH,sPAWM,qBAAGI,SAQjBC,EAAaL,IAAOC,IAAV,qEAAGD,CAAH,wBAIVM,EAAON,IAAOC,IAAV,+DAAGD,CAAH,0JASJO,EAAUP,IAAOC,IAAV,kEAAGD,CAAH,uLAWPQ,EAAcR,IAAOC,IAAV,sEAAGD,CAAH,2CA4HFS,UAvHW,WAyDxB,OAxDAC,qBAAU,WACRC,YAAW,kBAAMC,SAAS,EAAG,KAAI,KACjC,IAAMC,EAAU,CACdC,KADc,SACTC,GAEAC,SAASC,cACR,0BACgBC,MAAMC,UAHtBJ,EACF,oBAIA,sBAMAK,EAAQJ,SAASK,iBAAiB,SAClCC,EAAeN,SAASK,iBAAiB,iBAC3CE,EAAcD,EAAa,GAC3BE,EAAU,EAERC,EAAK,IAAIC,sBAAqB,SAACC,GACnCH,EAAUI,SAAUD,EAAQ,GAAGE,OAAuBC,QAAQC,MAAO,OAGjEC,EAAW,SAACC,GAChBV,EAAYW,UAAUC,IAAI,WACtBF,GACFpB,EAAQoB,IAAQ,IASpBG,OAAOC,iBAAiB,UAAU,WAChC,IAAK,IAAIC,EAAId,EAAU,EAAGc,EAAId,EAAU,EAAGc,IAAK,CAC9C,IAAMC,EAAOnB,EAAMkB,GACnB,GAAKC,EAAL,CAGAd,EAAGe,QAAQD,GACX,IAAME,EAAeF,EAAKG,wBAExBD,EAAaE,IAA2B,GAArBP,OAAOQ,aAC1BH,EAAaE,IAA2B,GAArBP,OAAOQ,cAhBZX,EAkBFV,EAA4BO,QAAQG,OAjBpDV,EAAYW,UAAUW,OAAO,WACzBZ,GACFpB,EAAQoB,IAAQ,GAgBdV,EAAcD,EAAaiB,EAAKT,QAAQC,OACxCC,EAAUT,EAA4BO,QAAQG,UApBjC,IAACA,KAwBpBD,EAAUT,EAA4BO,QAAQG,UAC7C,IAED,kBAAClC,EAAD,KACE,iCACG+C,MAAM,IACJC,KAAK,GACLC,KAAI,SAACC,EAAGC,GACP,OAAO,yBAAKC,IAAKD,GAAV,aAGb,iCACE,kBAAChD,EAAD,KACG4C,MAAM,GACJC,KAAK,GACLC,KAAI,SAACC,EAAGC,GACP,IAAM9C,EACJ8C,EAAM,EAAI,qBAAuB,oBACnC,OAAY,IAARA,EAEA,kBAAC/C,EAAD,CACEgD,IAAG,gBAAkBD,EACrBE,UAAU,eACVC,aAAYH,EACZI,cAAY,OACZlD,MAAOA,GAEP,kBAACG,EAAD,CAAS6C,UAAU,UAKvB,kBAACjD,EAAD,CACEgD,IAAG,gBAAkBD,EACrBE,UAAU,eACVC,aAAYH,EACZ9C,MAAOA,QAKjB,kBAACI,EAAD,KACGsC,MAAM,GACJC,KAAK,GACLC,KAAI,SAACC,EAAGC,GACP,OACE,kBAAC5C,EAAD,CAAM6C,IAAG,QAAUD,EAAOE,UAAU,OAAOC,aAAYH,GACrD,kBAAC7C,EAAD,cAAmB6C,SAM/B,iCACGJ,MAAM,IACJC,KAAK,GACLC,KAAI,SAACC,EAAGC,GACP,OAAO,yBAAKC,IAAKD,GAAV","file":"component---src-pages-scroll-tsx-2d9f528537571c38dab4.js","sourcesContent":["import React, { useEffect } from 'react';\nimport styled from 'styled-components';\n\nconst GlobalWidth = styled.div`\n  max-width: 620px;\n  margin: 0 auto;\n  padding: 0 16px;\n`;\n\nconst BoxContainer = styled.div`\n  box-sizing: border-box;\n  overflow-x: hidden;\n  position: sticky;\n  top: 0;\n  height: 100vh;\n`;\n\nconst ImageBox = styled.div<{ image: string }>`\n  will-change: opacity;\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  max-height: 100vh;\n  background: url(${({ image }) => image}) no-repeat center / contain;\n  opacity: 0;\n  transition: 0.5s;\n  &.visible {\n    opacity: 1;\n  }\n`;\n\nconst ScrollText = styled.div`\n  position: relative;\n`;\n\nconst Step = styled.div`\n  margin: 0 16px 80vh;\n  box-sizing: border-box;\n  padding: 0.5rem 1rem;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.8);\n  box-shadow: rgba(0, 0, 0, 0.3) 0 0 3px;\n`;\n\nconst MoveBox = styled.div`\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100px;\n  height: 100px;\n  background: url('/favicon_black.ico') no-repeat center / contain;\n  transform: translateX(100vw);\n  transition: 1s 0.5s linear;\n`;\n\nconst StepWrapper = styled.div`\n  position: relative;\n  padding-bottom: 1px;\n`;\n\nconst Scroll: React.VFC = () => {\n  useEffect(() => {\n    setTimeout(() => scrollTo(0, 0), 100);\n    const actions = {\n      move(isTrue: boolean) {\n        if (isTrue) {\n          (document.querySelector(\n            '[data-index=\"4\"] .move',\n          ) as HTMLElement).style.transform = `translateX(-100%)`;\n        } else {\n          (document.querySelector(\n            '[data-index=\"4\"] .move',\n          ) as HTMLElement).style.transform = `translateX(100vw)`;\n        }\n      },\n    };\n    const steps = document.querySelectorAll('.step');\n    const graphicItems = document.querySelectorAll('.graphic-item');\n    let currentItem = graphicItems[0];\n    let ioIndex = 0;\n\n    const io = new IntersectionObserver((entries) => {\n      ioIndex = parseInt((entries[0].target as HTMLElement).dataset.index, 10);\n    });\n\n    const activate = (action) => {\n      currentItem.classList.add('visible');\n      if (action) {\n        actions[action](true);\n      }\n    };\n    const inactivate = (action) => {\n      currentItem.classList.remove('visible');\n      if (action) {\n        actions[action](false);\n      }\n    };\n    window.addEventListener('scroll', () => {\n      for (let i = ioIndex - 1; i < ioIndex + 2; i++) {\n        const step = steps[i] as HTMLElement;\n        if (!step) {\n          continue;\n        }\n        io.observe(step);\n        const boundingRect = step.getBoundingClientRect();\n        if (\n          boundingRect.top > window.innerHeight * 0.1 &&\n          boundingRect.top < window.innerHeight * 0.8\n        ) {\n          inactivate((currentItem as HTMLElement).dataset.action);\n          currentItem = graphicItems[step.dataset.index];\n          activate((currentItem as HTMLElement).dataset.action);\n        }\n      }\n    });\n    activate((currentItem as HTMLElement).dataset.action);\n  }, []);\n  return (\n    <GlobalWidth>\n      <section>\n        {Array(30)\n          .fill(1)\n          .map((_, idx) => {\n            return <div key={idx}>상단 내용</div>;\n          })}\n      </section>\n      <section>\n        <BoxContainer>\n          {Array(6)\n            .fill(1)\n            .map((_, idx) => {\n              const image =\n                idx % 2 ? '/favicon_black.ico' : '/favicon_blue.ico';\n              if (idx === 4) {\n                return (\n                  <ImageBox\n                    key={`graphic-item-${idx}`}\n                    className=\"graphic-item\"\n                    data-index={idx}\n                    data-action=\"move\"\n                    image={image}\n                  >\n                    <MoveBox className=\"move\" />\n                  </ImageBox>\n                );\n              }\n              return (\n                <ImageBox\n                  key={`graphic-item-${idx}`}\n                  className=\"graphic-item\"\n                  data-index={idx}\n                  image={image}\n                />\n              );\n            })}\n        </BoxContainer>\n        <StepWrapper>\n          {Array(6)\n            .fill(1)\n            .map((_, idx) => {\n              return (\n                <Step key={`step-${idx}`} className=\"step\" data-index={idx}>\n                  <ScrollText>중간 내용 {idx}</ScrollText>\n                </Step>\n              );\n            })}\n        </StepWrapper>\n      </section>\n      <section>\n        {Array(30)\n          .fill(1)\n          .map((_, idx) => {\n            return <div key={idx}>하단 내용</div>;\n          })}\n      </section>\n    </GlobalWidth>\n  );\n};\n\nexport default Scroll;\n"],"sourceRoot":""}