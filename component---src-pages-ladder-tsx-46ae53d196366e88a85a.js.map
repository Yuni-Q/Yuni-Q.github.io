{"version":3,"file":"component---src-pages-ladder-tsx-46ae53d196366e88a85a.js","mappings":"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","sources":["webpack://yuni-q-blog/./src/pages/ladder.tsx"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\n\nconst Ladder: React.VFC = () => {\n  const [sound, setSound] = useState(0.05);\n  const [loading, setLoading] = useState(0);\n  const [memberList, setMemberList] = useState([]);\n  const [teamMemberList, setTeamMemberList] = useState({});\n  const [choiceMemberList, setChoiceMemberList] = useState([]);\n  const [choiceTeamMemberList, setChoiceTeamMemberList] = useState({});\n  const [result, setResult] = useState([]);\n  const drumRef = useRef(null);\n  const goodRef = useRef(null);\n  useEffect(() => {\n    let time;\n    if (loading > 0) {\n      time = setInterval(() => {\n        setLoading((loading) => {\n          if (loading - 1 === 0) {\n            const goodSound = goodRef.current as HTMLAudioElement;\n            goodSound.volume = sound;\n            goodSound.play();\n          }\n          return loading - 1;\n        });\n      }, 1000);\n    }\n    return () => clearInterval(time);\n  }, [loading]);\n  useEffect(() => {\n    const get = async () => {\n      const result = await axios.get(\n        'https://script.google.com/macros/s/AKfycbwiRDzA_FHVDm7VFkBI6_fXGAehsCaHQ_a8S5E8gFy47bD1dgnYOxeyjw/exec',\n      );\n      if (result?.data?.items) {\n        setMemberList(result.data.items);\n      }\n    };\n    get();\n  }, []);\n  useEffect(() => {\n    const list = {};\n    memberList.forEach((item) => {\n      if (!list[item.team]) {\n        list[item.team] = [item];\n      } else {\n        list[item.team].push(item);\n      }\n    });\n    setTeamMemberList(list);\n    const choiceList = {};\n    choiceMemberList.forEach((item) => {\n      if (!choiceList[item.team]) {\n        choiceList[item.team] = [item];\n      } else {\n        choiceList[item.team].push(item);\n      }\n    });\n    setChoiceTeamMemberList(choiceList);\n  }, [memberList, choiceMemberList]);\n  return (\n    <>\n      <input\n        type=\"range\"\n        min=\"0\"\n        step=\"0.05\"\n        max=\"1\"\n        value={sound}\n        onChange={(e) => setSound(parseFloat(e.target.value))}\n      />\n      <div style={{ display: 'flex' }}>\n        <audio ref={drumRef} src=\"/drum.mp3\" />\n        <audio ref={goodRef} src=\"/good.mp3\" />\n        {loading > 0 && <Spinner time={loading} />}\n        <div style={{ margin: 16, textAlign: 'center' }}>\n          <div\n            onClick={() => {\n              setChoiceMemberList([...memberList, ...choiceMemberList]);\n              setMemberList([]);\n            }}\n          >\n            <div\n              style={{\n                background: 'chartreuse',\n                whiteSpace: 'nowrap',\n                padding: 4,\n              }}\n            >\n              모두 선택\n            </div>\n          </div>\n\n          <div>\n            {Object.keys(teamMemberList).map((key) => {\n              if (teamMemberList[key].length === 0) {\n                return;\n              }\n              return (\n                <div\n                  key={key}\n                  onClick={() => {\n                    const newMemberList = memberList.filter((member) => {\n                      let isExist = false;\n                      teamMemberList[key].map((item) => {\n                        if (item.name === member.name) {\n                          isExist = true;\n                        }\n                      });\n                      return !isExist;\n                    });\n                    setMemberList(newMemberList);\n                    const newChoiceMemberList = [\n                      ...choiceMemberList,\n                      ...teamMemberList[key],\n                    ];\n                    setChoiceMemberList([...newChoiceMemberList]);\n                  }}\n                >\n                  <div style={{ background: 'aqua' }}>{key}</div>\n                  {teamMemberList[key].map((user) => {\n                    return (\n                      <div\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          const newChoiceMemberList = [\n                            ...choiceMemberList,\n                            user,\n                          ].filter((item, i, a) => {\n                            return i == a.indexOf(item);\n                          });\n                          setChoiceMemberList([...newChoiceMemberList]);\n                          setMemberList(\n                            memberList.filter((member) => {\n                              return member.name !== user.name;\n                            }),\n                          );\n                        }}\n                        key={user.name}\n                      >\n                        {user.name}\n                      </div>\n                    );\n                  })}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <div style={{ margin: 16, textAlign: 'center' }}>\n          <div>\n            <div\n              onClick={() => {\n                setChoiceMemberList([]);\n                setMemberList([...memberList, ...choiceMemberList]);\n              }}\n            >\n              <div\n                style={{ background: 'gray', whiteSpace: 'nowrap', padding: 4 }}\n              >\n                선택받은 사람들\n              </div>\n            </div>\n            {Object.keys(choiceTeamMemberList).map((key) => {\n              if (choiceTeamMemberList[key].length === 0) {\n                return;\n              }\n              return (\n                <div\n                  key={key}\n                  onClick={() => {\n                    const newChoiceMemberList = choiceMemberList.filter(\n                      (member) => {\n                        let isExist = false;\n                        choiceTeamMemberList[key].map((item) => {\n                          if (item.name === member.name) {\n                            isExist = true;\n                          }\n                        });\n                        return !isExist;\n                      },\n                    );\n                    setChoiceMemberList(newChoiceMemberList);\n                    const newMemberList = [\n                      ...memberList,\n                      ...choiceTeamMemberList[key],\n                    ];\n                    setMemberList([...newMemberList]);\n                  }}\n                >\n                  <div style={{ background: 'aquamarine' }}>{key}</div>\n                  {choiceTeamMemberList[key].map((user) => {\n                    return (\n                      <div\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          const newMemberList = [...memberList, user];\n                          setMemberList([...newMemberList]);\n                          setChoiceMemberList(\n                            choiceMemberList.filter((member) => {\n                              return member.name !== user.name;\n                            }),\n                          );\n                        }}\n                        key={user.name}\n                      >\n                        {user.name}\n                      </div>\n                    );\n                  })}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <div style={{ margin: 16, textAlign: 'center' }}>\n          {choiceMemberList.map((member) => {\n            return (\n              <div key={member.name}>\n                <input type=\"text\" className=\"item\" />\n              </div>\n            );\n          })}\n          {choiceMemberList.length > 0 && (\n            <button\n              type=\"button\"\n              onClick={() => {\n                setLoading(5);\n                const drumSound = drumRef.current as HTMLAudioElement;\n                drumSound.volume = sound;\n                drumSound.play();\n                const itemList = document.querySelectorAll('.item');\n                let list = [...choiceMemberList];\n                const result = [];\n\n                itemList.forEach((item) => {\n                  const value = (item as HTMLInputElement).value;\n                  const index = Math.floor(Math.random() * list.length);\n                  if (value) {\n                    result.push({ name: list[index].name, value });\n                  }\n                  list = list.filter((_, idx) => {\n                    return idx !== index;\n                  });\n                });\n                setResult(result);\n              }}\n            >\n              시작!! 하겠습니다 !!\n            </button>\n          )}\n        </div>\n        <div style={{ margin: 16, textAlign: 'center' }}>\n          {result.map((item) => {\n            return (\n              <div key={item.name} style={{ whiteSpace: 'nowrap' }}>\n                {item.name} : {item.value}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Ladder;\n\nconst StyledDiv = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(10px);\n  background: fixed;\n`;\n\nconst Div = styled.div`\n  background: transparent;\n  /*!\n * Load Awesome v1.1.0 (http://github.danielcardoso.net/load-awesome/)\n * Copyright 2015 Daniel Cardoso <@DanielCardoso>\n * Licensed under MIT\n */\n  .spinner {\n    margin: 0 auto;\n    background-color: transparent !important;\n  }\n  .la-ball-pulse,\n  .la-ball-pulse > div {\n    position: relative;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n  }\n  .la-ball-pulse {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 0;\n    color: #d7dbe6;\n  }\n  .la-ball-pulse.la-dark {\n    color: #333;\n  }\n  .la-ball-pulse > div {\n    display: inline-block;\n    float: none;\n    background-color: currentColor;\n    border: 0 solid currentColor;\n  }\n  .la-ball-pulse {\n    width: 54px;\n    height: 18px;\n  }\n  .la-ball-pulse > div:nth-child(1) {\n    -webkit-animation-delay: -200ms;\n    -moz-animation-delay: -200ms;\n    -o-animation-delay: -200ms;\n    animation-delay: -200ms;\n  }\n  .la-ball-pulse > div:nth-child(2) {\n    -webkit-animation-delay: -100ms;\n    -moz-animation-delay: -100ms;\n    -o-animation-delay: -100ms;\n    animation-delay: -100ms;\n  }\n  .la-ball-pulse > div:nth-child(3) {\n    -webkit-animation-delay: 0ms;\n    -moz-animation-delay: 0ms;\n    -o-animation-delay: 0ms;\n    animation-delay: 0ms;\n  }\n  .la-ball-pulse > div {\n    width: 8px;\n    height: 8px;\n    margin: 4px;\n    border-radius: 100%;\n    -webkit-animation: ball-pulse 1s ease infinite;\n    -moz-animation: ball-pulse 1s ease infinite;\n    -o-animation: ball-pulse 1s ease infinite;\n    animation: ball-pulse 1s ease infinite;\n  }\n  .la-ball-pulse.la-sm {\n    width: 26px;\n    height: 8px;\n  }\n  .la-ball-pulse.la-sm > div {\n    width: 4px;\n    height: 4px;\n    margin: 2px;\n  }\n  .la-ball-pulse.la-2x {\n    width: 108px;\n    height: 36px;\n  }\n  .la-ball-pulse.la-2x > div {\n    width: 20px;\n    height: 20px;\n    margin: 8px;\n  }\n  .la-ball-pulse.la-3x {\n    width: 162px;\n    height: 54px;\n  }\n  .la-ball-pulse.la-3x > div {\n    width: 30px;\n    height: 30px;\n    margin: 12px;\n  }\n  /*\n  * Animation\n  */\n  @-webkit-keyframes ball-pulse {\n    0%,\n    60%,\n    100% {\n      opacity: 1;\n      -webkit-transform: scale(1);\n      transform: scale(1);\n    }\n    30% {\n      opacity: 0.1;\n      -webkit-transform: scale(0.01);\n      transform: scale(0.01);\n    }\n  }\n  @-moz-keyframes ball-pulse {\n    0%,\n    60%,\n    100% {\n      opacity: 1;\n      -moz-transform: scale(1);\n      transform: scale(1);\n    }\n    30% {\n      opacity: 0.1;\n      -moz-transform: scale(0.01);\n      transform: scale(0.01);\n    }\n  }\n  @-o-keyframes ball-pulse {\n    0%,\n    60%,\n    100% {\n      opacity: 1;\n      -o-transform: scale(1);\n      transform: scale(1);\n    }\n    30% {\n      opacity: 0.1;\n      -o-transform: scale(0.01);\n      transform: scale(0.01);\n    }\n  }\n  @keyframes ball-pulse {\n    0%,\n    60%,\n    100% {\n      opacity: 1;\n      -webkit-transform: scale(1);\n      -moz-transform: scale(1);\n      -o-transform: scale(1);\n      transform: scale(1);\n    }\n    30% {\n      opacity: 0.1;\n      -webkit-transform: scale(0.01);\n      -moz-transform: scale(0.01);\n      -o-transform: scale(0.01);\n      transform: scale(0.01);\n    }\n  }\n`;\n\ninterface Props {\n  time?: number;\n}\n\n// eslint-disable-next-line react/prop-types\nconst Spinner: React.FC<Props> = ({ time }) => {\n  return (\n    <StyledDiv>\n      <Div>{time}</Div>\n    </StyledDiv>\n  );\n};\n"],"names":["Ladder","sound","setSound","useState","loading","setLoading","memberList","setMemberList","teamMemberList","setTeamMemberList","choiceMemberList","setChoiceMemberList","choiceTeamMemberList","setChoiceTeamMemberList","result","setResult","drumRef","useRef","goodRef","useEffect","time","setInterval","goodSound","current","volume","play","clearInterval","async","_result$data","axios","data","items","get","list","forEach","item","team","push","choiceList","React","type","min","step","max","value","onChange","e","parseFloat","target","style","display","ref","src","Spinner","margin","textAlign","onClick","concat","_toConsumableArray","background","whiteSpace","padding","Object","keys","map","key","length","newMemberList","filter","member","isExist","name","newChoiceMemberList","user","stopPropagation","i","a","indexOf","className","drumSound","itemList","document","querySelectorAll","index","Math","floor","random","_","idx","StyledDiv","styled","div","withConfig","displayName","componentId","Div","_ref"],"sourceRoot":""}