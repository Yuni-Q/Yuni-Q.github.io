{"version":3,"sources":["webpack:///./src/pages/text-rpg.tsx"],"names":["initHero","name","level","maxHp","hp","xp","att","monsterList","TextRpg","useState","isBattle","setIsBattle","message","setMessage","hero","setHero","monster","setMonster","attack","useCallback","heal","Math","min","useEffect","onClick","newMonster","floor","random","length","onSubmit","e","preventDefault","target","value","alert","type","placeholder"],"mappings":"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","file":"component---src-pages-text-rpg-tsx-db119fc5c5987cef4c6a.js","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\n\ninterface Hero {\n  name: string;\n  level: number;\n  maxHp: number;\n  hp: number;\n  xp: number;\n  att: number;\n}\nconst initHero = {\n  name: '',\n  level: 1,\n  maxHp: 100,\n  hp: 100,\n  xp: 0,\n  att: 10,\n};\n\ninterface Monster {\n  name: string;\n  hp: number;\n  maxHp: number;\n  att: number;\n  xp: number;\n}\n\nconst monsterList = [\n  {\n    name: '슬라임',\n    hp: 25,\n    maxHp: 25,\n    att: 10,\n    xp: 10,\n  },\n  {\n    name: '스켈레톤',\n    hp: 50,\n    maxHp: 50,\n    att: 15,\n    xp: 20,\n  },\n  {\n    name: '마왕',\n    hp: 150,\n    maxHp: 150,\n    att: 30,\n    xp: 50,\n  },\n];\n\nconst TextRpg: React.VFC = () => {\n  const [isBattle, setIsBattle] = useState(false);\n  const [message, setMessage] = useState('');\n  const [hero, setHero] = useState<Hero>(null);\n  const [monster, setMonster] = useState<Monster>(null);\n  const attack = useCallback(() => {\n    setMonster((monster) => ({ ...monster, hp: monster.hp - hero.att }));\n    setHero((hero) => ({ ...hero, hp: hero.hp - monster.att }));\n    setMessage(\n      `${hero.att}의 데미지를 주고, ${monster.att}의 데미지를 받았습니다.`,\n    );\n  }, [hero, monster]);\n  const heal = useCallback(() => {\n    setHero((hero) => ({\n      ...hero,\n      hp: Math.min(hero.maxHp, hero.hp + 20) - monster.att,\n    }));\n  }, [hero, monster]);\n\n  useEffect(() => {\n    if (hero && hero.hp <= 0) {\n      setMessage(`${hero.level} 레벨에서 전사. 새 주인공을 생성하세요 !`);\n      setHero(null);\n      setMonster(null);\n      setIsBattle(false);\n      return;\n    }\n    if (hero && monster && monster.hp <= 0) {\n      setHero((hero) => ({ ...hero, xp: hero.xp + monster.xp }));\n      setMonster(null);\n      setIsBattle(false);\n      return;\n    }\n    if (hero && hero.xp >= hero.level * 15) {\n      setHero((hero) => {\n        const maxHp = hero.maxHp + 5;\n        return {\n          ...hero,\n          xp: hero.xp - hero.level * 15,\n          level: hero.level + 1,\n          maxHp: maxHp,\n          hp: maxHp,\n          att: hero.att + 5,\n        };\n      });\n      setMessage(`레벨업! 레벨 ${hero.level + 1}`);\n    }\n  }, [hero, monster]);\n  if (!hero?.name) {\n    return (\n      <form\n        onSubmit={(e) => {\n          e.preventDefault();\n          if (!e.target[0].value) {\n            return alert('이름을 입력해주세요.');\n          }\n          setHero({ ...initHero, name: e.target[0].value });\n        }}\n      >\n        <input type=\"text\" placeholder=\"주인공 이름을 입력하세요!\" />\n        <button type=\"submit\">시작</button>\n        <div>{message}</div>\n      </form>\n    );\n  }\n  return (\n    <div>\n      <div>\n        <button>이름 : {hero.name}</button>\n        <button>레벨 : {hero.level}</button>\n        <button>\n          체력 : {hero.hp}/{hero.maxHp}\n        </button>\n        <button>공격력 :{hero.att}</button>\n        <button>\n          경험치 : {hero.xp}/{hero.level * 15}\n        </button>\n      </div>\n      {!isBattle && (\n        <div>\n          <div>menu</div>\n          <button\n            onClick={() => {\n              const newMonster =\n                monsterList[Math.floor(Math.random() * monsterList.length)];\n              setMonster({\n                ...newMonster,\n              });\n              setIsBattle(true);\n              setMessage(`몬스터와 마주쳤다. ${newMonster.name}인 것 같다!`);\n            }}\n          >\n            1. 모험\n          </button>\n          <button\n            onClick={() => {\n              setHero((hero) => ({\n                ...hero,\n                hp: hero.maxHp,\n              }));\n            }}\n          >\n            2. 휴식\n          </button>\n          <button\n            onClick={() => {\n              setMessage(\n                `${hero.level} 레벨에서 종료. 새 주인공을 생성하세요 !`,\n              );\n              setHero(null);\n            }}\n          >\n            3. 종료\n          </button>\n        </div>\n      )}\n      {isBattle && (\n        <div>\n          <div>battle</div>\n          <button\n            onClick={() => {\n              attack();\n            }}\n          >\n            1. 공격\n          </button>\n          <button\n            onClick={() => {\n              heal();\n            }}\n          >\n            2. 회복\n          </button>\n          <button\n            onClick={() => {\n              setIsBattle(false);\n              setMonster(null);\n              setMessage(`${monster.name}으로부터 도망쳤습니다.`);\n            }}\n          >\n            3. 도망\n          </button>\n        </div>\n      )}\n      <div>{message}</div>\n      {monster && (\n        <div>\n          <button>이름: {monster.name}</button>\n          <button>\n            체력 : {monster.hp}/{monster.maxHp}\n          </button>\n          <button>공격 :{monster.att}</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TextRpg;\n"],"sourceRoot":""}