{"version":3,"sources":["webpack:///./src/pages/ladder.tsx"],"names":["Ladder","useState","sound","setSound","loading","setLoading","memberList","setMemberList","teamMemberList","setTeamMemberList","choiceMemberList","setChoiceMemberList","choiceTeamMemberList","setChoiceTeamMemberList","result","setResult","drumRef","useRef","goodRef","useEffect","time","setInterval","goodSound","current","volume","play","clearInterval","a","axios","get","data","items","list","forEach","item","team","push","choiceList","type","min","step","max","value","onChange","e","parseFloat","target","style","display","ref","src","Spinner","margin","textAlign","onClick","background","whiteSpace","padding","Object","keys","map","key","length","newMemberList","filter","member","isExist","name","newChoiceMemberList","user","stopPropagation","i","indexOf","className","drumSound","itemList","document","querySelectorAll","index","Math","floor","random","_","idx","StyledDiv","styled","div","Div"],"mappings":"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","file":"component---src-pages-ladder-tsx-86203c25bc339fd94703.js","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\n\nconst Ladder: React.VFC = () => {\n  const [sound, setSound] = useState(0.05);\n  const [loading, setLoading] = useState(0);\n  const [memberList, setMemberList] = useState([]);\n  const [teamMemberList, setTeamMemberList] = useState({});\n  const [choiceMemberList, setChoiceMemberList] = useState([]);\n  const [choiceTeamMemberList, setChoiceTeamMemberList] = useState({});\n  const [result, setResult] = useState([]);\n  const drumRef = useRef(null);\n  const goodRef = useRef(null);\n  useEffect(() => {\n    let time;\n    if (loading > 0) {\n      time = setInterval(() => {\n        setLoading((loading) => {\n          if (loading - 1 === 0) {\n            const goodSound = goodRef.current as HTMLAudioElement;\n            goodSound.volume = sound;\n            goodSound.play();\n          }\n          return loading - 1;\n        });\n      }, 1000);\n    }\n    return () => clearInterval(time);\n  }, [loading]);\n  useEffect(() => {\n    const get = async () => {\n      const result = await axios.get(\n        'https://script.google.com/macros/s/AKfycbwiRDzA_FHVDm7VFkBI6_fXGAehsCaHQ_a8S5E8gFy47bD1dgnYOxeyjw/exec',\n      );\n      if (result?.data?.items) {\n        setMemberList(result.data.items);\n      }\n    };\n    get();\n  }, []);\n  useEffect(() => {\n    const list = {};\n    memberList.forEach((item) => {\n      if (!list[item.team]) {\n        list[item.team] = [item];\n      } else {\n        list[item.team].push(item);\n      }\n    });\n    setTeamMemberList(list);\n    const choiceList = {};\n    choiceMemberList.forEach((item) => {\n      if (!choiceList[item.team]) {\n        choiceList[item.team] = [item];\n      } else {\n        choiceList[item.team].push(item);\n      }\n    });\n    setChoiceTeamMemberList(choiceList);\n  }, [memberList, choiceMemberList]);\n  return (\n    <>\n      <input\n        type=\"range\"\n        min=\"0\"\n        step=\"0.05\"\n        max=\"1\"\n        value={sound}\n        onChange={(e) => setSound(parseFloat(e.target.value))}\n      />\n      <div style={{ display: 'flex' }}>\n        <audio ref={drumRef} src=\"/drum.mp3\" />\n        <audio ref={goodRef} src=\"/good.mp3\" />\n        {loading > 0 && <Spinner time={loading} />}\n        <div style={{ margin: 16, textAlign: 'center' }}>\n          <div\n            onClick={() => {\n              setChoiceMemberList([...memberList, ...choiceMemberList]);\n              setMemberList([]);\n            }}\n          >\n            <div\n              style={{\n                background: 'chartreuse',\n                whiteSpace: 'nowrap',\n                padding: 4,\n              }}\n            >\n              모두 선택\n            </div>\n          </div>\n\n          <div>\n            {Object.keys(teamMemberList).map((key) => {\n              if (teamMemberList[key].length === 0) {\n                return;\n              }\n              return (\n                <div\n                  key={key}\n                  onClick={() => {\n                    const newMemberList = memberList.filter((member) => {\n                      let isExist = false;\n                      teamMemberList[key].map((item) => {\n                        if (item.name === member.name) {\n                          isExist = true;\n                        }\n                      });\n                      return !isExist;\n                    });\n                    setMemberList(newMemberList);\n                    const newChoiceMemberList = [\n                      ...choiceMemberList,\n                      ...teamMemberList[key],\n                    ];\n                    setChoiceMemberList([...newChoiceMemberList]);\n                  }}\n                >\n                  <div style={{ background: 'aqua' }}>{key}</div>\n                  {teamMemberList[key].map((user) => {\n                    return (\n                      <div\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          const newChoiceMemberList = [\n                            ...choiceMemberList,\n                            user,\n                          ].filter((item, i, a) => {\n                            return i == a.indexOf(item);\n                          });\n                          setChoiceMemberList([...newChoiceMemberList]);\n                          setMemberList(\n                            memberList.filter((member) => {\n                              return member.name !== user.name;\n                            }),\n                          );\n                        }}\n                        key={user.name}\n                      >\n                        {user.name}\n                      </div>\n                    );\n                  })}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <div style={{ margin: 16, textAlign: 'center' }}>\n          <div>\n            <div\n              onClick={() => {\n                setChoiceMemberList([]);\n                setMemberList([...memberList, ...choiceMemberList]);\n              }}\n            >\n              <div\n                style={{ background: 'gray', whiteSpace: 'nowrap', padding: 4 }}\n              >\n                선택받은 사람들\n              </div>\n            </div>\n            {Object.keys(choiceTeamMemberList).map((key) => {\n              if (choiceTeamMemberList[key].length === 0) {\n                return;\n              }\n              return (\n                <div\n                  key={key}\n                  onClick={() => {\n                    const newChoiceMemberList = choiceMemberList.filter(\n                      (member) => {\n                        let isExist = false;\n                        choiceTeamMemberList[key].map((item) => {\n                          if (item.name === member.name) {\n                            isExist = true;\n                          }\n                        });\n                        return !isExist;\n                      },\n                    );\n                    setChoiceMemberList(newChoiceMemberList);\n                    const newMemberList = [\n                      ...memberList,\n                      ...choiceTeamMemberList[key],\n                    ];\n                    setMemberList([...newMemberList]);\n                  }}\n                >\n                  <div style={{ background: 'aquamarine' }}>{key}</div>\n                  {choiceTeamMemberList[key].map((user) => {\n                    return (\n                      <div\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          const newMemberList = [...memberList, user];\n                          setMemberList([...newMemberList]);\n                          setChoiceMemberList(\n                            choiceMemberList.filter((member) => {\n                              return member.name !== user.name;\n                            }),\n                          );\n                        }}\n                        key={user.name}\n                      >\n                        {user.name}\n                      </div>\n                    );\n                  })}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <div style={{ margin: 16, textAlign: 'center' }}>\n          {choiceMemberList.map((member) => {\n            return (\n              <div key={member.name}>\n                <input type=\"text\" className=\"item\" />\n              </div>\n            );\n          })}\n          {choiceMemberList.length > 0 && (\n            <button\n              type=\"button\"\n              onClick={() => {\n                setLoading(5);\n                const drumSound = drumRef.current as HTMLAudioElement;\n                drumSound.volume = sound;\n                drumSound.play();\n                const itemList = document.querySelectorAll('.item');\n                let list = [...choiceMemberList];\n                const result = [];\n\n                itemList.forEach((item) => {\n                  const value = (item as HTMLInputElement).value;\n                  const index = Math.floor(Math.random() * list.length);\n                  if (value) {\n                    result.push({ name: list[index].name, value });\n                  }\n                  list = list.filter((_, idx) => {\n                    return idx !== index;\n                  });\n                });\n                setResult(result);\n              }}\n            >\n              시작!! 하겠습니다 !!\n            </button>\n          )}\n        </div>\n        <div style={{ margin: 16, textAlign: 'center' }}>\n          {result.map((item) => {\n            return (\n              <div key={item.name} style={{ whiteSpace: 'nowrap' }}>\n                {item.name} : {item.value}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Ladder;\n\nconst StyledDiv = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(10px);\n  background: fixed;\n`;\n\nconst Div = styled.div`\n  background: transparent;\n  /*!\n * Load Awesome v1.1.0 (http://github.danielcardoso.net/load-awesome/)\n * Copyright 2015 Daniel Cardoso <@DanielCardoso>\n * Licensed under MIT\n */\n  .spinner {\n    margin: 0 auto;\n    background-color: transparent !important;\n  }\n  .la-ball-pulse,\n  .la-ball-pulse > div {\n    position: relative;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n  }\n  .la-ball-pulse {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 0;\n    color: #d7dbe6;\n  }\n  .la-ball-pulse.la-dark {\n    color: #333;\n  }\n  .la-ball-pulse > div {\n    display: inline-block;\n    float: none;\n    background-color: currentColor;\n    border: 0 solid currentColor;\n  }\n  .la-ball-pulse {\n    width: 54px;\n    height: 18px;\n  }\n  .la-ball-pulse > div:nth-child(1) {\n    -webkit-animation-delay: -200ms;\n    -moz-animation-delay: -200ms;\n    -o-animation-delay: -200ms;\n    animation-delay: -200ms;\n  }\n  .la-ball-pulse > div:nth-child(2) {\n    -webkit-animation-delay: -100ms;\n    -moz-animation-delay: -100ms;\n    -o-animation-delay: -100ms;\n    animation-delay: -100ms;\n  }\n  .la-ball-pulse > div:nth-child(3) {\n    -webkit-animation-delay: 0ms;\n    -moz-animation-delay: 0ms;\n    -o-animation-delay: 0ms;\n    animation-delay: 0ms;\n  }\n  .la-ball-pulse > div {\n    width: 8px;\n    height: 8px;\n    margin: 4px;\n    border-radius: 100%;\n    -webkit-animation: ball-pulse 1s ease infinite;\n    -moz-animation: ball-pulse 1s ease infinite;\n    -o-animation: ball-pulse 1s ease infinite;\n    animation: ball-pulse 1s ease infinite;\n  }\n  .la-ball-pulse.la-sm {\n    width: 26px;\n    height: 8px;\n  }\n  .la-ball-pulse.la-sm > div {\n    width: 4px;\n    height: 4px;\n    margin: 2px;\n  }\n  .la-ball-pulse.la-2x {\n    width: 108px;\n    height: 36px;\n  }\n  .la-ball-pulse.la-2x > div {\n    width: 20px;\n    height: 20px;\n    margin: 8px;\n  }\n  .la-ball-pulse.la-3x {\n    width: 162px;\n    height: 54px;\n  }\n  .la-ball-pulse.la-3x > div {\n    width: 30px;\n    height: 30px;\n    margin: 12px;\n  }\n  /*\n  * Animation\n  */\n  @-webkit-keyframes ball-pulse {\n    0%,\n    60%,\n    100% {\n      opacity: 1;\n      -webkit-transform: scale(1);\n      transform: scale(1);\n    }\n    30% {\n      opacity: 0.1;\n      -webkit-transform: scale(0.01);\n      transform: scale(0.01);\n    }\n  }\n  @-moz-keyframes ball-pulse {\n    0%,\n    60%,\n    100% {\n      opacity: 1;\n      -moz-transform: scale(1);\n      transform: scale(1);\n    }\n    30% {\n      opacity: 0.1;\n      -moz-transform: scale(0.01);\n      transform: scale(0.01);\n    }\n  }\n  @-o-keyframes ball-pulse {\n    0%,\n    60%,\n    100% {\n      opacity: 1;\n      -o-transform: scale(1);\n      transform: scale(1);\n    }\n    30% {\n      opacity: 0.1;\n      -o-transform: scale(0.01);\n      transform: scale(0.01);\n    }\n  }\n  @keyframes ball-pulse {\n    0%,\n    60%,\n    100% {\n      opacity: 1;\n      -webkit-transform: scale(1);\n      -moz-transform: scale(1);\n      -o-transform: scale(1);\n      transform: scale(1);\n    }\n    30% {\n      opacity: 0.1;\n      -webkit-transform: scale(0.01);\n      -moz-transform: scale(0.01);\n      -o-transform: scale(0.01);\n      transform: scale(0.01);\n    }\n  }\n`;\n\ninterface Props {\n  time?: number;\n}\n\n// eslint-disable-next-line react/prop-types\nconst Spinner: React.FC<Props> = ({ time }) => {\n  return (\n    <StyledDiv>\n      <Div>{time}</Div>\n    </StyledDiv>\n  );\n};\n"],"sourceRoot":""}