"use strict";(self.webpackChunkyuni_q_blog=self.webpackChunkyuni_q_blog||[]).push([[5864],{6172:function(t,i,e){e.r(i);var s=e(6540),n=e(2568);let a=function(){function t(t,i,e){this.x=t,this.y=i,this.radius=Math.random()+.5,this.speed=3*Math.random()+.5,this.cm=e}return t.prototype.draw=function(){this.cm.context.beginPath(),this.cm.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.cm.context.fill()},t}(),h=function(){function t(t,i,e,s){this.x=t,this.y=i,this.height=300;const n=e.canvasHeight-(this.height+(e.canvasHeight-this.y));this.gradient=e.context.createLinearGradient(0,n,0,this.y),this.gradient.addColorStop(0,`rgba(${e.colors2[s]}, 0)`),this.gradient.addColorStop(.5,`rgba(${e.colors2[s]}, 0.5)`),this.gradient.addColorStop(.75,`rgba(${e.colors2[s]}, 0.5)`),this.gradient.addColorStop(1,`rgba(${e.colors2[s]}, 1)`);this.particles=[];for(let h=0;h<30;h++)this.particles.push(new a(this.x,this.y,e));this.cm=e}return t.prototype.draw=function(){this.cm.context.strokeStyle=this.gradient,this.cm.context.beginPath(),this.cm.context.moveTo(this.x,this.y),this.cm.context.lineTo(this.x,this.y-this.height),this.cm.context.stroke();for(let t=0;t<this.particles.length;t++){const i=this.particles[t];i.y-=i.speed,i.y<this.y-this.height&&(i.y=this.y),i.draw()}},t}(),r=function(){function t(t,i,e,s){this.x=t,this.y=i,this.yForOrder=this.y,this.width=20,this.height=300,this.angle=0;this.lines=[];for(let n=0;n<5;n++)this.lines.push(new h(this.x+(Math.random()*this.width-.5*this.width),this.y,e,s));this.gradient=e.context.createLinearGradient(0,e.canvasHeight-(this.height+(e.canvasHeight-this.y)),0,this.y),this.gradient.addColorStop(0,`rgba(${e.colors[s]}, 0)`),this.gradient.addColorStop(.5,`rgba(${e.colors[s]}, 0.5)`),this.gradient.addColorStop(.75,`rgba(${e.colors[s]}, 0.5)`),this.gradient.addColorStop(1,`rgba(${e.colors[s]}, 1)`),this.cm=e}return t.prototype.draw=function(){this.cm.context.fillStyle=this.gradient,this.cm.context.save(),this.cm.context.filter="blur(20px)",this.cm.context.beginPath(),this.cm.context.ellipse(this.x,this.y,2*this.width+5*Math.abs(Math.sin(this.angle*Math.PI/180*30)),.5*this.width+5*Math.abs(Math.sin(this.angle*Math.PI/180*30)),0,0,2*Math.PI),this.cm.context.fill(),this.angle++,this.cm.context.filter="blur(5px)",this.cm.context.beginPath(),this.cm.context.ellipse(this.x,this.y,this.width,.25*this.width,0,0,2*Math.PI),this.cm.context.fill(),this.cm.context.fillRect(this.x-.5*this.width,this.cm.canvasHeight-(this.height+(this.cm.canvasHeight-this.y)),this.width,this.height),this.cm.context.restore();for(let t=0;t<this.lines.length;t++){this.lines[t].draw()}},t}();const c=n.default.canvas.withConfig({displayName:"land__Canvas",componentId:"sc-10icqg2-0"})(["background:url(/images/BG-city.jpg) no-repeat center / cover;"]);i.default=()=>{const t={canvas:void 0,context:void 0,canvasWidth:0,canvasHeight:0,colors:["222, 35, 18","238, 150, 63","246, 228, 0","110, 210, 70","63, 145, 255","185, 22, 226"],colors2:["255, 160, 150","255, 200, 150","255, 250, 180","195, 255, 170","200, 220, 255","239, 173, 225"],charactersSrc:{somun:"/images/sprite-somun.png",ji:"/images/sprite-ji.png"},playedFrame:0,currentFrame:0};return(0,s.useEffect)((()=>{t.canvas=document.querySelector("#the-canvas"),t.context=t.canvas.getContext("2d");const i=(window.devicePixelRatio,1),e={x:0,y:0},s=[],n=[],a=[];let h=0;const c=()=>{t.context.clearRect(0,0,t.canvas.width,t.canvas.height),a.forEach((i=>{if(i instanceof o&&i.draw(),i instanceof r){const e=i.y/t.canvasHeight+1;t.context.save(),t.context.translate(i.x,i.y),t.context.scale(e,e),t.context.translate(-i.x,-i.y),i.draw(),t.context.restore()}})),t.playedFrame++,t.playedFrame%20==0&&(t.playedFrame>1e10&&(t.playedFrame=0),0===t.currentFrame?t.currentFrame=1:t.currentFrame=0),requestAnimationFrame(c)},d=()=>{console.log(window.innerWidth,window.innerHeight),t.canvasWidth=window.innerWidth,t.canvasHeight=window.innerHeight,t.canvas.width=t.canvasWidth*i,t.canvas.height=t.canvasHeight*i,i>1&&t.context.scale(i,i),n.length<2&&(()=>{const i=new o(t.charactersSrc.somun,"underAttack",.5*t.canvasWidth-256+64,.5*t.canvasHeight-64,t),e=new o(t.charactersSrc.ji,"attack",.5*t.canvasWidth-64,.5*t.canvasHeight-64,t);n.push(i),n.push(e),n.forEach((t=>a.push(t)))})(),c()},l=i=>{if(h>=t.colors.length)return;e.x=i.clientX-t.canvas.getBoundingClientRect().left,e.y=i.clientY-t.canvas.getBoundingClientRect().top;const c=new r(e.x,e.y,t,h);s.push(c),a.push(c),a.sort(((t,i)=>t.yForOrder-i.yForOrder)),h++,h>=t.colors.length&&(n[0].updateAction("attack"),n[1].updateAction("underAttack"))};return t.canvas.addEventListener("click",l),window.addEventListener("resize",d),window.addEventListener("load",d),d(),()=>{window.removeEventListener("click",l),window.removeEventListener("resize",d),window.removeEventListener("load",d)}}),[]),s.createElement(c,{id:"the-canvas"})};let o=function(){function t(t,i,e,s,n){this.width=256,this.height=256,this.x=e,this.y=s,this.yForOrder=this.y+this.height-24,this.action=i,this.image=new Image,this.image.src=t,this.setAction(),this.cm=n}var i=t.prototype;return i.setAction=function(){switch(this.action){case"attack":return this.startFrame=0,void(this.endFrame=1);case"underAttack":return this.startFrame=2,void(this.endFrame=3);default:this.startFrame=0,this.endFrame=0}this.frame=this.startFrame},i.updateAction=function(t){this.action=t,this.setAction()},i.draw=function(){this.cm.playedFrame%20==0&&(0===this.cm.currentFrame?this.frame=this.endFrame:this.frame=this.startFrame),this.cm.context.drawImage(this.image,256*this.frame,0,256,256,this.x,this.y,this.width,this.height)},t}()}}]);
//# sourceMappingURL=component---src-pages-land-tsx-85bc218ef534fb14728f.js.map