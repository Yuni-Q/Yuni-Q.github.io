<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg"/><link rel="preload" as="image" href="/images/profile.png"/><link rel="stylesheet" href="/_next/static/css/bc8bb31cb71603b2.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-57fdca2934e5ae0a.js"/><script src="/_next/static/chunks/6217bb07-738e49d824771fea.js" async=""></script><script src="/_next/static/chunks/5647-b33901b11da845dc.js" async=""></script><script src="/_next/static/chunks/main-app-ec1611f00934714e.js" async=""></script><script src="/_next/static/chunks/app/layout-3ad8bb7cb2292578.js" async=""></script><script src="/_next/static/chunks/9243-972bdccd4ceb11ae.js" async=""></script><script src="/_next/static/chunks/5800-4312aed1aa8a4305.js" async=""></script><script src="/_next/static/chunks/549-2babc012700e23ed.js" async=""></script><script src="/_next/static/chunks/4853-73ca7990eb89674b.js" async=""></script><script src="/_next/static/chunks/app/blog/%5B...slug%5D/page-9b274a2e0073d544.js" async=""></script><script id="ads" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><title>React Query ê°œì„ </title><meta name="description" content="&gt; Next.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.  ## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”  ### ë°°ê²½  - **í”„ë ˆì„ì›Œí¬**: Next"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="icon" type="image/png" href="/favicon2.png"/><link rel="shortcut icon" href="/favicon2.png"/><link rel="apple-touch-icon" href="/favicon2.png"/><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&amp;display=swap" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Catamaran:wght@800&amp;display=swap" rel="stylesheet"/><script>(adsbygoogle=window.adsbygoogle||[]).requestNonPersonalizedAds=1;</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div class="top-header"><a class="top-link" href="/">Yuni-Q</a><div class="flex items-center"><button class="outline-0 bg-white mx-[5px] p-0 appearance-none items-center rounded-[5px] border-0 cursor-pointer inline-flex h-10 justify-center opacity-75 overflow-hidden relative scale-75 transition-opacity duration-300 ease-in-out w-10 flex-shrink-0 hover:bg-black max-[800px]:hover:bg-white"><a href="https://github.com/Yuni-Q/blog" class="github" aria-label="GitHub"><svg class="github transition-all duration-300 ease-in-out pt-1 text-[#78757a] w-8 hover:text-white max-[800px]:hover:text-[#78757a]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></button><button class="outline-0 bg-white mx-[5px] p-0 appearance-none items-center rounded-[5px] border-0 cursor-pointer inline-flex h-10 justify-center opacity-75 overflow-hidden relative scale-75 transition-opacity duration-300 ease-in-out w-10 flex-shrink-0 hover:bg-black max-[800px]:hover:bg-white group"><div class="theme1 rounded-full h-6 relative w-6 transition-all duration-[450ms] ease-in-out bg-[#78757a]" style="border:none;overflow:visible;transform:scale(0.55)"><div class="absolute rounded-full h-6 w-6 transition-transform duration-[450ms] ease-in-out" style="border:none;opacity:0;right:-9px;top:-9px;transform:translate(14px, -14px);background:#78757a"></div><div class="absolute rounded-full h-2 w-2 left-1/2 top-1/2 transition-all duration-[350ms] ease-in-out" style="box-shadow:0 -23px 0 #78757a, 0 23px 0 #78757a, 23px 0 0 #78757a, -23px 0 0 #78757a, 15px 15px 0 #78757a, -15px 15px 0 #78757a, 15px -15px 0 #78757a, -15px -15px 0 #78757a;transform:scale(1);margin:-4px 0px 0px -4px"></div></div><div class="theme2 rounded-full border-0 h-6 absolute right-0 top-0 w-6 transition-all duration-[450ms] ease-in-out" style="background:none;opacity:0;transform:translate(14px, -14px)"></div></button><button class="outline-0 bg-white mx-[5px] p-0 appearance-none items-center rounded-[5px] border-0 cursor-pointer inline-flex h-10 justify-center opacity-75 overflow-hidden relative scale-75 transition-opacity duration-300 ease-in-out w-10 flex-shrink-0 hover:bg-black max-[800px]:hover:bg-white group"><svg class="snow transition-all duration-300 ease-in-out w-7 group-hover:fill-white max-[800px]:group-hover:fill-[#78757a]" style="fill:#78757a" version="1.1" id="ë ˆì´ì–´_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 23.9 22.9"><path d="M23.9,10c0-0.3-0.2-0.5-0.4-0.6l-1.1-0.3C22.1,9.1,22,9,21.9,8.8c-0.1-0.2,0-0.4,0.1-0.6l0.8-0.9       c0.2-0.2,0.2-0.5,0-0.7c-1.2-1.4-3.1-2-5-1.4c-0.4,0.1-0.9,0.4-1.4,0.7c0.1-0.6,0.2-1.1,0.2-1.6c0-1.9-1.2-3.6-2.9-4.3       c-0.2-0.1-0.5,0-0.7,0.2l-0.6,1c-0.1,0.2-0.3,0.3-0.5,0.3c-0.2,0-0.4-0.1-0.5-0.3l-0.6-1C10.7,0,10.4-0.1,10.2,0       C8.5,0.7,7.3,2.4,7.3,4.3c0,0.5,0.1,1,0.2,1.6C7,5.6,6.5,5.4,6.1,5.2c-1.8-0.6-3.8,0-5,1.4c-0.2,0.2-0.2,0.5,0,0.7l0.8,0.9       C2,8.4,2.1,8.6,2,8.8c0,0.2-0.2,0.3-0.4,0.4L0.4,9.5C0.2,9.5,0,9.8,0,10c0.1,1.8,1.4,3.5,3.2,4c0.4,0.1,1,0.2,1.5,0.3       c-0.4,0.4-0.8,0.8-1.1,1.1c-1.1,1.6-1.2,3.6-0.2,5.2c0.1,0.2,0.4,0.3,0.7,0.2l1.1-0.4c0.2-0.1,0.4-0.1,0.6,0C6,20.6,6,20.8,6,21.1       l-0.1,1.2c0,0.3,0.2,0.5,0.4,0.6c1.8,0.4,3.7-0.2,4.8-1.8c0.3-0.4,0.5-0.8,0.8-1.4c0.2,0.5,0.5,1,0.8,1.4c1.1,1.6,3.1,2.2,4.8,1.8       c0.3-0.1,0.4-0.3,0.4-0.6l-0.1-1.2c0-0.3,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.1,0.6,0l1.1,0.4c0.2,0.1,0.5,0,0.7-0.2       c1-1.6,0.9-3.6-0.2-5.2c-0.3-0.4-0.6-0.8-1.1-1.1c0.6-0.1,1.1-0.2,1.5-0.3C22.6,13.5,23.8,11.8,23.9,10z M14.1,12.8       c0.3-0.2,0.7-0.3,1.1-0.1c0.4,0.3,0.6,0.8,0.3,1.3c-0.3,0.4-0.8,0.6-1.3,0.3c-0.3-0.2-0.5-0.6-0.4-1l-1.4-0.8v1.6       c0.4,0.1,0.6,0.5,0.6,0.9c0,0.5-0.4,0.9-0.9,0.9c-0.5,0-0.9-0.4-0.9-0.9c0-0.4,0.3-0.7,0.6-0.9v-1.6l-1.4,0.8c0.1,0.4-0.1,0.8-0.4,1       c-0.4,0.3-1,0.1-1.3-0.3c-0.3-0.4-0.1-1,0.3-1.3c0.3-0.2,0.8-0.1,1.1,0.1l1.4-0.8L10,11.1c-0.3,0.2-0.7,0.3-1.1,0.1       C8.5,11,8.3,10.4,8.6,10c0.3-0.4,0.8-0.6,1.3-0.3c0.3,0.2,0.5,0.6,0.4,1l1.4,0.8V9.8c-0.4-0.1-0.6-0.5-0.6-0.9C11.1,8.4,11.5,8,12,8       c0.5,0,0.9,0.4,0.9,0.9c0,0.4-0.3,0.7-0.6,0.9v1.6l1.4-0.8c-0.1-0.4,0.1-0.8,0.4-1c0.4-0.3,1-0.1,1.3,0.3c0.3,0.4,0.1,1-0.3,1.3       c-0.3,0.2-0.8,0.1-1.1-0.1l-1.4,0.8L14.1,12.8z"></path></svg></button><a class="w-[30px] h-[30px] leading-[30px] mx-[5px] text-black flex-shrink-0 flex items-center justify-center" href="/search/">ê²€ìƒ‰</a></div></div><div class="layout-content" style="margin-right:0;max-width:none"><div class="mb-6 max-w-4xl mx-auto px-4 xl:pr-[220px]"><ins class="adsbygoogle block min-w-[320px] min-h-0 mx-auto bg-gray-300" data-ad-client="ca-pub-2667251850399676" data-ad-slot="9586629994" data-ad-format="auto" data-full-width-responsive="true"></ins></div><div class="relative"><div class="max-w-4xl mx-auto px-4 xl:pr-[220px]"><h1 class="text-4xl md:text-5xl font-extrabold mb-6 leading-tight text-gray-900 dark:text-gray-100">React Query ê°œì„ </h1><div class="flex flex-col gap-4 mb-8"><div class="flex items-center gap-2 text-gray-600 dark:text-gray-400"><span class="text-sm font-medium">yuni-q</span><span class="text-gray-400 dark:text-gray-500">Â·</span><span class="text-sm">2025ë…„ 12ì›” 28ì¼</span></div><div class="flex flex-wrap gap-2"><span class="px-3 py-1.5 text-sm rounded-md bg-green-50 dark:bg-green-900/20 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors cursor-pointer">React-Query</span><span class="px-3 py-1.5 text-sm rounded-md bg-green-50 dark:bg-green-900/20 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors cursor-pointer">Next.js</span><span class="px-3 py-1.5 text-sm rounded-md bg-green-50 dark:bg-green-900/20 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors cursor-pointer">SSR</span><span class="px-3 py-1.5 text-sm rounded-md bg-green-50 dark:bg-green-900/20 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors cursor-pointer">Props-Drilling</span><span class="px-3 py-1.5 text-sm rounded-md bg-green-50 dark:bg-green-900/20 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors cursor-pointer">ì•„í‚¤í…ì²˜</span><span class="px-3 py-1.5 text-sm rounded-md bg-green-50 dark:bg-green-900/20 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors cursor-pointer">ëª¨ë…¸ë ˆí¬</span></div></div><div class="jsx-4115489982 post-content prose prose-lg max-w-none  prose-headings:font-semibold prose-p:leading-relaxed prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-a:no-underline hover:prose-a:underline prose-strong:font-semibold prose-code:font-mono prose-code:text-sm prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-pre:bg-gray-900 dark:prose-pre:bg-gray-800 prose-blockquote:border-l-4 prose-blockquote:pl-4 prose-blockquote:italic prose-blockquote:my-6 prose-img:rounded-lg prose-img:shadow-md prose-table:w-full prose-ul:list-disc prose-ol:list-decimal prose-li:my-1"><blockquote>
<p>Next.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h2 id="-í”„ë¡œì íŠ¸-ê°œìš”">ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”<a aria-hidden="true" tabindex="-1" href="#-í”„ë¡œì íŠ¸-ê°œìš”"><span class="anchor"></span></a></h2>
<h3 id="ë°°ê²½">ë°°ê²½<a aria-hidden="true" tabindex="-1" href="#ë°°ê²½"><span class="anchor"></span></a></h3>
<ul>
<li><strong>í”„ë ˆì„ì›Œí¬</strong>: Next.js 14, React 18</li>
<li><strong>ëª©í‘œ</strong>: props drilling ì œê±° ë° SSR/CSR í™˜ê²½ í†µí•© ì²˜ë¦¬</li>
<li><strong>ì„±ê³¼</strong>: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°, ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´</li>
</ul>
<h3 id="í•µì‹¬-ì„±ê³¼">í•µì‹¬ ì„±ê³¼<a aria-hidden="true" tabindex="-1" href="#í•µì‹¬-ì„±ê³¼"><span class="anchor"></span></a></h3>
<ul>
<li>âœ… Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘</li>
<li>âœ… prefetch/query/useQueryë¥¼ ì´ìš©í•œ props drilling ì œê±°</li>
<li>âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ì—¬ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€</li>
<li>âœ… ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°</li>
<li>âœ… SSRì— ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ ì—°í•˜ê²Œ ëŒ€ì‘</li>
<li>âœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´</li>
</ul>
<hr>
<h2 id="-ë¬¸ì œ-ìƒí™©">ğŸ”´ ë¬¸ì œ ìƒí™©<a aria-hidden="true" tabindex="-1" href="#-ë¬¸ì œ-ìƒí™©"><span class="anchor"></span></a></h2>
<h3 id="1-props-drilling-ë¬¸ì œ">1. Props Drilling ë¬¸ì œ<a aria-hidden="true" tabindex="-1" href="#1-props-drilling-ë¬¸ì œ"><span class="anchor"></span></a></h3>
<p><strong>ë¬¸ì œ</strong>:</p>
<ul>
<li>ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ì„ ê±°ì³ ì „ë‹¬í•´ì•¼ í•¨</li>
<li>ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ propsë¥¼ ë°›ì•„ì•¼ í•¨</li>
<li>ì½”ë“œ ê°€ë…ì„± ì €í•˜ ë° ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€</li>
</ul>
<p><strong>BOLD_PAREN_PLACEHOLDER_0</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> initialData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>Layout<span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>Header userData<span class="token operator">=</span><span class="token punctuation">{</span>initialData<span class="token punctuation">.</span>user<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>MainContent
</span><span class="code-line">        products<span class="token operator">=</span><span class="token punctuation">{</span>initialData<span class="token punctuation">.</span>products<span class="token punctuation">}</span>
</span><span class="code-line">        userData<span class="token operator">=</span><span class="token punctuation">{</span>initialData<span class="token punctuation">.</span>user<span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>Footer <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>Layout<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">MainContent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> products<span class="token punctuation">,</span> userData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>ProductList products<span class="token operator">=</span><span class="token punctuation">{</span>products<span class="token punctuation">}</span> userData<span class="token operator">=</span><span class="token punctuation">{</span>userData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>RecommendationSection userData<span class="token operator">=</span><span class="token punctuation">{</span>userData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ì‹¤ì œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">ProductList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> products<span class="token punctuation">,</span> userData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// userDataë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ propsë¡œ ë°›ì•„ì•¼ í•¨</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>div<span class="token operator">></span><span class="token punctuation">{</span><span class="token comment">/* productsë§Œ ì‚¬ìš© */</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ë¬¸ì œì </strong>:</p>
<ul>
<li><code class="inline-code">userData</code>ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ë„ propsë¡œ ë°›ì•„ì•¼ í•¨</li>
<li>ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì—­í• ë§Œ í•¨</li>
<li>íƒ€ì… ì •ì˜ê°€ ë³µì¡í•´ì§</li>
</ul>
<hr>
<h3 id="2-ssrcsr-í™˜ê²½-ë¶„ë¦¬-ë¬¸ì œ">2. SSR/CSR í™˜ê²½ ë¶„ë¦¬ ë¬¸ì œ<a aria-hidden="true" tabindex="-1" href="#2-ssrcsr-í™˜ê²½-ë¶„ë¦¬-ë¬¸ì œ"><span class="anchor"></span></a></h3>
<p><strong>ë¬¸ì œ</strong>:</p>
<ul>
<li>SSR í™˜ê²½ì—ì„œëŠ” <code class="inline-code">getStaticProps</code>ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨</li>
<li>CSR í™˜ê²½ì—ì„œëŠ” <code class="inline-code">useQuery</code>ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨</li>
<li>ê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨</li>
</ul>
<p><strong>BOLD_PAREN_PLACEHOLDER_1</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// SSR í™˜ê²½</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    props<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      initialData<span class="token operator">:</span> <span class="token punctuation">{</span> products<span class="token punctuation">,</span> user <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// CSR í™˜ê²½</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> products <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token string">'products'</span><span class="token punctuation">,</span> fetchProducts<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> fetchUser<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// ê°™ì€ ë¡œì§ì„ ë‘ ë²ˆ ì‘ì„±í•´ì•¼ í•¨</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ë¬¸ì œì </strong>:</p>
<ul>
<li>ê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬</li>
<li>ì½”ë“œ ì¤‘ë³µ ë°œìƒ</li>
<li>í™˜ê²½ ì „í™˜ ì‹œ ìˆ˜ì • ë²”ìœ„ í¼</li>
</ul>
<hr>
<h3 id="3-ì‚¬ìš©ì²˜-react-query-ë””íœë˜ì‹œ-ë¬¸ì œ">3. ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ë¬¸ì œ<a aria-hidden="true" tabindex="-1" href="#3-ì‚¬ìš©ì²˜-react-query-ë””íœë˜ì‹œ-ë¬¸ì œ"><span class="anchor"></span></a></h3>
<p><strong>ë¬¸ì œ</strong>:</p>
<ul>
<li>ëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ react-queryë¥¼ ì§ì ‘ importí•´ì•¼ í•¨</li>
<li>ëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ì¦ê°€</li>
<li>ëª¨ë“ˆ ë…ë¦½ì„± ì €í•˜</li>
</ul>
<p><strong>BOLD_PAREN_PLACEHOLDER_2</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// ëª¨ë“ˆ ì‚¬ìš©ì²˜</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ProductList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@modules/product-list'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> products <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fetchProducts<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>ProductList products<span class="token operator">=</span><span class="token punctuation">{</span>products<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ë¬¸ì œì </strong>:</p>
<ul>
<li>ì‚¬ìš©ì²˜ì—ì„œ react-queryë¥¼ ì•Œì•„ì•¼ í•¨</li>
<li>ëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ë†’ìŒ</li>
<li>ëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ë„ ìˆ˜ì • í•„ìš”</li>
</ul>
<hr>
<h2 id="-í•´ê²°-ë°©ë²•">âœ… í•´ê²° ë°©ë²•<a aria-hidden="true" tabindex="-1" href="#-í•´ê²°-ë°©ë²•"><span class="anchor"></span></a></h2>
<h3 id="1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸-ëŒ€ì‘">1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘<a aria-hidden="true" tabindex="-1" href="#1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸-ëŒ€ì‘"><span class="anchor"></span></a></h3>
<p><strong>í•µì‹¬ ì•„ì´ë””ì–´</strong>:</p>
<ul>
<li>Provider levelì—ì„œ SSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸</li>
<li>ì‚¬ìš©ì²˜ì—ì„œëŠ” í™˜ê²½ì„ ì‹ ê²½ ì“°ì§€ ì•Šê³  <code class="inline-code">useQuery</code>ë§Œ ì‚¬ìš©</li>
</ul>
<p><strong>êµ¬í˜„</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// CorePackProvider.tsx</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span>
</span><span class="code-line">  QueryClient<span class="token punctuation">,</span>
</span><span class="code-line">  QueryClientProvider<span class="token punctuation">,</span>
</span><span class="code-line">  dehydrate<span class="token punctuation">,</span>
</span><span class="code-line">  Hydrate<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">CorePackProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  children<span class="token punctuation">,</span>
</span><span class="code-line">  dehydratedState<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token operator">:</span> CorePackProviderProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>queryClient<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
</span><span class="code-line">      <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">        defaultOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">          queries<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">            staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 1ë¶„</span>
</span><span class="code-line">            cacheTime<span class="token operator">:</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 5ë¶„</span>
</span><span class="code-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>QueryClientProvider client<span class="token operator">=</span><span class="token punctuation">{</span>queryClient<span class="token punctuation">}</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>Hydrate state<span class="token operator">=</span><span class="token punctuation">{</span>dehydratedState<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>Hydrate<span class="token operator">></span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>QueryClientProvider<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>í˜ì´ì§€ ë ˆë²¨ì—ì„œ ì‚¬ìš©</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// pages/home.tsx</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> queryClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// SSRì—ì„œ ë°ì´í„° prefetch</span>
</span><span class="code-line">  <span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fetchProducts<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fetchUser<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    props<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      dehydratedState<span class="token operator">:</span> <span class="token function">dehydrate</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dehydratedState <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>CorePackProvider dehydratedState<span class="token operator">=</span><span class="token punctuation">{</span>dehydratedState<span class="token punctuation">}</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>HomePageContent <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>CorePackProvider<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… SSR ë°ì´í„°ê°€ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸ë¨</li>
<li>âœ… CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥</li>
<li>âœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”</li>
</ul>
<hr>
<h3 id="2-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬--prefetchusequeryì—ì„œ-ì‚¬ìš©">2. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬ â†’ prefetch/useQueryì—ì„œ ì‚¬ìš©<a aria-hidden="true" tabindex="-1" href="#2-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬--prefetchusequeryì—ì„œ-ì‚¬ìš©"><span class="anchor"></span></a></h3>
<p><strong>í•µì‹¬ ì›ì¹™</strong>: ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ prefetchì™€ useQueryì—ì„œ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•˜ë©´ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<p><strong>êµ¬ì¡°</strong>:</p>
<ol>
<li><strong>ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬</strong>: ì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ì–´ì„œ ì •ì˜</li>
<li><strong>prefetch/useQueryì—ì„œ ì‚¬ìš©</strong>: ì •ì˜í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì¬ì‚¬ìš©</li>
</ol>
<h4 id="1ë‹¨ê³„-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬">1ë‹¨ê³„: ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬<a aria-hidden="true" tabindex="-1" href="#1ë‹¨ê³„-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬"><span class="anchor"></span></a></h4>
<p><strong>ì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ê¸°</strong> (<code class="inline-code">queries/products.ts</code>):</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// queries/products.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> productsQuery <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">,</span>
</span><span class="code-line">  queryFn<span class="token operator">:</span> fetchProducts<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span> satisfies QueryOptions
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">productDetailQuery</span> <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span>
</span><span class="code-line">  <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">,</span> <span class="token string">'detail'</span><span class="token punctuation">,</span> id<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function-variable function">queryFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetchProductDetail</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span> satisfies QueryOptions<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">productsListQuery</span> <span class="token operator">=</span> <span class="token punctuation">(</span>filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span>
</span><span class="code-line">  <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">,</span> <span class="token string">'list'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> filters <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function-variable function">queryFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetchProducts</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span> satisfies QueryOptions<span class="token punctuation">)</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€</li>
<li>âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜ ë³´ì¥</li>
<li>âœ… íƒ€ì… ì•ˆì „ì„± í™•ë³´</li>
<li>âœ… ì¿¼ë¦¬ ì •ì˜ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •</li>
</ul>
<h4 id="2ë‹¨ê³„-prefetchì™€-usequeryì—ì„œ-ì‚¬ìš©">2ë‹¨ê³„: prefetchì™€ useQueryì—ì„œ ì‚¬ìš©<a aria-hidden="true" tabindex="-1" href="#2ë‹¨ê³„-prefetchì™€-usequeryì—ì„œ-ì‚¬ìš©"><span class="anchor"></span></a></h4>
<p><strong>BOLD_PAREN_PLACEHOLDER_3</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// hooks/useProductsPrefetch.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span>
</span><span class="code-line">  productsQuery<span class="token punctuation">,</span>
</span><span class="code-line">  productDetailQuery<span class="token punctuation">,</span>
</span><span class="code-line">  productsListQuery<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../queries/products'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">prefetchProducts</span><span class="token punctuation">(</span>
</span><span class="code-line">  queryClient<span class="token operator">:</span> QueryClient<span class="token punctuation">,</span>
</span><span class="code-line">  filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©</span>
</span><span class="code-line">  <span class="token keyword">return</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token operator">...</span><span class="token function">productsListQuery</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">prefetchProductDetail</span><span class="token punctuation">(</span>
</span><span class="code-line">  queryClient<span class="token operator">:</span> QueryClient<span class="token punctuation">,</span>
</span><span class="code-line">  id<span class="token operator">:</span> <span class="token builtin">number</span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©</span>
</span><span class="code-line">  <span class="token keyword">return</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token operator">...</span><span class="token function">productDetailQuery</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>BOLD_PAREN_PLACEHOLDER_4</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// hooks/useProductsQuery.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery<span class="token punctuation">,</span> UseQueryOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span>
</span><span class="code-line">  productsQuery<span class="token punctuation">,</span>
</span><span class="code-line">  productDetailQuery<span class="token punctuation">,</span>
</span><span class="code-line">  productsListQuery<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../queries/products'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProductsQuery</span><span class="token punctuation">(</span>
</span><span class="code-line">  filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
</span><span class="code-line">  options<span class="token operator">?</span><span class="token operator">:</span> Omit<span class="token operator">&#x3C;</span>UseQueryOptions<span class="token punctuation">,</span> <span class="token string">'queryKey'</span> <span class="token operator">|</span> <span class="token string">'queryFn'</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token operator">...</span><span class="token function">productsListQuery</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token operator">...</span>options<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProductDetailQuery</span><span class="token punctuation">(</span>
</span><span class="code-line">  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span><span class="code-line">  options<span class="token operator">?</span><span class="token operator">:</span> Omit<span class="token operator">&#x3C;</span>UseQueryOptions<span class="token punctuation">,</span> <span class="token string">'queryKey'</span> <span class="token operator">|</span> <span class="token string">'queryFn'</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token operator">...</span><span class="token function">productDetailQuery</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token operator">...</span>options<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” hook</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// hooks/useProducts.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useProductsQuery<span class="token punctuation">,</span> useProductDetailQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./useProductsQuery'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProducts</span><span class="token punctuation">(</span>filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProductsQuery</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    products<span class="token operator">:</span> data <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    isLoading<span class="token punctuation">,</span>
</span><span class="code-line">    error<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProduct</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProductDetailQuery</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    product<span class="token operator">:</span> data<span class="token punctuation">,</span>
</span><span class="code-line">    isLoading<span class="token punctuation">,</span>
</span><span class="code-line">    error<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ì‚¬ìš© ì˜ˆì‹œ</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">ProductList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filters <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> products<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProducts</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>Loading <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
</span><span class="code-line">      <span class="token punctuation">{</span>products<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token operator">&#x3C;</span>ProductCard key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>id<span class="token punctuation">}</span> product<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">ProductDetail</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> product<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProduct</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>Loading <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>product<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>NotFound <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>ProductDetailView product<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… props drilling ì œê±°</li>
<li>âœ… ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´</li>
<li>âœ… ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ëŠ” props ì „ë‹¬ ë¶ˆí•„ìš”</li>
<li>âœ… <strong>prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€</strong></li>
<li>âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜í•˜ì—¬ ìºì‹œ íˆíŠ¸ ë³´ì¥</li>
</ul>
<hr>
<h3 id="3-ëª¨ë“ˆ-ë…ë¦½ì„±-í™•ë³´">3. ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´<a aria-hidden="true" tabindex="-1" href="#3-ëª¨ë“ˆ-ë…ë¦½ì„±-í™•ë³´"><span class="anchor"></span></a></h3>
<p><strong>BOLD_PAREN_PLACEHOLDER_5</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// ì‚¬ìš©ì²˜</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ProductList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@modules/product-list'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> products <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fetchProducts<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>ProductList products<span class="token operator">=</span><span class="token punctuation">{</span>products<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>BOLD_PAREN_PLACEHOLDER_6</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// ëª¨ë“ˆ ë‚´ë¶€ (ProductList/index.tsx)</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useProducts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./hooks/useProducts'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ProductList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> products<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>Loading <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
</span><span class="code-line">      <span class="token punctuation">{</span>products<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token operator">&#x3C;</span>ProductCard key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>id<span class="token punctuation">}</span> product<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ì‚¬ìš©ì²˜</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ProductList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@modules/product-list'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// react-queryë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ!</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>ProductList <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… ì‚¬ìš©ì²˜ì—ì„œ react-query ë””íœë˜ì‹œ ì œê±°</li>
<li>âœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´</li>
<li>âœ… ëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ ìˆ˜ì • ë¶ˆí•„ìš”</li>
</ul>
<hr>
<h3 id="4-ssrcsr-í†µí•©-ì²˜ë¦¬">4. SSR/CSR í†µí•© ì²˜ë¦¬<a aria-hidden="true" tabindex="-1" href="#4-ssrcsr-í†µí•©-ì²˜ë¦¬"><span class="anchor"></span></a></h3>
<p><strong>í†µí•©ëœ ë°ì´í„° í˜ì¹­ ë¡œì§</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// hooks/useProducts.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useProductsQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./useProductsQuery'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProducts</span><span class="token punctuation">(</span>filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// SSRì—ì„œ prefetchëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©</span>
</span><span class="code-line">  <span class="token comment">// ì—†ìœ¼ë©´ CSRì—ì„œ fetch</span>
</span><span class="code-line">  <span class="token comment">// prefetchì™€ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProductsQuery</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    products<span class="token operator">:</span> data <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    isLoading<span class="token punctuation">,</span>
</span><span class="code-line">    error<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>í˜ì´ì§€ ë ˆë²¨ì—ì„œ prefetch</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// pages/home.tsx</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> dehydrate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> prefetchProducts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../hooks/useProductsPrefetch'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> prefetchUserProfile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../hooks/useUserPrefetch'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> queryClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// SSRì—ì„œ prefetch (ì¤‘ì•™ ê´€ë¦¬ëœ ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ì‚¬ìš©)</span>
</span><span class="code-line">  <span class="token keyword">await</span> <span class="token function">prefetchProducts</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">await</span> <span class="token function">prefetchUserProfile</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    props<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      dehydratedState<span class="token operator">:</span> <span class="token function">dehydrate</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    revalidate<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token comment">// ISR</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… SSRê³¼ CSRì—ì„œ ë™ì¼í•œ ì½”ë“œ ì‚¬ìš©</li>
<li>âœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”</li>
<li>âœ… ISRê³¼ë„ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©</li>
</ul>
<hr>
<h2 id="ï¸-ì•„í‚¤í…ì²˜">ğŸ—ï¸ ì•„í‚¤í…ì²˜<a aria-hidden="true" tabindex="-1" href="#ï¸-ì•„í‚¤í…ì²˜"><span class="anchor"></span></a></h2>
<h3 id="ë³€ê²½-ì „-êµ¬ì¡°">ë³€ê²½ ì „ êµ¬ì¡°<a aria-hidden="true" tabindex="-1" href="#ë³€ê²½-ì „-êµ¬ì¡°"><span class="anchor"></span></a></h3>
<pre class="optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="code-highlight"><span class="code-line">Page Component
</span><span class="code-line">  â†“ (props drilling)
</span><span class="code-line">Layout Component
</span><span class="code-line">  â†“ (props drilling)
</span><span class="code-line">MainContent Component
</span><span class="code-line">  â†“ (props drilling)
</span><span class="code-line">ProductList Component (ì‹¤ì œ ì‚¬ìš©)
</span></code></pre>
<h3 id="ë³€ê²½-í›„-êµ¬ì¡°">ë³€ê²½ í›„ êµ¬ì¡°<a aria-hidden="true" tabindex="-1" href="#ë³€ê²½-í›„-êµ¬ì¡°"><span class="anchor"></span></a></h3>
<pre class="optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="code-highlight"><span class="code-line">1. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬
</span><span class="code-line">   queries/products.ts
</span><span class="code-line">   â””â”€ productsQuery (queryKey + queryFn ë¬¶ìŒ)
</span><span class="code-line">
</span><span class="code-line">2. prefetch/useQueryì—ì„œ ì‚¬ìš©
</span><span class="code-line">   Page Component
</span><span class="code-line">     â†“ (prefetch - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)
</span><span class="code-line">   CorePackProvider (í•˜ì´ë“œë ˆì´íŠ¸)
</span><span class="code-line">     â†“
</span><span class="code-line">   ProductList Component
</span><span class="code-line">     â†“ (useQuery - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)
</span><span class="code-line">   React Query Cache (ìºì‹œ íˆíŠ¸ ë³´ì¥!)
</span></code></pre>
<hr>
<h2 id="-ê°œì„ -íš¨ê³¼">ğŸ“ˆ ê°œì„  íš¨ê³¼<a aria-hidden="true" tabindex="-1" href="#-ê°œì„ -íš¨ê³¼"><span class="anchor"></span></a></h2>
<table>
<thead>
<tr>
<th>í•­ëª©</th>
<th>Before</th>
<th>After</th>
<th>ê°œì„ </th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Props ì „ë‹¬ ë ˆë²¨</strong></td>
<td>3-4ë‹¨ê³„</td>
<td>0ë‹¨ê³„</td>
<td><strong>100% ì œê±°</strong></td>
</tr>
<tr>
<td><strong>ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •</strong></td>
<td>í•„ìš”</td>
<td>ë¶ˆí•„ìš”</td>
<td><strong>ìˆ˜ì • ë²”ìœ„ ê°ì†Œ</strong></td>
</tr>
<tr>
<td><strong>ì½”ë“œ ê°€ë…ì„±</strong></td>
<td>ë‚®ìŒ</td>
<td>ë†’ìŒ</td>
<td><strong>í–¥ìƒ</strong></td>
</tr>
<tr>
<td><strong>ëª¨ë“ˆ ë…ë¦½ì„±</strong></td>
<td>ë‚®ìŒ</td>
<td>ë†’ìŒ</td>
<td><strong>í–¥ìƒ</strong></td>
</tr>
<tr>
<td><strong>í™˜ê²½ ì „í™˜</strong></td>
<td>ì½”ë“œ ìˆ˜ì • í•„ìš”</td>
<td>ìˆ˜ì • ë¶ˆí•„ìš”</td>
<td><strong>ìœ ì—°ì„± í–¥ìƒ</strong></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="-í•µì‹¬-êµí›ˆ">ğŸ’¡ í•µì‹¬ êµí›ˆ<a aria-hidden="true" tabindex="-1" href="#-í•µì‹¬-êµí›ˆ"><span class="anchor"></span></a></h2>
<h3 id="1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸ê°€-í•µì‹¬">1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ê°€ í•µì‹¬<a aria-hidden="true" tabindex="-1" href="#1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸ê°€-í•µì‹¬"><span class="anchor"></span></a></h3>
<p>SSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸í•˜ë©´, CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì •ì„ ìµœì†Œí™”í•˜ëŠ” í•µì‹¬ì…ë‹ˆë‹¤.</p>
<h3 id="2-ì¿¼ë¦¬-í‚¤ì™€-queryfnì„-í•¨ê»˜-ë¬¶ì–´ì„œ-ì‚¬ìš©í•´ì•¼-í•¨">2. ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•´ì•¼ í•¨<a aria-hidden="true" tabindex="-1" href="#2-ì¿¼ë¦¬-í‚¤ì™€-queryfnì„-í•¨ê»˜-ë¬¶ì–´ì„œ-ì‚¬ìš©í•´ì•¼-í•¨"><span class="anchor"></span></a></h3>
<p><strong>í•µì‹¬</strong>: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´(queryKey + queryFn)ë¥¼ ì‚¬ìš©í•´ì•¼ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<p><strong>ë¬¸ì œ ìƒí™©</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// âŒ ì˜ëª»ëœ ì˜ˆ: prefetchì™€ useQueryì—ì„œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì •ì˜</span>
</span><span class="code-line"><span class="token comment">// prefetchì—ì„œ</span>
</span><span class="code-line"><span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  queryFn<span class="token operator">:</span> fetchProducts<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// useQueryì—ì„œ (ì¿¼ë¦¬ í‚¤ë‚˜ í•¨ìˆ˜ê°€ ì¡°ê¸ˆì´ë¼ë„ ë‹¤ë¥´ë©´ ìºì‹œ ë¯¸ìŠ¤!)</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// ë™ì¼í•˜ì§€ë§Œ</span>
</span><span class="code-line">  <span class="token function-variable function">queryFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetchProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ê°ì‹¸ë©´ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ì¸ì‹!</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p><strong>í•´ê²° ë°©ë²•</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ì¿¼ë¦¬ ê°ì²´ë¥¼ ë¬¶ì–´ì„œ ì¬ì‚¬ìš©</span>
</span><span class="code-line"><span class="token keyword">const</span> productsQuery <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  queryFn<span class="token operator">:</span> fetchProducts<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// prefetchì—ì„œ</span>
</span><span class="code-line"><span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span>productsQuery<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// useQueryì—ì„œ (ë™ì¼í•œ ê°ì²´ ì‚¬ìš©)</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span>productsQuery<span class="token punctuation">)</span>
</span></code></pre>
<p>ì´ë ‡ê²Œ í•˜ë©´ prefetchì—ì„œ ì¤€ë¹„í•œ ë°ì´í„°ë¥¼ useQueryì—ì„œ ì •í™•íˆ ì°¾ì„ ìˆ˜ ìˆì–´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë©ë‹ˆë‹¤.</p>
<h3 id="3-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜ë¥¼-ë¨¼ì €-ê´€ë¦¬í•˜ê³ -prefetchusequeryì—ì„œ-ì‚¬ìš©í•˜ëŠ”-êµ¬ì¡°ê°€-íš¨ê³¼ì ">3. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ë¥¼ ë¨¼ì € ê´€ë¦¬í•˜ê³  prefetch/useQueryì—ì„œ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ê°€ íš¨ê³¼ì <a aria-hidden="true" tabindex="-1" href="#3-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜ë¥¼-ë¨¼ì €-ê´€ë¦¬í•˜ê³ -prefetchusequeryì—ì„œ-ì‚¬ìš©í•˜ëŠ”-êµ¬ì¡°ê°€-íš¨ê³¼ì "><span class="anchor"></span></a></h3>
<p>ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ ë¨¼ì € ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ê³ , prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ ì¼ê´€ì„±ì´ ë³´ì¥ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ê° ë ˆì´ì–´ì˜ ì±…ì„ì´ ëª…í™•í•´ì§€ê³  ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.</p>
<h3 id="4-ëª¨ë“ˆ-ë…ë¦½ì„±ì„-ìœ„í•´-ë‚´ë¶€ì—ì„œ-ì²˜ë¦¬">4. ëª¨ë“ˆ ë…ë¦½ì„±ì„ ìœ„í•´ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬<a aria-hidden="true" tabindex="-1" href="#4-ëª¨ë“ˆ-ë…ë¦½ì„±ì„-ìœ„í•´-ë‚´ë¶€ì—ì„œ-ì²˜ë¦¬"><span class="anchor"></span></a></h3>
<p>ëª¨ë“ˆì´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë‚´ë¶€ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ í•˜ë©´, ì‚¬ìš©ì²˜ì˜ ë””íœë˜ì‹œë¥¼ ì œê±°í•  ìˆ˜ ìˆê³  ëª¨ë“ˆ ë…ë¦½ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.</p>
<h3 id="5-íƒ€ì…-ì•ˆì „ì„±ì„-ìœ ì§€í•´ì•¼-í•¨">5. íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•´ì•¼ í•¨<a aria-hidden="true" tabindex="-1" href="#5-íƒ€ì…-ì•ˆì „ì„±ì„-ìœ ì§€í•´ì•¼-í•¨"><span class="anchor"></span></a></h3>
<p>React Queryì˜ íƒ€ì…ì„ í™œìš©í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. <code class="inline-code">useQuery</code>ì˜ ì œë„¤ë¦­ íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ê³ , ì¿¼ë¦¬ í‚¤ë¥¼ <code class="inline-code">as const</code>ë¡œ ì •ì˜í•˜ë©´ íƒ€ì… ì²´í¬ê°€ ê°•í™”ë©ë‹ˆë‹¤.</p>
<h3 id="6-ìºì‹±-ì „ëµì„-ì‹ ì¤‘í•˜ê²Œ-ì„¤ê³„í•´ì•¼-í•¨">6. ìºì‹± ì „ëµì„ ì‹ ì¤‘í•˜ê²Œ ì„¤ê³„í•´ì•¼ í•¨<a aria-hidden="true" tabindex="-1" href="#6-ìºì‹±-ì „ëµì„-ì‹ ì¤‘í•˜ê²Œ-ì„¤ê³„í•´ì•¼-í•¨"><span class="anchor"></span></a></h3>
<p><code class="inline-code">staleTime</code>, <code class="inline-code">cacheTime</code> ë“±ì„ ì ì ˆíˆ ì„¤ì •í•˜ì—¬ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ë°©ì§€í•˜ê³ , ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œì¼œì•¼ í•©ë‹ˆë‹¤. prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë˜ì–´ SSR ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<hr>
<h2 id="-ê²°ë¡ ">ğŸ¯ ê²°ë¡ <a aria-hidden="true" tabindex="-1" href="#-ê²°ë¡ "><span class="anchor"></span></a></h2>
<p>React Query ë ˆì´ì–´ êµ¬ì¶•ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ì„±ê³¼ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤:</p>
<ol>
<li>âœ… <strong>Props Drilling ì™„ì „ ì œê±°</strong>: ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´</li>
<li>âœ… <strong>ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€</strong>: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥</li>
<li>âœ… <strong>SSR/CSR í™˜ê²½ í†µí•©</strong>: ë™ì¼í•œ ì½”ë“œë¡œ ë‘ í™˜ê²½ ëª¨ë‘ ì§€ì›</li>
<li>âœ… <strong>ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´</strong>: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°</li>
<li>âœ… <strong>ì½”ë“œ ê°€ë…ì„± í–¥ìƒ</strong>: ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ì˜ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì œê±°</li>
<li>âœ… <strong>ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ</strong>: í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”, ì¿¼ë¦¬ ê°ì²´ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •</li>
</ol>
<p>ì´ë²ˆ ì‘ì—…ì„ í†µí•´ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œì˜ ìƒíƒœ ê´€ë¦¬ì™€ ë°ì´í„° í˜ì¹­ ì•„í‚¤í…ì²˜ ì„¤ê³„ ê²½í—˜ì„ ìŒ“ì•˜ê³ , React Queryì˜ prefetch, í•˜ì´ë“œë ˆì´íŠ¸, ìºì‹± ì „ëµ, ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ ë“±ì„ ì‹¤ë¬´ì— ì ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<hr>
<h2 id="-ì°¸ê³ -ìë£Œ">ğŸ“š ì°¸ê³  ìë£Œ<a aria-hidden="true" tabindex="-1" href="#-ì°¸ê³ -ìë£Œ"><span class="anchor"></span></a></h2>
<ul>
<li><a href="https://tanstack.com/query/latest">TanStack Query Documentation</a></li>
<li><a href="https://nextjs.org/docs/app/building-your-application/data-fetching">Next.js Data Fetching</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/guides/ssr">React Query SSR Guide</a></li>
</ul></div></div></div><div class="flex flex-col gap-5 my-10 max-w-4xl mx-auto px-4 xl:pr-[220px]"><div class="sponsor-button"><a class="flex items-center justify-center gap-3 px-6 py-3.5 bg-gradient-to-r from-amber-400 via-amber-500 to-amber-600 hover:from-amber-500 hover:via-amber-600 hover:to-amber-700 active:from-amber-600 active:via-amber-700 active:to-amber-800 text-white rounded-2xl transition-all duration-300 cursor-pointer border-0 shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] font-semibold text-base no-underline" target="_blank" rel="noopener noreferrer" href="https://www.buymeacoffee.com/yuniq"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee" class="w-7 h-7 flex-shrink-0"/><span>Buy me a coffee</span></a></div></div><div class="max-w-4xl mx-auto px-4 xl:pr-[220px]"><ins class="kakao_ad_area block" data-ad-unit="DAN-kkYIHzVbuDz3kYsq" data-ad-width="320" data-ad-height="50" style="width:320px;height:50px"></ins></div><div class="max-w-4xl mx-auto px-4 xl:pr-[220px]"><hr class="custom-hr"/></div><div class="my-8 max-w-4xl mx-auto px-4 xl:pr-[220px]"><div class="bio-container"><div class="author-description flex"><img class="bio-author-image" src="/images/profile.png" alt="yuni-q" width="72"/><div><span class="author-name-prefix text-[90%] mr-1">Written by</span><a class="author-name-content" href="/about/"><span>@<!-- -->yuni-q</span></a><div class="author-introduction mt-1 text-[80%] leading-[1.4]">yuni-q&#x27;s graffiti.</div><p class="author-socials mt-[-4px]"><a href="https://github.com/Yuni-Q" class="mr-2 text-[80%]">GitHub</a></p></div></div></div></div><div class="max-w-4xl mx-auto px-4 xl:pr-[220px]"><nav class="navigator my-8"><ul class="flex flex-col gap-4"><li><a rel="prev" class="block p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200 group" href="/develop/ê°œë°œ í”„ë¡œì„¸ìŠ¤ ìë™í™” êµ¬ì¶•/"><div class="text-xs text-gray-500 dark:text-gray-400 mb-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">ì´ì „ ê¸€</div><div class="text-sm font-medium text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">â† <!-- -->ê°œë°œ í”„ë¡œì„¸ìŠ¤ ìë™í™” êµ¬ì¶•</div></a></li><li><a rel="next" class="block p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200 group text-right" href="/develop/Next.js ë¹Œë“œ ìµœì í™”"><div class="text-xs text-gray-500 dark:text-gray-400 mb-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">ë‹¤ìŒ ê¸€</div><div class="text-sm font-medium text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">Next.js ë¹Œë“œ ìµœì í™”<!-- --> â†’</div></a></li></ul></nav></div><div class="max-w-4xl mx-auto px-4 xl:pr-[220px]"><div class="utterences"></div></div><footer class="pt-[52px] text-center text-xs">Â©<a href="https://github.com/Yuni-Q" class="no-underline">yuni-q</a>, Built with<!-- --> <a href="https://nextjs.org" class="no-underline">Next.js</a></footer></div><script src="/_next/static/chunks/webpack-57fdca2934e5ae0a.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/bc8bb31cb71603b2.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[1633,[],\"\"]\n5:I[808,[],\"\"]\n7:I[6217,[],\"\"]\n8:I[5217,[\"3185\",\"static/chunks/app/layout-3ad8bb7cb2292578.js\"],\"ServiceWorkerCleanup\"]\n9:I[6484,[\"3185\",\"static/chunks/app/layout-3ad8bb7cb2292578.js\"],\"ThemeProvider\"]\nb:I[7768,[],\"\"]\n6:[\"slug\",\"develop/React%20Query%20%EA%B0%9C%EC%84%A0\",\"c\"]\nc:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"static-build-id\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"blog\",\"develop\",\"React%20Query%20%EA%B0%9C%EC%84%A0\",\"\"],\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"develop/React%20Query%20%EA%B0%9C%EC%84%A0\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"develop\\\",\\\"React Query ê°œì„ \\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"develop/React%20Query%20%EA%B0%9C%EC%84%A0\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L3\",\"$L4\",null],null],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$6\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/bc8bb31cb71603b2.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.googleapis.com\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.gstatic.com\",\"crossOrigin\":\"anonymous\"}],[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700\u0026display=swap\",\"rel\":\"stylesheet\"}],[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Catamaran:wght@800\u0026display=swap\",\"rel\":\"stylesheet\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"href\":\"/favicon2.png\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon2.png\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/favicon2.png\"}],[\"$\",\"script\",null,{\"id\":\"ads\",\"async\":true,\"src\":\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"(adsbygoogle=window.adsbygoogle||[]).requestNonPersonalizedAds=1;\"}}]]}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"noscript\",null,{\"children\":\"You need to enable JavaScript to run this app.\"}],[\"$\",\"$L8\",null,{}],[\"$\",\"$L9\",null,{\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]]}]]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$La\"],\"globalErrorComponent\":\"$b\",\"missingSlots\":\"$Wc\"}]\n"])</script><script>self.__next_f.push([1,"d:I[5553,[\"9243\",\"static/chunks/9243-972bdccd4ceb11ae.js\",\"5800\",\"static/chunks/5800-4312aed1aa8a4305.js\",\"549\",\"static/chunks/549-2babc012700e23ed.js\",\"4853\",\"static/chunks/4853-73ca7990eb89674b.js\",\"6797\",\"static/chunks/app/blog/%5B...slug%5D/page-9b274a2e0073d544.js\"],\"BlogPostPageClient\"]\ne:T4363,"])</script><script>self.__next_f.push([1,"\n\u003e Next.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.\n\n## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”\n\n### ë°°ê²½\n\n- **í”„ë ˆì„ì›Œí¬**: Next.js 14, React 18\n- **ëª©í‘œ**: props drilling ì œê±° ë° SSR/CSR í™˜ê²½ í†µí•© ì²˜ë¦¬\n- **ì„±ê³¼**: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°, ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´\n\n### í•µì‹¬ ì„±ê³¼\n\n- âœ… Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘\n- âœ… prefetch/query/useQueryë¥¼ ì´ìš©í•œ props drilling ì œê±°\n- âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ì—¬ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€\n- âœ… ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°\n- âœ… SSRì— ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ ì—°í•˜ê²Œ ëŒ€ì‘\n- âœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´\n\n---\n\n## ğŸ”´ ë¬¸ì œ ìƒí™©\n\n### 1. Props Drilling ë¬¸ì œ\n\n**ë¬¸ì œ**:\n\n- ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ì„ ê±°ì³ ì „ë‹¬í•´ì•¼ í•¨\n- ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ propsë¥¼ ë°›ì•„ì•¼ í•¨\n- ì½”ë“œ ê°€ë…ì„± ì €í•˜ ë° ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€\n\n**Before (Props Drilling)**:\n\n```typescript\n// í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸\nexport default function HomePage({ initialData }) {\n  return (\n    \u003cLayout\u003e\n      \u003cHeader userData={initialData.user} /\u003e\n      \u003cMainContent\n        products={initialData.products}\n        userData={initialData.user}\n      /\u003e\n      \u003cFooter /\u003e\n    \u003c/Layout\u003e\n  )\n}\n\n// ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸\nfunction MainContent({ products, userData }) {\n  return (\n    \u003cdiv\u003e\n      \u003cProductList products={products} userData={userData} /\u003e\n      \u003cRecommendationSection userData={userData} /\u003e\n    \u003c/div\u003e\n  )\n}\n\n// ì‹¤ì œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸\nfunction ProductList({ products, userData }) {\n  // userDataë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ propsë¡œ ë°›ì•„ì•¼ í•¨\n  return \u003cdiv\u003e{/* productsë§Œ ì‚¬ìš© */}\u003c/div\u003e\n}\n```\n\n**ë¬¸ì œì **:\n\n- `userData`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ë„ propsë¡œ ë°›ì•„ì•¼ í•¨\n- ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì—­í• ë§Œ í•¨\n- íƒ€ì… ì •ì˜ê°€ ë³µì¡í•´ì§\n\n---\n\n### 2. SSR/CSR í™˜ê²½ ë¶„ë¦¬ ë¬¸ì œ\n\n**ë¬¸ì œ**:\n\n- SSR í™˜ê²½ì—ì„œëŠ” `getStaticProps`ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨\n- CSR í™˜ê²½ì—ì„œëŠ” `useQuery`ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨\n- ê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨\n\n**Before (í™˜ê²½ ë¶„ë¦¬)**:\n\n```typescript\n// SSR í™˜ê²½\nexport async function getStaticProps() {\n  const products = await fetchProducts()\n  const user = await fetchUser()\n\n  return {\n    props: {\n      initialData: { products, user },\n    },\n  }\n}\n\n// CSR í™˜ê²½\nfunction Component() {\n  const { data: products } = useQuery('products', fetchProducts)\n  const { data: user } = useQuery('user', fetchUser)\n\n  // ê°™ì€ ë¡œì§ì„ ë‘ ë²ˆ ì‘ì„±í•´ì•¼ í•¨\n}\n```\n\n**ë¬¸ì œì **:\n\n- ê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬\n- ì½”ë“œ ì¤‘ë³µ ë°œìƒ\n- í™˜ê²½ ì „í™˜ ì‹œ ìˆ˜ì • ë²”ìœ„ í¼\n\n---\n\n### 3. ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ë¬¸ì œ\n\n**ë¬¸ì œ**:\n\n- ëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ react-queryë¥¼ ì§ì ‘ importí•´ì•¼ í•¨\n- ëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ì¦ê°€\n- ëª¨ë“ˆ ë…ë¦½ì„± ì €í•˜\n\n**Before (ì§ì ‘ ë””íœë˜ì‹œ)**:\n\n```typescript\n// ëª¨ë“ˆ ì‚¬ìš©ì²˜\nimport { useQuery } from '@tanstack/react-query'\nimport { ProductList } from '@modules/product-list'\n\nfunction Page() {\n  const { data: products } = useQuery(['products'], fetchProducts)\n\n  return \u003cProductList products={products} /\u003e\n}\n```\n\n**ë¬¸ì œì **:\n\n- ì‚¬ìš©ì²˜ì—ì„œ react-queryë¥¼ ì•Œì•„ì•¼ í•¨\n- ëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ë†’ìŒ\n- ëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ë„ ìˆ˜ì • í•„ìš”\n\n---\n\n## âœ… í•´ê²° ë°©ë²•\n\n### 1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘\n\n**í•µì‹¬ ì•„ì´ë””ì–´**:\n\n- Provider levelì—ì„œ SSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸\n- ì‚¬ìš©ì²˜ì—ì„œëŠ” í™˜ê²½ì„ ì‹ ê²½ ì“°ì§€ ì•Šê³  `useQuery`ë§Œ ì‚¬ìš©\n\n**êµ¬í˜„**:\n\n```typescript\n// CorePackProvider.tsx\nimport {\n  QueryClient,\n  QueryClientProvider,\n  dehydrate,\n  Hydrate,\n} from '@tanstack/react-query'\n\nexport function CorePackProvider({\n  children,\n  dehydratedState,\n}: CorePackProviderProps) {\n  const [queryClient] = useState(\n    () =\u003e\n      new QueryClient({\n        defaultOptions: {\n          queries: {\n            staleTime: 60 * 1000, // 1ë¶„\n            cacheTime: 5 * 60 * 1000, // 5ë¶„\n          },\n        },\n      })\n  )\n\n  return (\n    \u003cQueryClientProvider client={queryClient}\u003e\n      \u003cHydrate state={dehydratedState}\u003e{children}\u003c/Hydrate\u003e\n    \u003c/QueryClientProvider\u003e\n  )\n}\n```\n\n**í˜ì´ì§€ ë ˆë²¨ì—ì„œ ì‚¬ìš©**:\n\n```typescript\n// pages/home.tsx\nexport async function getStaticProps() {\n  const queryClient = new QueryClient()\n\n  // SSRì—ì„œ ë°ì´í„° prefetch\n  await queryClient.prefetchQuery(['products'], fetchProducts)\n  await queryClient.prefetchQuery(['user'], fetchUser)\n\n  return {\n    props: {\n      dehydratedState: dehydrate(queryClient),\n    },\n  }\n}\n\nexport default function HomePage({ dehydratedState }) {\n  return (\n    \u003cCorePackProvider dehydratedState={dehydratedState}\u003e\n      \u003cHomePageContent /\u003e\n    \u003c/CorePackProvider\u003e\n  )\n}\n```\n\n**íš¨ê³¼**:\n\n- âœ… SSR ë°ì´í„°ê°€ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸ë¨\n- âœ… CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥\n- âœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”\n\n---\n\n### 2. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬ â†’ prefetch/useQueryì—ì„œ ì‚¬ìš©\n\n**í•µì‹¬ ì›ì¹™**: ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ prefetchì™€ useQueryì—ì„œ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•˜ë©´ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n**êµ¬ì¡°**:\n\n1. **ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬**: ì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ì–´ì„œ ì •ì˜\n2. **prefetch/useQueryì—ì„œ ì‚¬ìš©**: ì •ì˜í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì¬ì‚¬ìš©\n\n#### 1ë‹¨ê³„: ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬\n\n**ì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ê¸°** (`queries/products.ts`):\n\n```typescript\n// queries/products.ts\nimport { QueryOptions } from '@tanstack/react-query'\n\nexport const productsQuery = {\n  queryKey: ['products'] as const,\n  queryFn: fetchProducts,\n} satisfies QueryOptions\n\nexport const productDetailQuery = (id: number) =\u003e\n  ({\n    queryKey: ['products', 'detail', id] as const,\n    queryFn: () =\u003e fetchProductDetail(id),\n  } satisfies QueryOptions)\n\nexport const productsListQuery = (filters?: string) =\u003e\n  ({\n    queryKey: ['products', 'list', { filters }] as const,\n    queryFn: () =\u003e fetchProducts(filters),\n  } satisfies QueryOptions)\n```\n\n**íš¨ê³¼**:\n\n- âœ… prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€\n- âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜ ë³´ì¥\n- âœ… íƒ€ì… ì•ˆì „ì„± í™•ë³´\n- âœ… ì¿¼ë¦¬ ì •ì˜ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •\n\n#### 2ë‹¨ê³„: prefetchì™€ useQueryì—ì„œ ì‚¬ìš©\n\n**prefetch (SSRì—ì„œ ë°ì´í„° ì¤€ë¹„)**:\n\n```typescript\n// hooks/useProductsPrefetch.ts\nimport { QueryClient } from '@tanstack/react-query'\nimport {\n  productsQuery,\n  productDetailQuery,\n  productsListQuery,\n} from '../queries/products'\n\nexport async function prefetchProducts(\n  queryClient: QueryClient,\n  filters?: string\n) {\n  // prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©\n  return queryClient.prefetchQuery({\n    ...productsListQuery(filters),\n    staleTime: 60 * 1000,\n  })\n}\n\nexport async function prefetchProductDetail(\n  queryClient: QueryClient,\n  id: number\n) {\n  // prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©\n  return queryClient.prefetchQuery({\n    ...productDetailQuery(id),\n    staleTime: 60 * 1000,\n  })\n}\n```\n\n**useQuery (ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©)**:\n\n```typescript\n// hooks/useProductsQuery.ts\nimport { useQuery, UseQueryOptions } from '@tanstack/react-query'\nimport {\n  productsQuery,\n  productDetailQuery,\n  productsListQuery,\n} from '../queries/products'\n\nexport function useProductsQuery(\n  filters?: string,\n  options?: Omit\u003cUseQueryOptions, 'queryKey' | 'queryFn'\u003e\n) {\n  // useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!\n  return useQuery({\n    ...productsListQuery(filters),\n    staleTime: 60 * 1000,\n    ...options,\n  })\n}\n\nexport function useProductDetailQuery(\n  id: number,\n  options?: Omit\u003cUseQueryOptions, 'queryKey' | 'queryFn'\u003e\n) {\n  // useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!\n  return useQuery({\n    ...productDetailQuery(id),\n    staleTime: 60 * 1000,\n    ...options,\n  })\n}\n```\n\n**ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” hook**:\n\n```typescript\n// hooks/useProducts.ts\nimport { useProductsQuery, useProductDetailQuery } from './useProductsQuery'\n\nexport function useProducts(filters?: string) {\n  const { data, isLoading, error } = useProductsQuery(filters)\n\n  return {\n    products: data ?? [],\n    isLoading,\n    error,\n  }\n}\n\nexport function useProduct(id: number) {\n  const { data, isLoading, error } = useProductDetailQuery(id)\n\n  return {\n    product: data,\n    isLoading,\n    error,\n  }\n}\n```\n\n**ì‚¬ìš© ì˜ˆì‹œ**:\n\n```typescript\n// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©\nfunction ProductList({ filters }: { filters?: string }) {\n  const { products, isLoading } = useProducts(filters)\n\n  if (isLoading) return \u003cLoading /\u003e\n\n  return (\n    \u003cdiv\u003e\n      {products.map((product) =\u003e (\n        \u003cProductCard key={product.id} product={product} /\u003e\n      ))}\n    \u003c/div\u003e\n  )\n}\n\nfunction ProductDetail({ id }: { id: number }) {\n  const { product, isLoading } = useProduct(id)\n\n  if (isLoading) return \u003cLoading /\u003e\n  if (!product) return \u003cNotFound /\u003e\n\n  return \u003cProductDetailView product={product} /\u003e\n}\n```\n\n**íš¨ê³¼**:\n\n- âœ… props drilling ì œê±°\n- âœ… ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´\n- âœ… ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ëŠ” props ì „ë‹¬ ë¶ˆí•„ìš”\n- âœ… **prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€**\n- âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜í•˜ì—¬ ìºì‹œ íˆíŠ¸ ë³´ì¥\n\n---\n\n### 3. ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´\n\n**Before (ì‚¬ìš©ì²˜ì—ì„œ react-query ì§ì ‘ ì‚¬ìš©)**:\n\n```typescript\n// ì‚¬ìš©ì²˜\nimport { useQuery } from '@tanstack/react-query'\nimport { ProductList } from '@modules/product-list'\n\nfunction Page() {\n  const { data: products } = useQuery(['products'], fetchProducts)\n  return \u003cProductList products={products} /\u003e\n}\n```\n\n**After (ëª¨ë“ˆ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬)**:\n\n```typescript\n// ëª¨ë“ˆ ë‚´ë¶€ (ProductList/index.tsx)\nimport { useProducts } from './hooks/useProducts'\n\nexport function ProductList() {\n  const { products, isLoading } = useProducts()\n\n  if (isLoading) return \u003cLoading /\u003e\n\n  return (\n    \u003cdiv\u003e\n      {products.map((product) =\u003e (\n        \u003cProductCard key={product.id} product={product} /\u003e\n      ))}\n    \u003c/div\u003e\n  )\n}\n\n// ì‚¬ìš©ì²˜\nimport { ProductList } from '@modules/product-list'\n\nfunction Page() {\n  // react-queryë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ!\n  return \u003cProductList /\u003e\n}\n```\n\n**íš¨ê³¼**:\n\n- âœ… ì‚¬ìš©ì²˜ì—ì„œ react-query ë””íœë˜ì‹œ ì œê±°\n- âœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´\n- âœ… ëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ ìˆ˜ì • ë¶ˆí•„ìš”\n\n---\n\n### 4. SSR/CSR í†µí•© ì²˜ë¦¬\n\n**í†µí•©ëœ ë°ì´í„° í˜ì¹­ ë¡œì§**:\n\n```typescript\n// hooks/useProducts.ts\nimport { useProductsQuery } from './useProductsQuery'\n\nexport function useProducts(filters?: string) {\n  // SSRì—ì„œ prefetchëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©\n  // ì—†ìœ¼ë©´ CSRì—ì„œ fetch\n  // prefetchì™€ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥\n  const { data, isLoading, error } = useProductsQuery(filters)\n\n  return {\n    products: data ?? [],\n    isLoading,\n    error,\n  }\n}\n```\n\n**í˜ì´ì§€ ë ˆë²¨ì—ì„œ prefetch**:\n\n```typescript\n// pages/home.tsx\nimport { QueryClient } from '@tanstack/react-query'\nimport { dehydrate } from '@tanstack/react-query'\nimport { prefetchProducts } from '../hooks/useProductsPrefetch'\nimport { prefetchUserProfile } from '../hooks/useUserPrefetch'\n\nexport async function getStaticProps() {\n  const queryClient = new QueryClient()\n\n  // SSRì—ì„œ prefetch (ì¤‘ì•™ ê´€ë¦¬ëœ ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ì‚¬ìš©)\n  await prefetchProducts(queryClient)\n  await prefetchUserProfile(queryClient)\n\n  return {\n    props: {\n      dehydratedState: dehydrate(queryClient),\n    },\n    revalidate: 60, // ISR\n  }\n}\n```\n\n**íš¨ê³¼**:\n\n- âœ… SSRê³¼ CSRì—ì„œ ë™ì¼í•œ ì½”ë“œ ì‚¬ìš©\n- âœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”\n- âœ… ISRê³¼ë„ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©\n\n---\n\n## ğŸ—ï¸ ì•„í‚¤í…ì²˜\n\n### ë³€ê²½ ì „ êµ¬ì¡°\n\n```\nPage Component\n  â†“ (props drilling)\nLayout Component\n  â†“ (props drilling)\nMainContent Component\n  â†“ (props drilling)\nProductList Component (ì‹¤ì œ ì‚¬ìš©)\n```\n\n### ë³€ê²½ í›„ êµ¬ì¡°\n\n```\n1. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬\n   queries/products.ts\n   â””â”€ productsQuery (queryKey + queryFn ë¬¶ìŒ)\n\n2. prefetch/useQueryì—ì„œ ì‚¬ìš©\n   Page Component\n     â†“ (prefetch - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)\n   CorePackProvider (í•˜ì´ë“œë ˆì´íŠ¸)\n     â†“\n   ProductList Component\n     â†“ (useQuery - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)\n   React Query Cache (ìºì‹œ íˆíŠ¸ ë³´ì¥!)\n```\n\n---\n\n## ğŸ“ˆ ê°œì„  íš¨ê³¼\n\n| í•­ëª©                   | Before         | After       | ê°œì„                |\n| ---------------------- | -------------- | ----------- | ------------------ |\n| **Props ì „ë‹¬ ë ˆë²¨**    | 3-4ë‹¨ê³„        | 0ë‹¨ê³„       | **100% ì œê±°**      |\n| **ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •** | í•„ìš”           | ë¶ˆí•„ìš”      | **ìˆ˜ì • ë²”ìœ„ ê°ì†Œ** |\n| **ì½”ë“œ ê°€ë…ì„±**        | ë‚®ìŒ           | ë†’ìŒ        | **í–¥ìƒ**           |\n| **ëª¨ë“ˆ ë…ë¦½ì„±**        | ë‚®ìŒ           | ë†’ìŒ        | **í–¥ìƒ**           |\n| **í™˜ê²½ ì „í™˜**          | ì½”ë“œ ìˆ˜ì • í•„ìš” | ìˆ˜ì • ë¶ˆí•„ìš” | **ìœ ì—°ì„± í–¥ìƒ**    |\n\n---\n\n## ğŸ’¡ í•µì‹¬ êµí›ˆ\n\n### 1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ê°€ í•µì‹¬\n\nSSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸í•˜ë©´, CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì •ì„ ìµœì†Œí™”í•˜ëŠ” í•µì‹¬ì…ë‹ˆë‹¤.\n\n### 2. ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•´ì•¼ í•¨\n\n**í•µì‹¬**: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´(queryKey + queryFn)ë¥¼ ì‚¬ìš©í•´ì•¼ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n**ë¬¸ì œ ìƒí™©**:\n\n```typescript\n// âŒ ì˜ëª»ëœ ì˜ˆ: prefetchì™€ useQueryì—ì„œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì •ì˜\n// prefetchì—ì„œ\nawait queryClient.prefetchQuery({\n  queryKey: ['products'],\n  queryFn: fetchProducts,\n})\n\n// useQueryì—ì„œ (ì¿¼ë¦¬ í‚¤ë‚˜ í•¨ìˆ˜ê°€ ì¡°ê¸ˆì´ë¼ë„ ë‹¤ë¥´ë©´ ìºì‹œ ë¯¸ìŠ¤!)\nconst { data } = useQuery({\n  queryKey: ['products'], // ë™ì¼í•˜ì§€ë§Œ\n  queryFn: () =\u003e fetchProducts(), // í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ê°ì‹¸ë©´ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ì¸ì‹!\n})\n```\n\n**í•´ê²° ë°©ë²•**:\n\n```typescript\n// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ì¿¼ë¦¬ ê°ì²´ë¥¼ ë¬¶ì–´ì„œ ì¬ì‚¬ìš©\nconst productsQuery = {\n  queryKey: ['products'],\n  queryFn: fetchProducts,\n}\n\n// prefetchì—ì„œ\nawait queryClient.prefetchQuery(productsQuery)\n\n// useQueryì—ì„œ (ë™ì¼í•œ ê°ì²´ ì‚¬ìš©)\nconst { data } = useQuery(productsQuery)\n```\n\nì´ë ‡ê²Œ í•˜ë©´ prefetchì—ì„œ ì¤€ë¹„í•œ ë°ì´í„°ë¥¼ useQueryì—ì„œ ì •í™•íˆ ì°¾ì„ ìˆ˜ ìˆì–´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë©ë‹ˆë‹¤.\n\n### 3. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ë¥¼ ë¨¼ì € ê´€ë¦¬í•˜ê³  prefetch/useQueryì—ì„œ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ê°€ íš¨ê³¼ì \n\nì¿¼ë¦¬ í‚¤ì™€ queryFnì„ ë¨¼ì € ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ê³ , prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ ì¼ê´€ì„±ì´ ë³´ì¥ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ê° ë ˆì´ì–´ì˜ ì±…ì„ì´ ëª…í™•í•´ì§€ê³  ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.\n\n### 4. ëª¨ë“ˆ ë…ë¦½ì„±ì„ ìœ„í•´ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬\n\nëª¨ë“ˆì´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë‚´ë¶€ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ í•˜ë©´, ì‚¬ìš©ì²˜ì˜ ë””íœë˜ì‹œë¥¼ ì œê±°í•  ìˆ˜ ìˆê³  ëª¨ë“ˆ ë…ë¦½ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.\n\n### 5. íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•´ì•¼ í•¨\n\nReact Queryì˜ íƒ€ì…ì„ í™œìš©í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. `useQuery`ì˜ ì œë„¤ë¦­ íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ê³ , ì¿¼ë¦¬ í‚¤ë¥¼ `as const`ë¡œ ì •ì˜í•˜ë©´ íƒ€ì… ì²´í¬ê°€ ê°•í™”ë©ë‹ˆë‹¤.\n\n### 6. ìºì‹± ì „ëµì„ ì‹ ì¤‘í•˜ê²Œ ì„¤ê³„í•´ì•¼ í•¨\n\n`staleTime`, `cacheTime` ë“±ì„ ì ì ˆíˆ ì„¤ì •í•˜ì—¬ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ë°©ì§€í•˜ê³ , ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œì¼œì•¼ í•©ë‹ˆë‹¤. prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë˜ì–´ SSR ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\n## ğŸ¯ ê²°ë¡ \n\nReact Query ë ˆì´ì–´ êµ¬ì¶•ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ì„±ê³¼ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤:\n\n1. âœ… **Props Drilling ì™„ì „ ì œê±°**: ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´\n2. âœ… **ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€**: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥\n3. âœ… **SSR/CSR í™˜ê²½ í†µí•©**: ë™ì¼í•œ ì½”ë“œë¡œ ë‘ í™˜ê²½ ëª¨ë‘ ì§€ì›\n4. âœ… **ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´**: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°\n5. âœ… **ì½”ë“œ ê°€ë…ì„± í–¥ìƒ**: ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ì˜ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì œê±°\n6. âœ… **ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ**: í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”, ì¿¼ë¦¬ ê°ì²´ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •\n\nì´ë²ˆ ì‘ì—…ì„ í†µí•´ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œì˜ ìƒíƒœ ê´€ë¦¬ì™€ ë°ì´í„° í˜ì¹­ ì•„í‚¤í…ì²˜ ì„¤ê³„ ê²½í—˜ì„ ìŒ“ì•˜ê³ , React Queryì˜ prefetch, í•˜ì´ë“œë ˆì´íŠ¸, ìºì‹± ì „ëµ, ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ ë“±ì„ ì‹¤ë¬´ì— ì ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\n\n---\n\n## ğŸ“š ì°¸ê³  ìë£Œ\n\n- [TanStack Query Documentation](https://tanstack.com/query/latest)\n- [Next.js Data Fetching](https://nextjs.org/docs/app/building-your-application/data-fetching)\n- [React Query SSR Guide](https://tanstack.com/query/latest/docs/react/guides/ssr)\n"])</script><script>self.__next_f.push([1,"f:T1243d,"])</script><script>self.__next_f.push([1,"\u003cblockquote\u003e\n\u003cp\u003eNext.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"-í”„ë¡œì íŠ¸-ê°œìš”\"\u003eğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#-í”„ë¡œì íŠ¸-ê°œìš”\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"ë°°ê²½\"\u003eë°°ê²½\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#ë°°ê²½\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eí”„ë ˆì„ì›Œí¬\u003c/strong\u003e: Next.js 14, React 18\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eëª©í‘œ\u003c/strong\u003e: props drilling ì œê±° ë° SSR/CSR í™˜ê²½ í†µí•© ì²˜ë¦¬\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eì„±ê³¼\u003c/strong\u003e: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°, ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"í•µì‹¬-ì„±ê³¼\"\u003eí•µì‹¬ ì„±ê³¼\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#í•µì‹¬-ì„±ê³¼\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eâœ… Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘\u003c/li\u003e\n\u003cli\u003eâœ… prefetch/query/useQueryë¥¼ ì´ìš©í•œ props drilling ì œê±°\u003c/li\u003e\n\u003cli\u003eâœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ì—¬ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€\u003c/li\u003e\n\u003cli\u003eâœ… ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°\u003c/li\u003e\n\u003cli\u003eâœ… SSRì— ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ ì—°í•˜ê²Œ ëŒ€ì‘\u003c/li\u003e\n\u003cli\u003eâœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ë¬¸ì œ-ìƒí™©\"\u003eğŸ”´ ë¬¸ì œ ìƒí™©\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#-ë¬¸ì œ-ìƒí™©\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"1-props-drilling-ë¬¸ì œ\"\u003e1. Props Drilling ë¬¸ì œ\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#1-props-drilling-ë¬¸ì œ\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eë¬¸ì œ\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eë°ì´í„°ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ì„ ê±°ì³ ì „ë‹¬í•´ì•¼ í•¨\u003c/li\u003e\n\u003cli\u003eì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ propsë¥¼ ë°›ì•„ì•¼ í•¨\u003c/li\u003e\n\u003cli\u003eì½”ë“œ ê°€ë…ì„± ì €í•˜ ë° ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eBOLD_PAREN_PLACEHOLDER_0\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eHomePage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e initialData \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eLayout\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eHeader userData\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003einitialData\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003euser\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eMainContent\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        products\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003einitialData\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eproducts\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        userData\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003einitialData\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003euser\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eFooter \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eLayout\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eMainContent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e products\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e userData \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eProductList products\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproducts\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e userData\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003euserData\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eRecommendationSection userData\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003euserData\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ediv\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// ì‹¤ì œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eProductList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e products\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e userData \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// userDataë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ propsë¡œ ë°›ì•„ì•¼ í•¨\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token comment\"\u003e/* productsë§Œ ì‚¬ìš© */\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ediv\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eë¬¸ì œì \u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode class=\"inline-code\"\u003euserData\u003c/code\u003eë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ë„ propsë¡œ ë°›ì•„ì•¼ í•¨\u003c/li\u003e\n\u003cli\u003eì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì—­í• ë§Œ í•¨\u003c/li\u003e\n\u003cli\u003eíƒ€ì… ì •ì˜ê°€ ë³µì¡í•´ì§\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"2-ssrcsr-í™˜ê²½-ë¶„ë¦¬-ë¬¸ì œ\"\u003e2. SSR/CSR í™˜ê²½ ë¶„ë¦¬ ë¬¸ì œ\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#2-ssrcsr-í™˜ê²½-ë¶„ë¦¬-ë¬¸ì œ\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eë¬¸ì œ\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSSR í™˜ê²½ì—ì„œëŠ” \u003ccode class=\"inline-code\"\u003egetStaticProps\u003c/code\u003eì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨\u003c/li\u003e\n\u003cli\u003eCSR í™˜ê²½ì—ì„œëŠ” \u003ccode class=\"inline-code\"\u003euseQuery\u003c/code\u003eë¥¼ ì‚¬ìš©í•´ì•¼ í•¨\u003c/li\u003e\n\u003cli\u003eê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eBOLD_PAREN_PLACEHOLDER_1\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// SSR í™˜ê²½\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetStaticProps\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e products \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003efetchProducts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e user \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003efetchUser\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    props\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      initialData\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e products\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e user \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// CSR í™˜ê²½\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eComponent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e data\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e products \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e fetchProducts\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e data\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e user \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'user'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e fetchUser\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// ê°™ì€ ë¡œì§ì„ ë‘ ë²ˆ ì‘ì„±í•´ì•¼ í•¨\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eë¬¸ì œì \u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬\u003c/li\u003e\n\u003cli\u003eì½”ë“œ ì¤‘ë³µ ë°œìƒ\u003c/li\u003e\n\u003cli\u003eí™˜ê²½ ì „í™˜ ì‹œ ìˆ˜ì • ë²”ìœ„ í¼\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"3-ì‚¬ìš©ì²˜-react-query-ë””íœë˜ì‹œ-ë¬¸ì œ\"\u003e3. ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ë¬¸ì œ\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#3-ì‚¬ìš©ì²˜-react-query-ë””íœë˜ì‹œ-ë¬¸ì œ\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eë¬¸ì œ\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ react-queryë¥¼ ì§ì ‘ importí•´ì•¼ í•¨\u003c/li\u003e\n\u003cli\u003eëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ì¦ê°€\u003c/li\u003e\n\u003cli\u003eëª¨ë“ˆ ë…ë¦½ì„± ì €í•˜\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eBOLD_PAREN_PLACEHOLDER_2\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// ëª¨ë“ˆ ì‚¬ìš©ì²˜\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useQuery \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@tanstack/react-query'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ProductList \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@modules/product-list'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003ePage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e data\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e products \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e fetchProducts\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eProductList products\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproducts\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eë¬¸ì œì \u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eì‚¬ìš©ì²˜ì—ì„œ react-queryë¥¼ ì•Œì•„ì•¼ í•¨\u003c/li\u003e\n\u003cli\u003eëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ë†’ìŒ\u003c/li\u003e\n\u003cli\u003eëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ë„ ìˆ˜ì • í•„ìš”\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-í•´ê²°-ë°©ë²•\"\u003eâœ… í•´ê²° ë°©ë²•\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#-í•´ê²°-ë°©ë²•\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸-ëŒ€ì‘\"\u003e1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸-ëŒ€ì‘\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eí•µì‹¬ ì•„ì´ë””ì–´\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eProvider levelì—ì„œ SSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸\u003c/li\u003e\n\u003cli\u003eì‚¬ìš©ì²˜ì—ì„œëŠ” í™˜ê²½ì„ ì‹ ê²½ ì“°ì§€ ì•Šê³  \u003ccode class=\"inline-code\"\u003euseQuery\u003c/code\u003eë§Œ ì‚¬ìš©\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eêµ¬í˜„\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// CorePackProvider.tsx\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  QueryClient\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  QueryClientProvider\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  dehydrate\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  Hydrate\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@tanstack/react-query'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eCorePackProvider\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  children\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  dehydratedState\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e CorePackProviderProps\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003equeryClient\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eQueryClient\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        defaultOptions\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e          queries\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            staleTime\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e60\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 1ë¶„\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            cacheTime\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e60\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 5ë¶„\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e          \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eQueryClientProvider client\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003equeryClient\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eHydrate state\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003edehydratedState\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003echildren\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eHydrate\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eQueryClientProvider\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eí˜ì´ì§€ ë ˆë²¨ì—ì„œ ì‚¬ìš©\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// pages/home.tsx\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetStaticProps\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e queryClient \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eQueryClient\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// SSRì—ì„œ ë°ì´í„° prefetch\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e queryClient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eprefetchQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e fetchProducts\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e queryClient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eprefetchQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'user'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e fetchUser\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    props\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      dehydratedState\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003edehydrate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003equeryClient\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eHomePage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e dehydratedState \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eCorePackProvider dehydratedState\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003edehydratedState\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eHomePageContent \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eCorePackProvider\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eíš¨ê³¼\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eâœ… SSR ë°ì´í„°ê°€ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸ë¨\u003c/li\u003e\n\u003cli\u003eâœ… CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥\u003c/li\u003e\n\u003cli\u003eâœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"2-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬--prefetchusequeryì—ì„œ-ì‚¬ìš©\"\u003e2. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬ â†’ prefetch/useQueryì—ì„œ ì‚¬ìš©\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#2-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬--prefetchusequeryì—ì„œ-ì‚¬ìš©\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eí•µì‹¬ ì›ì¹™\u003c/strong\u003e: ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ prefetchì™€ useQueryì—ì„œ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•˜ë©´ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eêµ¬ì¡°\u003c/strong\u003e:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬\u003c/strong\u003e: ì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ì–´ì„œ ì •ì˜\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eprefetch/useQueryì—ì„œ ì‚¬ìš©\u003c/strong\u003e: ì •ì˜í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì¬ì‚¬ìš©\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"1ë‹¨ê³„-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬\"\u003e1ë‹¨ê³„: ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#1ë‹¨ê³„-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ê¸°\u003c/strong\u003e (\u003ccode class=\"inline-code\"\u003equeries/products.ts\u003c/code\u003e):\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// queries/products.ts\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e QueryOptions \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@tanstack/react-query'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e productsQuery \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  queryKey\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  queryFn\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e fetchProducts\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e satisfies QueryOptions\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003eproductDetailQuery\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eid\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    queryKey\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'detail'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e id\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token function-variable function\"\u003equeryFn\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003efetchProductDetail\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e satisfies QueryOptions\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003eproductsListQuery\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilters\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    queryKey\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'list'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e filters \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token function-variable function\"\u003equeryFn\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003efetchProducts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilters\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e satisfies QueryOptions\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eíš¨ê³¼\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eâœ… prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€\u003c/li\u003e\n\u003cli\u003eâœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜ ë³´ì¥\u003c/li\u003e\n\u003cli\u003eâœ… íƒ€ì… ì•ˆì „ì„± í™•ë³´\u003c/li\u003e\n\u003cli\u003eâœ… ì¿¼ë¦¬ ì •ì˜ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"2ë‹¨ê³„-prefetchì™€-usequeryì—ì„œ-ì‚¬ìš©\"\u003e2ë‹¨ê³„: prefetchì™€ useQueryì—ì„œ ì‚¬ìš©\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#2ë‹¨ê³„-prefetchì™€-usequeryì—ì„œ-ì‚¬ìš©\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eBOLD_PAREN_PLACEHOLDER_3\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// hooks/useProductsPrefetch.ts\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e QueryClient \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@tanstack/react-query'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  productsQuery\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  productDetailQuery\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  productsListQuery\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../queries/products'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eprefetchProducts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  queryClient\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e QueryClient\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  filters\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e queryClient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eprefetchQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token function\"\u003eproductsListQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilters\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    staleTime\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e60\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eprefetchProductDetail\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  queryClient\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e QueryClient\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  id\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e queryClient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eprefetchQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token function\"\u003eproductDetailQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    staleTime\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e60\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eBOLD_PAREN_PLACEHOLDER_4\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// hooks/useProductsQuery.ts\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useQuery\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e UseQueryOptions \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@tanstack/react-query'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  productsQuery\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  productDetailQuery\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  productsListQuery\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../queries/products'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProductsQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  filters\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  options\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Omit\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eUseQueryOptions\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'queryKey'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token string\"\u003e'queryFn'\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token function\"\u003euseQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token function\"\u003eproductsListQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilters\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    staleTime\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e60\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e...\u003c/span\u003eoptions\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProductDetailQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  id\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  options\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Omit\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eUseQueryOptions\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'queryKey'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token string\"\u003e'queryFn'\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token function\"\u003euseQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token function\"\u003eproductDetailQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    staleTime\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e60\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e...\u003c/span\u003eoptions\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” hook\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// hooks/useProducts.ts\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useProductsQuery\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e useProductDetailQuery \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./useProductsQuery'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProducts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilters\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e data\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e isLoading\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e error \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProductsQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilters\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    products\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e data \u003cspan class=\"token operator\"\u003e??\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    isLoading\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    error\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProduct\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eid\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e data\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e isLoading\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e error \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProductDetailQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    product\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e data\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    isLoading\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    error\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eì‚¬ìš© ì˜ˆì‹œ\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eProductList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e filters \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e filters\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e products\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e isLoading \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProducts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilters\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eisLoading\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eLoading \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproducts\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eproduct\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eProductCard key\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproduct\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e product\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproduct\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ediv\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eProductDetail\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e id \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e id\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e product\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e isLoading \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProduct\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eisLoading\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eLoading \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003eproduct\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eNotFound \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eProductDetailView product\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproduct\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eíš¨ê³¼\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eâœ… props drilling ì œê±°\u003c/li\u003e\n\u003cli\u003eâœ… ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´\u003c/li\u003e\n\u003cli\u003eâœ… ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ëŠ” props ì „ë‹¬ ë¶ˆí•„ìš”\u003c/li\u003e\n\u003cli\u003eâœ… \u003cstrong\u003eprefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eâœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜í•˜ì—¬ ìºì‹œ íˆíŠ¸ ë³´ì¥\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"3-ëª¨ë“ˆ-ë…ë¦½ì„±-í™•ë³´\"\u003e3. ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#3-ëª¨ë“ˆ-ë…ë¦½ì„±-í™•ë³´\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eBOLD_PAREN_PLACEHOLDER_5\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// ì‚¬ìš©ì²˜\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useQuery \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@tanstack/react-query'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ProductList \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@modules/product-list'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003ePage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e data\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e products \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e fetchProducts\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eProductList products\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproducts\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eBOLD_PAREN_PLACEHOLDER_6\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// ëª¨ë“ˆ ë‚´ë¶€ (ProductList/index.tsx)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useProducts \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./hooks/useProducts'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eProductList\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e products\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e isLoading \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProducts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eisLoading\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eLoading \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproducts\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eproduct\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eProductCard key\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproduct\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e product\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eproduct\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003ediv\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// ì‚¬ìš©ì²˜\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ProductList \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@modules/product-list'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003ePage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// react-queryë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ!\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eProductList \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eíš¨ê³¼\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eâœ… ì‚¬ìš©ì²˜ì—ì„œ react-query ë””íœë˜ì‹œ ì œê±°\u003c/li\u003e\n\u003cli\u003eâœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´\u003c/li\u003e\n\u003cli\u003eâœ… ëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ ìˆ˜ì • ë¶ˆí•„ìš”\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"4-ssrcsr-í†µí•©-ì²˜ë¦¬\"\u003e4. SSR/CSR í†µí•© ì²˜ë¦¬\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#4-ssrcsr-í†µí•©-ì²˜ë¦¬\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eí†µí•©ëœ ë°ì´í„° í˜ì¹­ ë¡œì§\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// hooks/useProducts.ts\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useProductsQuery \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./useProductsQuery'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProducts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilters\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// SSRì—ì„œ prefetchëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// ì—†ìœ¼ë©´ CSRì—ì„œ fetch\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// prefetchì™€ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e data\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e isLoading\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e error \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseProductsQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efilters\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    products\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e data \u003cspan class=\"token operator\"\u003e??\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    isLoading\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    error\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eí˜ì´ì§€ ë ˆë²¨ì—ì„œ prefetch\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// pages/home.tsx\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e QueryClient \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@tanstack/react-query'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e dehydrate \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@tanstack/react-query'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e prefetchProducts \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../hooks/useProductsPrefetch'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e prefetchUserProfile \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../hooks/useUserPrefetch'\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetStaticProps\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e queryClient \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eQueryClient\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token comment\"\u003e// SSRì—ì„œ prefetch (ì¤‘ì•™ ê´€ë¦¬ëœ ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ì‚¬ìš©)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003eprefetchProducts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003equeryClient\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003eprefetchUserProfile\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003equeryClient\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    props\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e      dehydratedState\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003edehydrate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003equeryClient\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    revalidate\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e60\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// ISR\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eíš¨ê³¼\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eâœ… SSRê³¼ CSRì—ì„œ ë™ì¼í•œ ì½”ë“œ ì‚¬ìš©\u003c/li\u003e\n\u003cli\u003eâœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”\u003c/li\u003e\n\u003cli\u003eâœ… ISRê³¼ë„ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"ï¸-ì•„í‚¤í…ì²˜\"\u003eğŸ—ï¸ ì•„í‚¤í…ì²˜\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#ï¸-ì•„í‚¤í…ì²˜\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"ë³€ê²½-ì „-êµ¬ì¡°\"\u003eë³€ê²½ ì „ êµ¬ì¡°\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#ë³€ê²½-ì „-êµ¬ì¡°\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003ePage Component\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  â†“ (props drilling)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eLayout Component\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  â†“ (props drilling)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eMainContent Component\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  â†“ (props drilling)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eProductList Component (ì‹¤ì œ ì‚¬ìš©)\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"ë³€ê²½-í›„-êµ¬ì¡°\"\u003eë³€ê²½ í›„ êµ¬ì¡°\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#ë³€ê²½-í›„-êµ¬ì¡°\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e1. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   queries/products.ts\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   â””â”€ productsQuery (queryKey + queryFn ë¬¶ìŒ)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e2. prefetch/useQueryì—ì„œ ì‚¬ìš©\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   Page Component\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     â†“ (prefetch - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   CorePackProvider (í•˜ì´ë“œë ˆì´íŠ¸)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     â†“\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   ProductList Component\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e     â†“ (useQuery - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e   React Query Cache (ìºì‹œ íˆíŠ¸ ë³´ì¥!)\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ê°œì„ -íš¨ê³¼\"\u003eğŸ“ˆ ê°œì„  íš¨ê³¼\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#-ê°œì„ -íš¨ê³¼\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eí•­ëª©\u003c/th\u003e\n\u003cth\u003eBefore\u003c/th\u003e\n\u003cth\u003eAfter\u003c/th\u003e\n\u003cth\u003eê°œì„ \u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eProps ì „ë‹¬ ë ˆë²¨\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003e3-4ë‹¨ê³„\u003c/td\u003e\n\u003ctd\u003e0ë‹¨ê³„\u003c/td\u003e\n\u003ctd\u003e\u003cstrong\u003e100% ì œê±°\u003c/strong\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eí•„ìš”\u003c/td\u003e\n\u003ctd\u003eë¶ˆí•„ìš”\u003c/td\u003e\n\u003ctd\u003e\u003cstrong\u003eìˆ˜ì • ë²”ìœ„ ê°ì†Œ\u003c/strong\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eì½”ë“œ ê°€ë…ì„±\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eë‚®ìŒ\u003c/td\u003e\n\u003ctd\u003eë†’ìŒ\u003c/td\u003e\n\u003ctd\u003e\u003cstrong\u003eí–¥ìƒ\u003c/strong\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eëª¨ë“ˆ ë…ë¦½ì„±\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eë‚®ìŒ\u003c/td\u003e\n\u003ctd\u003eë†’ìŒ\u003c/td\u003e\n\u003ctd\u003e\u003cstrong\u003eí–¥ìƒ\u003c/strong\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eí™˜ê²½ ì „í™˜\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eì½”ë“œ ìˆ˜ì • í•„ìš”\u003c/td\u003e\n\u003ctd\u003eìˆ˜ì • ë¶ˆí•„ìš”\u003c/td\u003e\n\u003ctd\u003e\u003cstrong\u003eìœ ì—°ì„± í–¥ìƒ\u003c/strong\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-í•µì‹¬-êµí›ˆ\"\u003eğŸ’¡ í•µì‹¬ êµí›ˆ\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#-í•µì‹¬-êµí›ˆ\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸ê°€-í•µì‹¬\"\u003e1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ê°€ í•µì‹¬\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸ê°€-í•µì‹¬\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eSSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸í•˜ë©´, CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì •ì„ ìµœì†Œí™”í•˜ëŠ” í•µì‹¬ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch3 id=\"2-ì¿¼ë¦¬-í‚¤ì™€-queryfnì„-í•¨ê»˜-ë¬¶ì–´ì„œ-ì‚¬ìš©í•´ì•¼-í•¨\"\u003e2. ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•´ì•¼ í•¨\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#2-ì¿¼ë¦¬-í‚¤ì™€-queryfnì„-í•¨ê»˜-ë¬¶ì–´ì„œ-ì‚¬ìš©í•´ì•¼-í•¨\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eí•µì‹¬\u003c/strong\u003e: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´(queryKey + queryFn)ë¥¼ ì‚¬ìš©í•´ì•¼ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eë¬¸ì œ ìƒí™©\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// âŒ ì˜ëª»ëœ ì˜ˆ: prefetchì™€ useQueryì—ì„œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì •ì˜\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// prefetchì—ì„œ\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e queryClient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eprefetchQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  queryKey\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  queryFn\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e fetchProducts\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// useQueryì—ì„œ (ì¿¼ë¦¬ í‚¤ë‚˜ í•¨ìˆ˜ê°€ ì¡°ê¸ˆì´ë¼ë„ ë‹¤ë¥´ë©´ ìºì‹œ ë¯¸ìŠ¤!)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e data \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  queryKey\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// ë™ì¼í•˜ì§€ë§Œ\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  \u003cspan class=\"token function-variable function\"\u003equeryFn\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003efetchProducts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ê°ì‹¸ë©´ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ì¸ì‹!\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eí•´ê²° ë°©ë²•\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre class=\"language-typescript optimized-code-block\" style=\"max-height: 600px; overflow-y: auto;\"\u003e\u003ccode class=\"language-typescript code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ì¿¼ë¦¬ ê°ì²´ë¥¼ ë¬¶ì–´ì„œ ì¬ì‚¬ìš©\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e productsQuery \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  queryKey\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'products'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e  queryFn\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e fetchProducts\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// prefetchì—ì„œ\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e queryClient\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eprefetchQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eproductsQuery\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// useQueryì—ì„œ (ë™ì¼í•œ ê°ì²´ ì‚¬ìš©)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e data \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseQuery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eproductsQuery\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ë ‡ê²Œ í•˜ë©´ prefetchì—ì„œ ì¤€ë¹„í•œ ë°ì´í„°ë¥¼ useQueryì—ì„œ ì •í™•íˆ ì°¾ì„ ìˆ˜ ìˆì–´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch3 id=\"3-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜ë¥¼-ë¨¼ì €-ê´€ë¦¬í•˜ê³ -prefetchusequeryì—ì„œ-ì‚¬ìš©í•˜ëŠ”-êµ¬ì¡°ê°€-íš¨ê³¼ì \"\u003e3. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ë¥¼ ë¨¼ì € ê´€ë¦¬í•˜ê³  prefetch/useQueryì—ì„œ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ê°€ íš¨ê³¼ì \u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#3-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜ë¥¼-ë¨¼ì €-ê´€ë¦¬í•˜ê³ -prefetchusequeryì—ì„œ-ì‚¬ìš©í•˜ëŠ”-êµ¬ì¡°ê°€-íš¨ê³¼ì \"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eì¿¼ë¦¬ í‚¤ì™€ queryFnì„ ë¨¼ì € ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ê³ , prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ ì¼ê´€ì„±ì´ ë³´ì¥ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ê° ë ˆì´ì–´ì˜ ì±…ì„ì´ ëª…í™•í•´ì§€ê³  ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch3 id=\"4-ëª¨ë“ˆ-ë…ë¦½ì„±ì„-ìœ„í•´-ë‚´ë¶€ì—ì„œ-ì²˜ë¦¬\"\u003e4. ëª¨ë“ˆ ë…ë¦½ì„±ì„ ìœ„í•´ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#4-ëª¨ë“ˆ-ë…ë¦½ì„±ì„-ìœ„í•´-ë‚´ë¶€ì—ì„œ-ì²˜ë¦¬\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eëª¨ë“ˆì´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë‚´ë¶€ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ í•˜ë©´, ì‚¬ìš©ì²˜ì˜ ë””íœë˜ì‹œë¥¼ ì œê±°í•  ìˆ˜ ìˆê³  ëª¨ë“ˆ ë…ë¦½ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch3 id=\"5-íƒ€ì…-ì•ˆì „ì„±ì„-ìœ ì§€í•´ì•¼-í•¨\"\u003e5. íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•´ì•¼ í•¨\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#5-íƒ€ì…-ì•ˆì „ì„±ì„-ìœ ì§€í•´ì•¼-í•¨\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eReact Queryì˜ íƒ€ì…ì„ í™œìš©í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. \u003ccode class=\"inline-code\"\u003euseQuery\u003c/code\u003eì˜ ì œë„¤ë¦­ íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ê³ , ì¿¼ë¦¬ í‚¤ë¥¼ \u003ccode class=\"inline-code\"\u003eas const\u003c/code\u003eë¡œ ì •ì˜í•˜ë©´ íƒ€ì… ì²´í¬ê°€ ê°•í™”ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch3 id=\"6-ìºì‹±-ì „ëµì„-ì‹ ì¤‘í•˜ê²Œ-ì„¤ê³„í•´ì•¼-í•¨\"\u003e6. ìºì‹± ì „ëµì„ ì‹ ì¤‘í•˜ê²Œ ì„¤ê³„í•´ì•¼ í•¨\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#6-ìºì‹±-ì „ëµì„-ì‹ ì¤‘í•˜ê²Œ-ì„¤ê³„í•´ì•¼-í•¨\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"inline-code\"\u003estaleTime\u003c/code\u003e, \u003ccode class=\"inline-code\"\u003ecacheTime\u003c/code\u003e ë“±ì„ ì ì ˆíˆ ì„¤ì •í•˜ì—¬ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ë°©ì§€í•˜ê³ , ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œì¼œì•¼ í•©ë‹ˆë‹¤. prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë˜ì–´ SSR ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ê²°ë¡ \"\u003eğŸ¯ ê²°ë¡ \u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#-ê²°ë¡ \"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eReact Query ë ˆì´ì–´ êµ¬ì¶•ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ì„±ê³¼ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eâœ… \u003cstrong\u003eProps Drilling ì™„ì „ ì œê±°\u003c/strong\u003e: ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´\u003c/li\u003e\n\u003cli\u003eâœ… \u003cstrong\u003eìºì‹œ ë¯¸ìŠ¤ ë°©ì§€\u003c/strong\u003e: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥\u003c/li\u003e\n\u003cli\u003eâœ… \u003cstrong\u003eSSR/CSR í™˜ê²½ í†µí•©\u003c/strong\u003e: ë™ì¼í•œ ì½”ë“œë¡œ ë‘ í™˜ê²½ ëª¨ë‘ ì§€ì›\u003c/li\u003e\n\u003cli\u003eâœ… \u003cstrong\u003eëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´\u003c/strong\u003e: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°\u003c/li\u003e\n\u003cli\u003eâœ… \u003cstrong\u003eì½”ë“œ ê°€ë…ì„± í–¥ìƒ\u003c/strong\u003e: ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ì˜ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì œê±°\u003c/li\u003e\n\u003cli\u003eâœ… \u003cstrong\u003eìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ\u003c/strong\u003e: í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”, ì¿¼ë¦¬ ê°ì²´ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eì´ë²ˆ ì‘ì—…ì„ í†µí•´ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œì˜ ìƒíƒœ ê´€ë¦¬ì™€ ë°ì´í„° í˜ì¹­ ì•„í‚¤í…ì²˜ ì„¤ê³„ ê²½í—˜ì„ ìŒ“ì•˜ê³ , React Queryì˜ prefetch, í•˜ì´ë“œë ˆì´íŠ¸, ìºì‹± ì „ëµ, ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ ë“±ì„ ì‹¤ë¬´ì— ì ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ì°¸ê³ -ìë£Œ\"\u003eğŸ“š ì°¸ê³  ìë£Œ\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#-ì°¸ê³ -ìë£Œ\"\u003e\u003cspan class=\"anchor\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tanstack.com/query/latest\"\u003eTanStack Query Documentation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://nextjs.org/docs/app/building-your-application/data-fetching\"\u003eNext.js Data Fetching\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tanstack.com/query/latest/docs/react/guides/ssr\"\u003eReact Query SSR Guide\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e"])</script><script>self.__next_f.push([1,"4:[\"$\",\"$Ld\",null,{\"post\":{\"slug\":\"/develop/React Query ê°œì„ \",\"frontmatter\":{\"title\":\"React Query ê°œì„ \",\"date\":\"2025-12-28T00:00:00.000Z\",\"category\":\"develop\",\"tags\":[\"React-Query\",\"Next.js\",\"SSR\",\"Props-Drilling\",\"ì•„í‚¤í…ì²˜\",\"ëª¨ë…¸ë ˆí¬\"],\"draft\":false},\"content\":\"$e\",\"html\":\"$f\",\"excerpt\":\"\u003e Next.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.  ## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”  ### ë°°ê²½  - **í”„ë ˆì„ì›Œí¬**: Next\"},\"previousPost\":{\"slug\":\"/develop/ê°œë°œ í”„ë¡œì„¸ìŠ¤ ìë™í™” êµ¬ì¶•\",\"frontmatter\":{\"title\":\"ê°œë°œ í”„ë¡œì„¸ìŠ¤ ìë™í™” êµ¬ì¶•\",\"date\":\"2025-12-28T00:00:00.000Z\",\"category\":\"develop\",\"tags\":[\"ìë™í™”\",\"GitHub-Actions\",\"JIRA\",\"CI/CD\",\"ê°œë°œí”„ë¡œì„¸ìŠ¤\",\"ëŒ€ì‹œë³´ë“œ\",\"DevOps\"],\"draft\":false}},\"nextPost\":{\"slug\":\"/develop/Next.js ë¹Œë“œ ìµœì í™”\",\"frontmatter\":{\"title\":\"Next.js ë¹Œë“œ ìµœì í™”\",\"date\":\"2025-12-28T00:00:00.000Z\",\"category\":\"develop\",\"tags\":[\"Next.js\",\"ë¹Œë“œìµœì í™”\",\"Webpack\",\"CI/CD\",\"ì„±ëŠ¥ìµœì í™”\"],\"draft\":false}}}]\na:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"React Query ê°œì„ \"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"\u003e Next.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.  ## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”  ### ë°°ê²½  - **í”„ë ˆì„ì›Œí¬**: Next\"}]]\n3:null\n"])</script></body></html>