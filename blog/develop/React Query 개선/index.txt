3:I[808,[],""]
5:I[6217,[],""]
6:I[5217,["3185","static/chunks/app/layout-3ad8bb7cb2292578.js"],"ServiceWorkerCleanup"]
7:I[6484,["3185","static/chunks/app/layout-3ad8bb7cb2292578.js"],"ThemeProvider"]
4:["slug","develop/React%20Query%20%EA%B0%9C%EC%84%A0","c"]
0:["static-build-id",[[["",{"children":["blog",{"children":[["slug","develop/React%20Query%20%EA%B0%9C%EC%84%A0","c"],{"children":["__PAGE__?{\"slug\":[\"develop\",\"React Query ê°œì„ \"]}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","develop/React%20Query%20%EA%B0%9C%EC%84%A0","c"],{"children":["__PAGE__",{},[["$L1","$L2",null],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/bc8bb31cb71603b2.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"ko","children":[["$","head",null,{"children":[["$","link",null,{"rel":"preconnect","href":"https://fonts.googleapis.com"}],["$","link",null,{"rel":"preconnect","href":"https://fonts.gstatic.com","crossOrigin":"anonymous"}],["$","link",null,{"href":"https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap","rel":"stylesheet"}],["$","link",null,{"href":"https://fonts.googleapis.com/css2?family=Catamaran:wght@800&display=swap","rel":"stylesheet"}],["$","link",null,{"rel":"icon","type":"image/png","href":"/favicon2.png"}],["$","link",null,{"rel":"shortcut icon","href":"/favicon2.png"}],["$","link",null,{"rel":"apple-touch-icon","href":"/favicon2.png"}],["$","script",null,{"id":"ads","async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"(adsbygoogle=window.adsbygoogle||[]).requestNonPersonalizedAds=1;"}}]]}],["$","body",null,{"children":[["$","noscript",null,{"children":"You need to enable JavaScript to run this app."}],["$","$L6",null,{}],["$","$L7",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]}]]}]]}]],null],null],["$L8",null]]]]
9:I[5553,["9243","static/chunks/9243-972bdccd4ceb11ae.js","5800","static/chunks/5800-4312aed1aa8a4305.js","549","static/chunks/549-2babc012700e23ed.js","4853","static/chunks/4853-73ca7990eb89674b.js","6797","static/chunks/app/blog/%5B...slug%5D/page-9b274a2e0073d544.js"],"BlogPostPageClient"]
a:T4363,
> Next.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.

## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”

### ë°°ê²½

- **í”„ë ˆì„ì›Œí¬**: Next.js 14, React 18
- **ëª©í‘œ**: props drilling ì œê±° ë° SSR/CSR í™˜ê²½ í†µí•© ì²˜ë¦¬
- **ì„±ê³¼**: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°, ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´

### í•µì‹¬ ì„±ê³¼

- âœ… Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘
- âœ… prefetch/query/useQueryë¥¼ ì´ìš©í•œ props drilling ì œê±°
- âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ì—¬ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€
- âœ… ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°
- âœ… SSRì— ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ ì—°í•˜ê²Œ ëŒ€ì‘
- âœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´

---

## ğŸ”´ ë¬¸ì œ ìƒí™©

### 1. Props Drilling ë¬¸ì œ

**ë¬¸ì œ**:

- ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ì„ ê±°ì³ ì „ë‹¬í•´ì•¼ í•¨
- ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ propsë¥¼ ë°›ì•„ì•¼ í•¨
- ì½”ë“œ ê°€ë…ì„± ì €í•˜ ë° ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

**Before (Props Drilling)**:

```typescript
// í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
export default function HomePage({ initialData }) {
  return (
    <Layout>
      <Header userData={initialData.user} />
      <MainContent
        products={initialData.products}
        userData={initialData.user}
      />
      <Footer />
    </Layout>
  )
}

// ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸
function MainContent({ products, userData }) {
  return (
    <div>
      <ProductList products={products} userData={userData} />
      <RecommendationSection userData={userData} />
    </div>
  )
}

// ì‹¤ì œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
function ProductList({ products, userData }) {
  // userDataë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ propsë¡œ ë°›ì•„ì•¼ í•¨
  return <div>{/* productsë§Œ ì‚¬ìš© */}</div>
}
```

**ë¬¸ì œì **:

- `userData`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ë„ propsë¡œ ë°›ì•„ì•¼ í•¨
- ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì—­í• ë§Œ í•¨
- íƒ€ì… ì •ì˜ê°€ ë³µì¡í•´ì§

---

### 2. SSR/CSR í™˜ê²½ ë¶„ë¦¬ ë¬¸ì œ

**ë¬¸ì œ**:

- SSR í™˜ê²½ì—ì„œëŠ” `getStaticProps`ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨
- CSR í™˜ê²½ì—ì„œëŠ” `useQuery`ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨
- ê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨

**Before (í™˜ê²½ ë¶„ë¦¬)**:

```typescript
// SSR í™˜ê²½
export async function getStaticProps() {
  const products = await fetchProducts()
  const user = await fetchUser()

  return {
    props: {
      initialData: { products, user },
    },
  }
}

// CSR í™˜ê²½
function Component() {
  const { data: products } = useQuery('products', fetchProducts)
  const { data: user } = useQuery('user', fetchUser)

  // ê°™ì€ ë¡œì§ì„ ë‘ ë²ˆ ì‘ì„±í•´ì•¼ í•¨
}
```

**ë¬¸ì œì **:

- ê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬
- ì½”ë“œ ì¤‘ë³µ ë°œìƒ
- í™˜ê²½ ì „í™˜ ì‹œ ìˆ˜ì • ë²”ìœ„ í¼

---

### 3. ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ë¬¸ì œ

**ë¬¸ì œ**:

- ëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ react-queryë¥¼ ì§ì ‘ importí•´ì•¼ í•¨
- ëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ì¦ê°€
- ëª¨ë“ˆ ë…ë¦½ì„± ì €í•˜

**Before (ì§ì ‘ ë””íœë˜ì‹œ)**:

```typescript
// ëª¨ë“ˆ ì‚¬ìš©ì²˜
import { useQuery } from '@tanstack/react-query'
import { ProductList } from '@modules/product-list'

function Page() {
  const { data: products } = useQuery(['products'], fetchProducts)

  return <ProductList products={products} />
}
```

**ë¬¸ì œì **:

- ì‚¬ìš©ì²˜ì—ì„œ react-queryë¥¼ ì•Œì•„ì•¼ í•¨
- ëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ë†’ìŒ
- ëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ë„ ìˆ˜ì • í•„ìš”

---

## âœ… í•´ê²° ë°©ë²•

### 1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘

**í•µì‹¬ ì•„ì´ë””ì–´**:

- Provider levelì—ì„œ SSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸
- ì‚¬ìš©ì²˜ì—ì„œëŠ” í™˜ê²½ì„ ì‹ ê²½ ì“°ì§€ ì•Šê³  `useQuery`ë§Œ ì‚¬ìš©

**êµ¬í˜„**:

```typescript
// CorePackProvider.tsx
import {
  QueryClient,
  QueryClientProvider,
  dehydrate,
  Hydrate,
} from '@tanstack/react-query'

export function CorePackProvider({
  children,
  dehydratedState,
}: CorePackProviderProps) {
  const [queryClient] = useState(
    () =>
      new QueryClient({
        defaultOptions: {
          queries: {
            staleTime: 60 * 1000, // 1ë¶„
            cacheTime: 5 * 60 * 1000, // 5ë¶„
          },
        },
      })
  )

  return (
    <QueryClientProvider client={queryClient}>
      <Hydrate state={dehydratedState}>{children}</Hydrate>
    </QueryClientProvider>
  )
}
```

**í˜ì´ì§€ ë ˆë²¨ì—ì„œ ì‚¬ìš©**:

```typescript
// pages/home.tsx
export async function getStaticProps() {
  const queryClient = new QueryClient()

  // SSRì—ì„œ ë°ì´í„° prefetch
  await queryClient.prefetchQuery(['products'], fetchProducts)
  await queryClient.prefetchQuery(['user'], fetchUser)

  return {
    props: {
      dehydratedState: dehydrate(queryClient),
    },
  }
}

export default function HomePage({ dehydratedState }) {
  return (
    <CorePackProvider dehydratedState={dehydratedState}>
      <HomePageContent />
    </CorePackProvider>
  )
}
```

**íš¨ê³¼**:

- âœ… SSR ë°ì´í„°ê°€ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸ë¨
- âœ… CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥
- âœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”

---

### 2. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬ â†’ prefetch/useQueryì—ì„œ ì‚¬ìš©

**í•µì‹¬ ì›ì¹™**: ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ prefetchì™€ useQueryì—ì„œ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•˜ë©´ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

**êµ¬ì¡°**:

1. **ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬**: ì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ì–´ì„œ ì •ì˜
2. **prefetch/useQueryì—ì„œ ì‚¬ìš©**: ì •ì˜í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì¬ì‚¬ìš©

#### 1ë‹¨ê³„: ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬

**ì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ê¸°** (`queries/products.ts`):

```typescript
// queries/products.ts
import { QueryOptions } from '@tanstack/react-query'

export const productsQuery = {
  queryKey: ['products'] as const,
  queryFn: fetchProducts,
} satisfies QueryOptions

export const productDetailQuery = (id: number) =>
  ({
    queryKey: ['products', 'detail', id] as const,
    queryFn: () => fetchProductDetail(id),
  } satisfies QueryOptions)

export const productsListQuery = (filters?: string) =>
  ({
    queryKey: ['products', 'list', { filters }] as const,
    queryFn: () => fetchProducts(filters),
  } satisfies QueryOptions)
```

**íš¨ê³¼**:

- âœ… prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€
- âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜ ë³´ì¥
- âœ… íƒ€ì… ì•ˆì „ì„± í™•ë³´
- âœ… ì¿¼ë¦¬ ì •ì˜ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •

#### 2ë‹¨ê³„: prefetchì™€ useQueryì—ì„œ ì‚¬ìš©

**prefetch (SSRì—ì„œ ë°ì´í„° ì¤€ë¹„)**:

```typescript
// hooks/useProductsPrefetch.ts
import { QueryClient } from '@tanstack/react-query'
import {
  productsQuery,
  productDetailQuery,
  productsListQuery,
} from '../queries/products'

export async function prefetchProducts(
  queryClient: QueryClient,
  filters?: string
) {
  // prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©
  return queryClient.prefetchQuery({
    ...productsListQuery(filters),
    staleTime: 60 * 1000,
  })
}

export async function prefetchProductDetail(
  queryClient: QueryClient,
  id: number
) {
  // prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©
  return queryClient.prefetchQuery({
    ...productDetailQuery(id),
    staleTime: 60 * 1000,
  })
}
```

**useQuery (ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©)**:

```typescript
// hooks/useProductsQuery.ts
import { useQuery, UseQueryOptions } from '@tanstack/react-query'
import {
  productsQuery,
  productDetailQuery,
  productsListQuery,
} from '../queries/products'

export function useProductsQuery(
  filters?: string,
  options?: Omit<UseQueryOptions, 'queryKey' | 'queryFn'>
) {
  // useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!
  return useQuery({
    ...productsListQuery(filters),
    staleTime: 60 * 1000,
    ...options,
  })
}

export function useProductDetailQuery(
  id: number,
  options?: Omit<UseQueryOptions, 'queryKey' | 'queryFn'>
) {
  // useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!
  return useQuery({
    ...productDetailQuery(id),
    staleTime: 60 * 1000,
    ...options,
  })
}
```

**ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” hook**:

```typescript
// hooks/useProducts.ts
import { useProductsQuery, useProductDetailQuery } from './useProductsQuery'

export function useProducts(filters?: string) {
  const { data, isLoading, error } = useProductsQuery(filters)

  return {
    products: data ?? [],
    isLoading,
    error,
  }
}

export function useProduct(id: number) {
  const { data, isLoading, error } = useProductDetailQuery(id)

  return {
    product: data,
    isLoading,
    error,
  }
}
```

**ì‚¬ìš© ì˜ˆì‹œ**:

```typescript
// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
function ProductList({ filters }: { filters?: string }) {
  const { products, isLoading } = useProducts(filters)

  if (isLoading) return <Loading />

  return (
    <div>
      {products.map((product) => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  )
}

function ProductDetail({ id }: { id: number }) {
  const { product, isLoading } = useProduct(id)

  if (isLoading) return <Loading />
  if (!product) return <NotFound />

  return <ProductDetailView product={product} />
}
```

**íš¨ê³¼**:

- âœ… props drilling ì œê±°
- âœ… ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´
- âœ… ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ëŠ” props ì „ë‹¬ ë¶ˆí•„ìš”
- âœ… **prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€**
- âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜í•˜ì—¬ ìºì‹œ íˆíŠ¸ ë³´ì¥

---

### 3. ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´

**Before (ì‚¬ìš©ì²˜ì—ì„œ react-query ì§ì ‘ ì‚¬ìš©)**:

```typescript
// ì‚¬ìš©ì²˜
import { useQuery } from '@tanstack/react-query'
import { ProductList } from '@modules/product-list'

function Page() {
  const { data: products } = useQuery(['products'], fetchProducts)
  return <ProductList products={products} />
}
```

**After (ëª¨ë“ˆ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬)**:

```typescript
// ëª¨ë“ˆ ë‚´ë¶€ (ProductList/index.tsx)
import { useProducts } from './hooks/useProducts'

export function ProductList() {
  const { products, isLoading } = useProducts()

  if (isLoading) return <Loading />

  return (
    <div>
      {products.map((product) => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  )
}

// ì‚¬ìš©ì²˜
import { ProductList } from '@modules/product-list'

function Page() {
  // react-queryë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ!
  return <ProductList />
}
```

**íš¨ê³¼**:

- âœ… ì‚¬ìš©ì²˜ì—ì„œ react-query ë””íœë˜ì‹œ ì œê±°
- âœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´
- âœ… ëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ ìˆ˜ì • ë¶ˆí•„ìš”

---

### 4. SSR/CSR í†µí•© ì²˜ë¦¬

**í†µí•©ëœ ë°ì´í„° í˜ì¹­ ë¡œì§**:

```typescript
// hooks/useProducts.ts
import { useProductsQuery } from './useProductsQuery'

export function useProducts(filters?: string) {
  // SSRì—ì„œ prefetchëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©
  // ì—†ìœ¼ë©´ CSRì—ì„œ fetch
  // prefetchì™€ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥
  const { data, isLoading, error } = useProductsQuery(filters)

  return {
    products: data ?? [],
    isLoading,
    error,
  }
}
```

**í˜ì´ì§€ ë ˆë²¨ì—ì„œ prefetch**:

```typescript
// pages/home.tsx
import { QueryClient } from '@tanstack/react-query'
import { dehydrate } from '@tanstack/react-query'
import { prefetchProducts } from '../hooks/useProductsPrefetch'
import { prefetchUserProfile } from '../hooks/useUserPrefetch'

export async function getStaticProps() {
  const queryClient = new QueryClient()

  // SSRì—ì„œ prefetch (ì¤‘ì•™ ê´€ë¦¬ëœ ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ì‚¬ìš©)
  await prefetchProducts(queryClient)
  await prefetchUserProfile(queryClient)

  return {
    props: {
      dehydratedState: dehydrate(queryClient),
    },
    revalidate: 60, // ISR
  }
}
```

**íš¨ê³¼**:

- âœ… SSRê³¼ CSRì—ì„œ ë™ì¼í•œ ì½”ë“œ ì‚¬ìš©
- âœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”
- âœ… ISRê³¼ë„ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ë³€ê²½ ì „ êµ¬ì¡°

```
Page Component
  â†“ (props drilling)
Layout Component
  â†“ (props drilling)
MainContent Component
  â†“ (props drilling)
ProductList Component (ì‹¤ì œ ì‚¬ìš©)
```

### ë³€ê²½ í›„ êµ¬ì¡°

```
1. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬
   queries/products.ts
   â””â”€ productsQuery (queryKey + queryFn ë¬¶ìŒ)

2. prefetch/useQueryì—ì„œ ì‚¬ìš©
   Page Component
     â†“ (prefetch - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)
   CorePackProvider (í•˜ì´ë“œë ˆì´íŠ¸)
     â†“
   ProductList Component
     â†“ (useQuery - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)
   React Query Cache (ìºì‹œ íˆíŠ¸ ë³´ì¥!)
```

---

## ğŸ“ˆ ê°œì„  íš¨ê³¼

| í•­ëª©                   | Before         | After       | ê°œì„                |
| ---------------------- | -------------- | ----------- | ------------------ |
| **Props ì „ë‹¬ ë ˆë²¨**    | 3-4ë‹¨ê³„        | 0ë‹¨ê³„       | **100% ì œê±°**      |
| **ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •** | í•„ìš”           | ë¶ˆí•„ìš”      | **ìˆ˜ì • ë²”ìœ„ ê°ì†Œ** |
| **ì½”ë“œ ê°€ë…ì„±**        | ë‚®ìŒ           | ë†’ìŒ        | **í–¥ìƒ**           |
| **ëª¨ë“ˆ ë…ë¦½ì„±**        | ë‚®ìŒ           | ë†’ìŒ        | **í–¥ìƒ**           |
| **í™˜ê²½ ì „í™˜**          | ì½”ë“œ ìˆ˜ì • í•„ìš” | ìˆ˜ì • ë¶ˆí•„ìš” | **ìœ ì—°ì„± í–¥ìƒ**    |

---

## ğŸ’¡ í•µì‹¬ êµí›ˆ

### 1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ê°€ í•µì‹¬

SSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸í•˜ë©´, CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì •ì„ ìµœì†Œí™”í•˜ëŠ” í•µì‹¬ì…ë‹ˆë‹¤.

### 2. ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•´ì•¼ í•¨

**í•µì‹¬**: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´(queryKey + queryFn)ë¥¼ ì‚¬ìš©í•´ì•¼ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

**ë¬¸ì œ ìƒí™©**:

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ: prefetchì™€ useQueryì—ì„œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì •ì˜
// prefetchì—ì„œ
await queryClient.prefetchQuery({
  queryKey: ['products'],
  queryFn: fetchProducts,
})

// useQueryì—ì„œ (ì¿¼ë¦¬ í‚¤ë‚˜ í•¨ìˆ˜ê°€ ì¡°ê¸ˆì´ë¼ë„ ë‹¤ë¥´ë©´ ìºì‹œ ë¯¸ìŠ¤!)
const { data } = useQuery({
  queryKey: ['products'], // ë™ì¼í•˜ì§€ë§Œ
  queryFn: () => fetchProducts(), // í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ê°ì‹¸ë©´ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ì¸ì‹!
})
```

**í•´ê²° ë°©ë²•**:

```typescript
// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ì¿¼ë¦¬ ê°ì²´ë¥¼ ë¬¶ì–´ì„œ ì¬ì‚¬ìš©
const productsQuery = {
  queryKey: ['products'],
  queryFn: fetchProducts,
}

// prefetchì—ì„œ
await queryClient.prefetchQuery(productsQuery)

// useQueryì—ì„œ (ë™ì¼í•œ ê°ì²´ ì‚¬ìš©)
const { data } = useQuery(productsQuery)
```

ì´ë ‡ê²Œ í•˜ë©´ prefetchì—ì„œ ì¤€ë¹„í•œ ë°ì´í„°ë¥¼ useQueryì—ì„œ ì •í™•íˆ ì°¾ì„ ìˆ˜ ìˆì–´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë©ë‹ˆë‹¤.

### 3. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ë¥¼ ë¨¼ì € ê´€ë¦¬í•˜ê³  prefetch/useQueryì—ì„œ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ê°€ íš¨ê³¼ì 

ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ ë¨¼ì € ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ê³ , prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ ì¼ê´€ì„±ì´ ë³´ì¥ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ê° ë ˆì´ì–´ì˜ ì±…ì„ì´ ëª…í™•í•´ì§€ê³  ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.

### 4. ëª¨ë“ˆ ë…ë¦½ì„±ì„ ìœ„í•´ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬

ëª¨ë“ˆì´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë‚´ë¶€ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ í•˜ë©´, ì‚¬ìš©ì²˜ì˜ ë””íœë˜ì‹œë¥¼ ì œê±°í•  ìˆ˜ ìˆê³  ëª¨ë“ˆ ë…ë¦½ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.

### 5. íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•´ì•¼ í•¨

React Queryì˜ íƒ€ì…ì„ í™œìš©í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. `useQuery`ì˜ ì œë„¤ë¦­ íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ê³ , ì¿¼ë¦¬ í‚¤ë¥¼ `as const`ë¡œ ì •ì˜í•˜ë©´ íƒ€ì… ì²´í¬ê°€ ê°•í™”ë©ë‹ˆë‹¤.

### 6. ìºì‹± ì „ëµì„ ì‹ ì¤‘í•˜ê²Œ ì„¤ê³„í•´ì•¼ í•¨

`staleTime`, `cacheTime` ë“±ì„ ì ì ˆíˆ ì„¤ì •í•˜ì—¬ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ë°©ì§€í•˜ê³ , ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œì¼œì•¼ í•©ë‹ˆë‹¤. prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë˜ì–´ SSR ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ ê²°ë¡ 

React Query ë ˆì´ì–´ êµ¬ì¶•ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ì„±ê³¼ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤:

1. âœ… **Props Drilling ì™„ì „ ì œê±°**: ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´
2. âœ… **ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€**: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥
3. âœ… **SSR/CSR í™˜ê²½ í†µí•©**: ë™ì¼í•œ ì½”ë“œë¡œ ë‘ í™˜ê²½ ëª¨ë‘ ì§€ì›
4. âœ… **ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´**: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°
5. âœ… **ì½”ë“œ ê°€ë…ì„± í–¥ìƒ**: ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ì˜ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì œê±°
6. âœ… **ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ**: í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”, ì¿¼ë¦¬ ê°ì²´ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •

ì´ë²ˆ ì‘ì—…ì„ í†µí•´ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œì˜ ìƒíƒœ ê´€ë¦¬ì™€ ë°ì´í„° í˜ì¹­ ì•„í‚¤í…ì²˜ ì„¤ê³„ ê²½í—˜ì„ ìŒ“ì•˜ê³ , React Queryì˜ prefetch, í•˜ì´ë“œë ˆì´íŠ¸, ìºì‹± ì „ëµ, ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ ë“±ì„ ì‹¤ë¬´ì— ì ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [TanStack Query Documentation](https://tanstack.com/query/latest)
- [Next.js Data Fetching](https://nextjs.org/docs/app/building-your-application/data-fetching)
- [React Query SSR Guide](https://tanstack.com/query/latest/docs/react/guides/ssr)
b:T1243d,<blockquote>
<p>Next.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.</p>
</blockquote>
<h2 id="-í”„ë¡œì íŠ¸-ê°œìš”">ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”<a aria-hidden="true" tabindex="-1" href="#-í”„ë¡œì íŠ¸-ê°œìš”"><span class="anchor"></span></a></h2>
<h3 id="ë°°ê²½">ë°°ê²½<a aria-hidden="true" tabindex="-1" href="#ë°°ê²½"><span class="anchor"></span></a></h3>
<ul>
<li><strong>í”„ë ˆì„ì›Œí¬</strong>: Next.js 14, React 18</li>
<li><strong>ëª©í‘œ</strong>: props drilling ì œê±° ë° SSR/CSR í™˜ê²½ í†µí•© ì²˜ë¦¬</li>
<li><strong>ì„±ê³¼</strong>: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°, ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´</li>
</ul>
<h3 id="í•µì‹¬-ì„±ê³¼">í•µì‹¬ ì„±ê³¼<a aria-hidden="true" tabindex="-1" href="#í•µì‹¬-ì„±ê³¼"><span class="anchor"></span></a></h3>
<ul>
<li>âœ… Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘</li>
<li>âœ… prefetch/query/useQueryë¥¼ ì´ìš©í•œ props drilling ì œê±°</li>
<li>âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ì—¬ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€</li>
<li>âœ… ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°</li>
<li>âœ… SSRì— ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ ì—°í•˜ê²Œ ëŒ€ì‘</li>
<li>âœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´</li>
</ul>
<hr>
<h2 id="-ë¬¸ì œ-ìƒí™©">ğŸ”´ ë¬¸ì œ ìƒí™©<a aria-hidden="true" tabindex="-1" href="#-ë¬¸ì œ-ìƒí™©"><span class="anchor"></span></a></h2>
<h3 id="1-props-drilling-ë¬¸ì œ">1. Props Drilling ë¬¸ì œ<a aria-hidden="true" tabindex="-1" href="#1-props-drilling-ë¬¸ì œ"><span class="anchor"></span></a></h3>
<p><strong>ë¬¸ì œ</strong>:</p>
<ul>
<li>ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ì„ ê±°ì³ ì „ë‹¬í•´ì•¼ í•¨</li>
<li>ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ propsë¥¼ ë°›ì•„ì•¼ í•¨</li>
<li>ì½”ë“œ ê°€ë…ì„± ì €í•˜ ë° ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€</li>
</ul>
<p><strong>BOLD_PAREN_PLACEHOLDER_0</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> initialData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>Layout<span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>Header userData<span class="token operator">=</span><span class="token punctuation">{</span>initialData<span class="token punctuation">.</span>user<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>MainContent
</span><span class="code-line">        products<span class="token operator">=</span><span class="token punctuation">{</span>initialData<span class="token punctuation">.</span>products<span class="token punctuation">}</span>
</span><span class="code-line">        userData<span class="token operator">=</span><span class="token punctuation">{</span>initialData<span class="token punctuation">.</span>user<span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>Footer <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>Layout<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">MainContent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> products<span class="token punctuation">,</span> userData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>ProductList products<span class="token operator">=</span><span class="token punctuation">{</span>products<span class="token punctuation">}</span> userData<span class="token operator">=</span><span class="token punctuation">{</span>userData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>RecommendationSection userData<span class="token operator">=</span><span class="token punctuation">{</span>userData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ì‹¤ì œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">ProductList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> products<span class="token punctuation">,</span> userData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// userDataë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ propsë¡œ ë°›ì•„ì•¼ í•¨</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>div<span class="token operator">></span><span class="token punctuation">{</span><span class="token comment">/* productsë§Œ ì‚¬ìš© */</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ë¬¸ì œì </strong>:</p>
<ul>
<li><code class="inline-code">userData</code>ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ë„ propsë¡œ ë°›ì•„ì•¼ í•¨</li>
<li>ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì—­í• ë§Œ í•¨</li>
<li>íƒ€ì… ì •ì˜ê°€ ë³µì¡í•´ì§</li>
</ul>
<hr>
<h3 id="2-ssrcsr-í™˜ê²½-ë¶„ë¦¬-ë¬¸ì œ">2. SSR/CSR í™˜ê²½ ë¶„ë¦¬ ë¬¸ì œ<a aria-hidden="true" tabindex="-1" href="#2-ssrcsr-í™˜ê²½-ë¶„ë¦¬-ë¬¸ì œ"><span class="anchor"></span></a></h3>
<p><strong>ë¬¸ì œ</strong>:</p>
<ul>
<li>SSR í™˜ê²½ì—ì„œëŠ” <code class="inline-code">getStaticProps</code>ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨</li>
<li>CSR í™˜ê²½ì—ì„œëŠ” <code class="inline-code">useQuery</code>ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨</li>
<li>ê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨</li>
</ul>
<p><strong>BOLD_PAREN_PLACEHOLDER_1</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// SSR í™˜ê²½</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    props<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      initialData<span class="token operator">:</span> <span class="token punctuation">{</span> products<span class="token punctuation">,</span> user <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// CSR í™˜ê²½</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> products <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token string">'products'</span><span class="token punctuation">,</span> fetchProducts<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> fetchUser<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// ê°™ì€ ë¡œì§ì„ ë‘ ë²ˆ ì‘ì„±í•´ì•¼ í•¨</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ë¬¸ì œì </strong>:</p>
<ul>
<li>ê°™ì€ ë°ì´í„°ë¥¼ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬</li>
<li>ì½”ë“œ ì¤‘ë³µ ë°œìƒ</li>
<li>í™˜ê²½ ì „í™˜ ì‹œ ìˆ˜ì • ë²”ìœ„ í¼</li>
</ul>
<hr>
<h3 id="3-ì‚¬ìš©ì²˜-react-query-ë””íœë˜ì‹œ-ë¬¸ì œ">3. ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ë¬¸ì œ<a aria-hidden="true" tabindex="-1" href="#3-ì‚¬ìš©ì²˜-react-query-ë””íœë˜ì‹œ-ë¬¸ì œ"><span class="anchor"></span></a></h3>
<p><strong>ë¬¸ì œ</strong>:</p>
<ul>
<li>ëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ react-queryë¥¼ ì§ì ‘ importí•´ì•¼ í•¨</li>
<li>ëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ì¦ê°€</li>
<li>ëª¨ë“ˆ ë…ë¦½ì„± ì €í•˜</li>
</ul>
<p><strong>BOLD_PAREN_PLACEHOLDER_2</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// ëª¨ë“ˆ ì‚¬ìš©ì²˜</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ProductList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@modules/product-list'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> products <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fetchProducts<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>ProductList products<span class="token operator">=</span><span class="token punctuation">{</span>products<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ë¬¸ì œì </strong>:</p>
<ul>
<li>ì‚¬ìš©ì²˜ì—ì„œ react-queryë¥¼ ì•Œì•„ì•¼ í•¨</li>
<li>ëª¨ë“ˆê³¼ ì‚¬ìš©ì²˜ ê°„ ê²°í•©ë„ ë†’ìŒ</li>
<li>ëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ë„ ìˆ˜ì • í•„ìš”</li>
</ul>
<hr>
<h2 id="-í•´ê²°-ë°©ë²•">âœ… í•´ê²° ë°©ë²•<a aria-hidden="true" tabindex="-1" href="#-í•´ê²°-ë°©ë²•"><span class="anchor"></span></a></h2>
<h3 id="1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸-ëŒ€ì‘">1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘<a aria-hidden="true" tabindex="-1" href="#1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸-ëŒ€ì‘"><span class="anchor"></span></a></h3>
<p><strong>í•µì‹¬ ì•„ì´ë””ì–´</strong>:</p>
<ul>
<li>Provider levelì—ì„œ SSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸</li>
<li>ì‚¬ìš©ì²˜ì—ì„œëŠ” í™˜ê²½ì„ ì‹ ê²½ ì“°ì§€ ì•Šê³  <code class="inline-code">useQuery</code>ë§Œ ì‚¬ìš©</li>
</ul>
<p><strong>êµ¬í˜„</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// CorePackProvider.tsx</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span>
</span><span class="code-line">  QueryClient<span class="token punctuation">,</span>
</span><span class="code-line">  QueryClientProvider<span class="token punctuation">,</span>
</span><span class="code-line">  dehydrate<span class="token punctuation">,</span>
</span><span class="code-line">  Hydrate<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">CorePackProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  children<span class="token punctuation">,</span>
</span><span class="code-line">  dehydratedState<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token operator">:</span> CorePackProviderProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>queryClient<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
</span><span class="code-line">      <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">        defaultOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">          queries<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">            staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 1ë¶„</span>
</span><span class="code-line">            cacheTime<span class="token operator">:</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 5ë¶„</span>
</span><span class="code-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>QueryClientProvider client<span class="token operator">=</span><span class="token punctuation">{</span>queryClient<span class="token punctuation">}</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>Hydrate state<span class="token operator">=</span><span class="token punctuation">{</span>dehydratedState<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>Hydrate<span class="token operator">></span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>QueryClientProvider<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>í˜ì´ì§€ ë ˆë²¨ì—ì„œ ì‚¬ìš©</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// pages/home.tsx</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> queryClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// SSRì—ì„œ ë°ì´í„° prefetch</span>
</span><span class="code-line">  <span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fetchProducts<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fetchUser<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    props<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      dehydratedState<span class="token operator">:</span> <span class="token function">dehydrate</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dehydratedState <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>CorePackProvider dehydratedState<span class="token operator">=</span><span class="token punctuation">{</span>dehydratedState<span class="token punctuation">}</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token operator">&#x3C;</span>HomePageContent <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>CorePackProvider<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… SSR ë°ì´í„°ê°€ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸ë¨</li>
<li>âœ… CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥</li>
<li>âœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”</li>
</ul>
<hr>
<h3 id="2-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬--prefetchusequeryì—ì„œ-ì‚¬ìš©">2. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬ â†’ prefetch/useQueryì—ì„œ ì‚¬ìš©<a aria-hidden="true" tabindex="-1" href="#2-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬--prefetchusequeryì—ì„œ-ì‚¬ìš©"><span class="anchor"></span></a></h3>
<p><strong>í•µì‹¬ ì›ì¹™</strong>: ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ prefetchì™€ useQueryì—ì„œ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•˜ë©´ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<p><strong>êµ¬ì¡°</strong>:</p>
<ol>
<li><strong>ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬</strong>: ì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ì–´ì„œ ì •ì˜</li>
<li><strong>prefetch/useQueryì—ì„œ ì‚¬ìš©</strong>: ì •ì˜í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì¬ì‚¬ìš©</li>
</ol>
<h4 id="1ë‹¨ê³„-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬">1ë‹¨ê³„: ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬<a aria-hidden="true" tabindex="-1" href="#1ë‹¨ê³„-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜-ê´€ë¦¬"><span class="anchor"></span></a></h4>
<p><strong>ì¿¼ë¦¬ ê°ì²´ë¡œ ë¬¶ê¸°</strong> (<code class="inline-code">queries/products.ts</code>):</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// queries/products.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> productsQuery <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">,</span>
</span><span class="code-line">  queryFn<span class="token operator">:</span> fetchProducts<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span> satisfies QueryOptions
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">productDetailQuery</span> <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span>
</span><span class="code-line">  <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">,</span> <span class="token string">'detail'</span><span class="token punctuation">,</span> id<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function-variable function">queryFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetchProductDetail</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span> satisfies QueryOptions<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">productsListQuery</span> <span class="token operator">=</span> <span class="token punctuation">(</span>filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span>
</span><span class="code-line">  <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">,</span> <span class="token string">'list'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> filters <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function-variable function">queryFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetchProducts</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span> satisfies QueryOptions<span class="token punctuation">)</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€</li>
<li>âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜ ë³´ì¥</li>
<li>âœ… íƒ€ì… ì•ˆì „ì„± í™•ë³´</li>
<li>âœ… ì¿¼ë¦¬ ì •ì˜ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •</li>
</ul>
<h4 id="2ë‹¨ê³„-prefetchì™€-usequeryì—ì„œ-ì‚¬ìš©">2ë‹¨ê³„: prefetchì™€ useQueryì—ì„œ ì‚¬ìš©<a aria-hidden="true" tabindex="-1" href="#2ë‹¨ê³„-prefetchì™€-usequeryì—ì„œ-ì‚¬ìš©"><span class="anchor"></span></a></h4>
<p><strong>BOLD_PAREN_PLACEHOLDER_3</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// hooks/useProductsPrefetch.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span>
</span><span class="code-line">  productsQuery<span class="token punctuation">,</span>
</span><span class="code-line">  productDetailQuery<span class="token punctuation">,</span>
</span><span class="code-line">  productsListQuery<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../queries/products'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">prefetchProducts</span><span class="token punctuation">(</span>
</span><span class="code-line">  queryClient<span class="token operator">:</span> QueryClient<span class="token punctuation">,</span>
</span><span class="code-line">  filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©</span>
</span><span class="code-line">  <span class="token keyword">return</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token operator">...</span><span class="token function">productsListQuery</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">prefetchProductDetail</span><span class="token punctuation">(</span>
</span><span class="code-line">  queryClient<span class="token operator">:</span> QueryClient<span class="token punctuation">,</span>
</span><span class="code-line">  id<span class="token operator">:</span> <span class="token builtin">number</span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// prefetchì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©</span>
</span><span class="code-line">  <span class="token keyword">return</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token operator">...</span><span class="token function">productDetailQuery</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>BOLD_PAREN_PLACEHOLDER_4</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// hooks/useProductsQuery.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery<span class="token punctuation">,</span> UseQueryOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span>
</span><span class="code-line">  productsQuery<span class="token punctuation">,</span>
</span><span class="code-line">  productDetailQuery<span class="token punctuation">,</span>
</span><span class="code-line">  productsListQuery<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../queries/products'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProductsQuery</span><span class="token punctuation">(</span>
</span><span class="code-line">  filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
</span><span class="code-line">  options<span class="token operator">?</span><span class="token operator">:</span> Omit<span class="token operator">&#x3C;</span>UseQueryOptions<span class="token punctuation">,</span> <span class="token string">'queryKey'</span> <span class="token operator">|</span> <span class="token string">'queryFn'</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token operator">...</span><span class="token function">productsListQuery</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token operator">...</span>options<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProductDetailQuery</span><span class="token punctuation">(</span>
</span><span class="code-line">  id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span><span class="code-line">  options<span class="token operator">?</span><span class="token operator">:</span> Omit<span class="token operator">&#x3C;</span>UseQueryOptions<span class="token punctuation">,</span> <span class="token string">'queryKey'</span> <span class="token operator">|</span> <span class="token string">'queryFn'</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// useQueryì—ì„œë„ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš© â†’ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€!</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token operator">...</span><span class="token function">productDetailQuery</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    staleTime<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token operator">...</span>options<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” hook</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// hooks/useProducts.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useProductsQuery<span class="token punctuation">,</span> useProductDetailQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./useProductsQuery'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProducts</span><span class="token punctuation">(</span>filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProductsQuery</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    products<span class="token operator">:</span> data <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    isLoading<span class="token punctuation">,</span>
</span><span class="code-line">    error<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProduct</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProductDetailQuery</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    product<span class="token operator">:</span> data<span class="token punctuation">,</span>
</span><span class="code-line">    isLoading<span class="token punctuation">,</span>
</span><span class="code-line">    error<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>ì‚¬ìš© ì˜ˆì‹œ</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">ProductList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filters <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> products<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProducts</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>Loading <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
</span><span class="code-line">      <span class="token punctuation">{</span>products<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token operator">&#x3C;</span>ProductCard key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>id<span class="token punctuation">}</span> product<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">ProductDetail</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> product<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProduct</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>Loading <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>product<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>NotFound <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>ProductDetailView product<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… props drilling ì œê±°</li>
<li>âœ… ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´</li>
<li>âœ… ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ëŠ” props ì „ë‹¬ ë¶ˆí•„ìš”</li>
<li>âœ… <strong>prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€</strong></li>
<li>âœ… ì¿¼ë¦¬ í‚¤ì™€ queryFnì´ í•­ìƒ ì¼ì¹˜í•˜ì—¬ ìºì‹œ íˆíŠ¸ ë³´ì¥</li>
</ul>
<hr>
<h3 id="3-ëª¨ë“ˆ-ë…ë¦½ì„±-í™•ë³´">3. ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´<a aria-hidden="true" tabindex="-1" href="#3-ëª¨ë“ˆ-ë…ë¦½ì„±-í™•ë³´"><span class="anchor"></span></a></h3>
<p><strong>BOLD_PAREN_PLACEHOLDER_5</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// ì‚¬ìš©ì²˜</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ProductList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@modules/product-list'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> products <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fetchProducts<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>ProductList products<span class="token operator">=</span><span class="token punctuation">{</span>products<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>BOLD_PAREN_PLACEHOLDER_6</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// ëª¨ë“ˆ ë‚´ë¶€ (ProductList/index.tsx)</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useProducts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./hooks/useProducts'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ProductList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> products<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoading<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>Loading <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
</span><span class="code-line">      <span class="token punctuation">{</span>products<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token operator">&#x3C;</span>ProductCard key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>id<span class="token punctuation">}</span> product<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ì‚¬ìš©ì²˜</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ProductList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@modules/product-list'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// react-queryë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ!</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&#x3C;</span>ProductList <span class="token operator">/</span><span class="token operator">></span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… ì‚¬ìš©ì²˜ì—ì„œ react-query ë””íœë˜ì‹œ ì œê±°</li>
<li>âœ… ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´</li>
<li>âœ… ëª¨ë“ˆ êµì²´ ì‹œ ì‚¬ìš©ì²˜ ìˆ˜ì • ë¶ˆí•„ìš”</li>
</ul>
<hr>
<h3 id="4-ssrcsr-í†µí•©-ì²˜ë¦¬">4. SSR/CSR í†µí•© ì²˜ë¦¬<a aria-hidden="true" tabindex="-1" href="#4-ssrcsr-í†µí•©-ì²˜ë¦¬"><span class="anchor"></span></a></h3>
<p><strong>í†µí•©ëœ ë°ì´í„° í˜ì¹­ ë¡œì§</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// hooks/useProducts.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useProductsQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./useProductsQuery'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useProducts</span><span class="token punctuation">(</span>filters<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// SSRì—ì„œ prefetchëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©</span>
</span><span class="code-line">  <span class="token comment">// ì—†ìœ¼ë©´ CSRì—ì„œ fetch</span>
</span><span class="code-line">  <span class="token comment">// prefetchì™€ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useProductsQuery</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    products<span class="token operator">:</span> data <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    isLoading<span class="token punctuation">,</span>
</span><span class="code-line">    error<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>í˜ì´ì§€ ë ˆë²¨ì—ì„œ prefetch</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// pages/home.tsx</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> dehydrate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tanstack/react-query'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> prefetchProducts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../hooks/useProductsPrefetch'</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> prefetchUserProfile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../hooks/useUserPrefetch'</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> queryClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// SSRì—ì„œ prefetch (ì¤‘ì•™ ê´€ë¦¬ëœ ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ì‚¬ìš©)</span>
</span><span class="code-line">  <span class="token keyword">await</span> <span class="token function">prefetchProducts</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">await</span> <span class="token function">prefetchUserProfile</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    props<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      dehydratedState<span class="token operator">:</span> <span class="token function">dehydrate</span><span class="token punctuation">(</span>queryClient<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    revalidate<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token comment">// ISR</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><strong>íš¨ê³¼</strong>:</p>
<ul>
<li>âœ… SSRê³¼ CSRì—ì„œ ë™ì¼í•œ ì½”ë“œ ì‚¬ìš©</li>
<li>âœ… í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”</li>
<li>âœ… ISRê³¼ë„ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©</li>
</ul>
<hr>
<h2 id="ï¸-ì•„í‚¤í…ì²˜">ğŸ—ï¸ ì•„í‚¤í…ì²˜<a aria-hidden="true" tabindex="-1" href="#ï¸-ì•„í‚¤í…ì²˜"><span class="anchor"></span></a></h2>
<h3 id="ë³€ê²½-ì „-êµ¬ì¡°">ë³€ê²½ ì „ êµ¬ì¡°<a aria-hidden="true" tabindex="-1" href="#ë³€ê²½-ì „-êµ¬ì¡°"><span class="anchor"></span></a></h3>
<pre class="optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="code-highlight"><span class="code-line">Page Component
</span><span class="code-line">  â†“ (props drilling)
</span><span class="code-line">Layout Component
</span><span class="code-line">  â†“ (props drilling)
</span><span class="code-line">MainContent Component
</span><span class="code-line">  â†“ (props drilling)
</span><span class="code-line">ProductList Component (ì‹¤ì œ ì‚¬ìš©)
</span></code></pre>
<h3 id="ë³€ê²½-í›„-êµ¬ì¡°">ë³€ê²½ í›„ êµ¬ì¡°<a aria-hidden="true" tabindex="-1" href="#ë³€ê²½-í›„-êµ¬ì¡°"><span class="anchor"></span></a></h3>
<pre class="optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="code-highlight"><span class="code-line">1. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ ê´€ë¦¬
</span><span class="code-line">   queries/products.ts
</span><span class="code-line">   â””â”€ productsQuery (queryKey + queryFn ë¬¶ìŒ)
</span><span class="code-line">
</span><span class="code-line">2. prefetch/useQueryì—ì„œ ì‚¬ìš©
</span><span class="code-line">   Page Component
</span><span class="code-line">     â†“ (prefetch - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)
</span><span class="code-line">   CorePackProvider (í•˜ì´ë“œë ˆì´íŠ¸)
</span><span class="code-line">     â†“
</span><span class="code-line">   ProductList Component
</span><span class="code-line">     â†“ (useQuery - ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©)
</span><span class="code-line">   React Query Cache (ìºì‹œ íˆíŠ¸ ë³´ì¥!)
</span></code></pre>
<hr>
<h2 id="-ê°œì„ -íš¨ê³¼">ğŸ“ˆ ê°œì„  íš¨ê³¼<a aria-hidden="true" tabindex="-1" href="#-ê°œì„ -íš¨ê³¼"><span class="anchor"></span></a></h2>
<table>
<thead>
<tr>
<th>í•­ëª©</th>
<th>Before</th>
<th>After</th>
<th>ê°œì„ </th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Props ì „ë‹¬ ë ˆë²¨</strong></td>
<td>3-4ë‹¨ê³„</td>
<td>0ë‹¨ê³„</td>
<td><strong>100% ì œê±°</strong></td>
</tr>
<tr>
<td><strong>ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •</strong></td>
<td>í•„ìš”</td>
<td>ë¶ˆí•„ìš”</td>
<td><strong>ìˆ˜ì • ë²”ìœ„ ê°ì†Œ</strong></td>
</tr>
<tr>
<td><strong>ì½”ë“œ ê°€ë…ì„±</strong></td>
<td>ë‚®ìŒ</td>
<td>ë†’ìŒ</td>
<td><strong>í–¥ìƒ</strong></td>
</tr>
<tr>
<td><strong>ëª¨ë“ˆ ë…ë¦½ì„±</strong></td>
<td>ë‚®ìŒ</td>
<td>ë†’ìŒ</td>
<td><strong>í–¥ìƒ</strong></td>
</tr>
<tr>
<td><strong>í™˜ê²½ ì „í™˜</strong></td>
<td>ì½”ë“œ ìˆ˜ì • í•„ìš”</td>
<td>ìˆ˜ì • ë¶ˆí•„ìš”</td>
<td><strong>ìœ ì—°ì„± í–¥ìƒ</strong></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="-í•µì‹¬-êµí›ˆ">ğŸ’¡ í•µì‹¬ êµí›ˆ<a aria-hidden="true" tabindex="-1" href="#-í•µì‹¬-êµí›ˆ"><span class="anchor"></span></a></h2>
<h3 id="1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸ê°€-í•µì‹¬">1. Provider Levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ê°€ í•µì‹¬<a aria-hidden="true" tabindex="-1" href="#1-provider-levelì—ì„œ-í•˜ì´ë“œë ˆì´íŠ¸ê°€-í•µì‹¬"><span class="anchor"></span></a></h3>
<p>SSR ë°ì´í„°ë¥¼ React Query ìºì‹œì— í•˜ì´ë“œë ˆì´íŠ¸í•˜ë©´, CSR í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì •ì„ ìµœì†Œí™”í•˜ëŠ” í•µì‹¬ì…ë‹ˆë‹¤.</p>
<h3 id="2-ì¿¼ë¦¬-í‚¤ì™€-queryfnì„-í•¨ê»˜-ë¬¶ì–´ì„œ-ì‚¬ìš©í•´ì•¼-í•¨">2. ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•´ì•¼ í•¨<a aria-hidden="true" tabindex="-1" href="#2-ì¿¼ë¦¬-í‚¤ì™€-queryfnì„-í•¨ê»˜-ë¬¶ì–´ì„œ-ì‚¬ìš©í•´ì•¼-í•¨"><span class="anchor"></span></a></h3>
<p><strong>í•µì‹¬</strong>: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´(queryKey + queryFn)ë¥¼ ì‚¬ìš©í•´ì•¼ ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<p><strong>ë¬¸ì œ ìƒí™©</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// âŒ ì˜ëª»ëœ ì˜ˆ: prefetchì™€ useQueryì—ì„œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì •ì˜</span>
</span><span class="code-line"><span class="token comment">// prefetchì—ì„œ</span>
</span><span class="code-line"><span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  queryFn<span class="token operator">:</span> fetchProducts<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// useQueryì—ì„œ (ì¿¼ë¦¬ í‚¤ë‚˜ í•¨ìˆ˜ê°€ ì¡°ê¸ˆì´ë¼ë„ ë‹¤ë¥´ë©´ ìºì‹œ ë¯¸ìŠ¤!)</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// ë™ì¼í•˜ì§€ë§Œ</span>
</span><span class="code-line">  <span class="token function-variable function">queryFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetchProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ê°ì‹¸ë©´ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ì¸ì‹!</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre>
<p><strong>í•´ê²° ë°©ë²•</strong>:</p>
<pre class="language-typescript optimized-code-block" style="max-height: 600px; overflow-y: auto;"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ì¿¼ë¦¬ ê°ì²´ë¥¼ ë¬¶ì–´ì„œ ì¬ì‚¬ìš©</span>
</span><span class="code-line"><span class="token keyword">const</span> productsQuery <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'products'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  queryFn<span class="token operator">:</span> fetchProducts<span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// prefetchì—ì„œ</span>
</span><span class="code-line"><span class="token keyword">await</span> queryClient<span class="token punctuation">.</span><span class="token function">prefetchQuery</span><span class="token punctuation">(</span>productsQuery<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// useQueryì—ì„œ (ë™ì¼í•œ ê°ì²´ ì‚¬ìš©)</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span>productsQuery<span class="token punctuation">)</span>
</span></code></pre>
<p>ì´ë ‡ê²Œ í•˜ë©´ prefetchì—ì„œ ì¤€ë¹„í•œ ë°ì´í„°ë¥¼ useQueryì—ì„œ ì •í™•íˆ ì°¾ì„ ìˆ˜ ìˆì–´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë©ë‹ˆë‹¤.</p>
<h3 id="3-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜ë¥¼-ë¨¼ì €-ê´€ë¦¬í•˜ê³ -prefetchusequeryì—ì„œ-ì‚¬ìš©í•˜ëŠ”-êµ¬ì¡°ê°€-íš¨ê³¼ì ">3. ì¿¼ë¦¬ í‚¤ì™€ í•¨ìˆ˜ë¥¼ ë¨¼ì € ê´€ë¦¬í•˜ê³  prefetch/useQueryì—ì„œ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ê°€ íš¨ê³¼ì <a aria-hidden="true" tabindex="-1" href="#3-ì¿¼ë¦¬-í‚¤ì™€-í•¨ìˆ˜ë¥¼-ë¨¼ì €-ê´€ë¦¬í•˜ê³ -prefetchusequeryì—ì„œ-ì‚¬ìš©í•˜ëŠ”-êµ¬ì¡°ê°€-íš¨ê³¼ì "><span class="anchor"></span></a></h3>
<p>ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ ë¨¼ì € ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ê³ , prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ ì¼ê´€ì„±ì´ ë³´ì¥ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ê° ë ˆì´ì–´ì˜ ì±…ì„ì´ ëª…í™•í•´ì§€ê³  ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.</p>
<h3 id="4-ëª¨ë“ˆ-ë…ë¦½ì„±ì„-ìœ„í•´-ë‚´ë¶€ì—ì„œ-ì²˜ë¦¬">4. ëª¨ë“ˆ ë…ë¦½ì„±ì„ ìœ„í•´ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬<a aria-hidden="true" tabindex="-1" href="#4-ëª¨ë“ˆ-ë…ë¦½ì„±ì„-ìœ„í•´-ë‚´ë¶€ì—ì„œ-ì²˜ë¦¬"><span class="anchor"></span></a></h3>
<p>ëª¨ë“ˆì´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë‚´ë¶€ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ í•˜ë©´, ì‚¬ìš©ì²˜ì˜ ë””íœë˜ì‹œë¥¼ ì œê±°í•  ìˆ˜ ìˆê³  ëª¨ë“ˆ ë…ë¦½ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.</p>
<h3 id="5-íƒ€ì…-ì•ˆì „ì„±ì„-ìœ ì§€í•´ì•¼-í•¨">5. íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•´ì•¼ í•¨<a aria-hidden="true" tabindex="-1" href="#5-íƒ€ì…-ì•ˆì „ì„±ì„-ìœ ì§€í•´ì•¼-í•¨"><span class="anchor"></span></a></h3>
<p>React Queryì˜ íƒ€ì…ì„ í™œìš©í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. <code class="inline-code">useQuery</code>ì˜ ì œë„¤ë¦­ íƒ€ì…ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ê³ , ì¿¼ë¦¬ í‚¤ë¥¼ <code class="inline-code">as const</code>ë¡œ ì •ì˜í•˜ë©´ íƒ€ì… ì²´í¬ê°€ ê°•í™”ë©ë‹ˆë‹¤.</p>
<h3 id="6-ìºì‹±-ì „ëµì„-ì‹ ì¤‘í•˜ê²Œ-ì„¤ê³„í•´ì•¼-í•¨">6. ìºì‹± ì „ëµì„ ì‹ ì¤‘í•˜ê²Œ ì„¤ê³„í•´ì•¼ í•¨<a aria-hidden="true" tabindex="-1" href="#6-ìºì‹±-ì „ëµì„-ì‹ ì¤‘í•˜ê²Œ-ì„¤ê³„í•´ì•¼-í•¨"><span class="anchor"></span></a></h3>
<p><code class="inline-code">staleTime</code>, <code class="inline-code">cacheTime</code> ë“±ì„ ì ì ˆíˆ ì„¤ì •í•˜ì—¬ ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ë°©ì§€í•˜ê³ , ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œì¼œì•¼ í•©ë‹ˆë‹¤. prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìºì‹œ íˆíŠ¸ê°€ ë³´ì¥ë˜ì–´ SSR ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<hr>
<h2 id="-ê²°ë¡ ">ğŸ¯ ê²°ë¡ <a aria-hidden="true" tabindex="-1" href="#-ê²°ë¡ "><span class="anchor"></span></a></h2>
<p>React Query ë ˆì´ì–´ êµ¬ì¶•ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ì„±ê³¼ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤:</p>
<ol>
<li>âœ… <strong>Props Drilling ì™„ì „ ì œê±°</strong>: ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì˜´</li>
<li>âœ… <strong>ìºì‹œ ë¯¸ìŠ¤ ë°©ì§€</strong>: prefetchì™€ useQueryì—ì„œ ë™ì¼í•œ ì¿¼ë¦¬ ê°ì²´ ì‚¬ìš©ìœ¼ë¡œ ìºì‹œ íˆíŠ¸ ë³´ì¥</li>
<li>âœ… <strong>SSR/CSR í™˜ê²½ í†µí•©</strong>: ë™ì¼í•œ ì½”ë“œë¡œ ë‘ í™˜ê²½ ëª¨ë‘ ì§€ì›</li>
<li>âœ… <strong>ëª¨ë“ˆ ë…ë¦½ì„± í™•ë³´</strong>: ì‚¬ìš©ì²˜ react-query ë””íœë˜ì‹œ ì œê±°</li>
<li>âœ… <strong>ì½”ë“œ ê°€ë…ì„± í–¥ìƒ</strong>: ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ì˜ ë¶ˆí•„ìš”í•œ props ì „ë‹¬ ì œê±°</li>
<li>âœ… <strong>ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ</strong>: í™˜ê²½ ì „í™˜ ì‹œ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”, ì¿¼ë¦¬ ê°ì²´ ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •</li>
</ol>
<p>ì´ë²ˆ ì‘ì—…ì„ í†µí•´ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œì˜ ìƒíƒœ ê´€ë¦¬ì™€ ë°ì´í„° í˜ì¹­ ì•„í‚¤í…ì²˜ ì„¤ê³„ ê²½í—˜ì„ ìŒ“ì•˜ê³ , React Queryì˜ prefetch, í•˜ì´ë“œë ˆì´íŠ¸, ìºì‹± ì „ëµ, ì¿¼ë¦¬ í‚¤ì™€ queryFnì„ í•¨ê»˜ ë¬¶ì–´ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ ë“±ì„ ì‹¤ë¬´ì— ì ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<hr>
<h2 id="-ì°¸ê³ -ìë£Œ">ğŸ“š ì°¸ê³  ìë£Œ<a aria-hidden="true" tabindex="-1" href="#-ì°¸ê³ -ìë£Œ"><span class="anchor"></span></a></h2>
<ul>
<li><a href="https://tanstack.com/query/latest">TanStack Query Documentation</a></li>
<li><a href="https://nextjs.org/docs/app/building-your-application/data-fetching">Next.js Data Fetching</a></li>
<li><a href="https://tanstack.com/query/latest/docs/react/guides/ssr">React Query SSR Guide</a></li>
</ul>2:["$","$L9",null,{"post":{"slug":"/develop/React Query ê°œì„ ","frontmatter":{"title":"React Query ê°œì„ ","date":"2025-12-28T00:00:00.000Z","category":"develop","tags":["React-Query","Next.js","SSR","Props-Drilling","ì•„í‚¤í…ì²˜","ëª¨ë…¸ë ˆí¬"],"draft":false},"content":"$a","html":"$b","excerpt":"> Next.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.  ## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”  ### ë°°ê²½  - **í”„ë ˆì„ì›Œí¬**: Next"},"previousPost":{"slug":"/develop/ê°œë°œ í”„ë¡œì„¸ìŠ¤ ìë™í™” êµ¬ì¶•","frontmatter":{"title":"ê°œë°œ í”„ë¡œì„¸ìŠ¤ ìë™í™” êµ¬ì¶•","date":"2025-12-28T00:00:00.000Z","category":"develop","tags":["ìë™í™”","GitHub-Actions","JIRA","CI/CD","ê°œë°œí”„ë¡œì„¸ìŠ¤","ëŒ€ì‹œë³´ë“œ","DevOps"],"draft":false}},"nextPost":{"slug":"/develop/Next.js ë¹Œë“œ ìµœì í™”","frontmatter":{"title":"Next.js ë¹Œë“œ ìµœì í™”","date":"2025-12-28T00:00:00.000Z","category":"develop","tags":["Next.js","ë¹Œë“œìµœì í™”","Webpack","CI/CD","ì„±ëŠ¥ìµœì í™”"],"draft":false}}}]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"React Query ê°œì„ "}],["$","meta","3",{"name":"description","content":"> Next.js ê¸°ë°˜ì˜ ëŒ€ê·œëª¨ ëª¨ë…¸ë ˆí¬ì—ì„œ React Query ë ˆì´ì–´ë¥¼ êµ¬ì¶•í•˜ì—¬ props drillingì„ ì œê±°í•˜ê³  SSR/CSR í™˜ê²½ì„ í†µí•© ì²˜ë¦¬í•œ ê²½í—˜ì„ ê³µìœ í•©ë‹ˆë‹¤. Provider levelì—ì„œ í•˜ì´ë“œë ˆì´íŠ¸ ëŒ€ì‘ìœ¼ë¡œ ì‚¬ìš©ì²˜ì˜ react-query ë””íœë˜ì‹œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.  ## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”  ### ë°°ê²½  - **í”„ë ˆì„ì›Œí¬**: Next"}]]
1:null
