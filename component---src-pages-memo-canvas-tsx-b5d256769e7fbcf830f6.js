"use strict";(self.webpackChunkyuni_q_blog=self.webpackChunkyuni_q_blog||[]).push([[9286],{8976:function(t,e,n){n.r(e);var l=n(4506),i=n(6540);e.default=()=>{var t,e;const n=(0,i.useRef)(null),{0:o,1:u}=(0,i.useState)([]),{0:f,1:r}=(0,i.useState)(null),{0:c,1:s}=(0,i.useState)(null),{0:a,1:h}=(0,i.useState)(!1),{0:d,1:x}=(0,i.useState)(!1),{0:g,1:p}=(0,i.useState)(!1),{0:w,1:y}=(0,i.useState)({x:0,y:0});return(0,i.useEffect)((()=>{const t=n.current;if(null===t)return;const e=t.getContext("2d");null!==e&&(e.clearRect(0,0,t.width,t.height),e.fillStyle=g?"#333":"#fff",e.fillRect(0,0,t.width,t.height),o.forEach((t=>{e.fillStyle=g?"#555":"#ffeb3b",e.fillRect(t.x,t.y,t.width,t.height),e.strokeStyle=g?"#fff":"#000",e.strokeRect(t.x,t.y,t.width,t.height),e.fillStyle=g?"#fff":"#000",e.font="16px Arial";const n=t.text.split(" ");let l="";let i=t.y+20;n.forEach((n=>{const o=l+n+" ";e.measureText(o).width>t.width-20&&""!==l?(e.fillText(l,t.x+10,i),l=n+" ",i+=20):l=o}));let o=l,u=e.measureText(o),f=u.width;for(;f>t.width-20;){let n=o.length-1;for(;e.measureText(o.substring(0,n)).width>t.width-20;)n--;e.fillText(o.substring(0,n),t.x+10,i),o=o.substring(n),i+=20,u=e.measureText(o),f=u.width}e.fillText(o,t.x+10,i)})))}),[o,g]),i.createElement("div",{onClick:function(t){null!==c&&t.stopPropagation()}},i.createElement("nav",{style:{background:g?"#333":"#fff",padding:"10px"}},i.createElement("button",{onClick:function(){p((t=>!t))}},g?"라이트 모드":"다크 모드")),i.createElement("canvas",{ref:n,width:"800",height:"600",onMouseDown:function(t){if(null!==c)return;t.preventDefault(),2===t.button?x(!0):x(!1);const e=n.current;if(null===e)return;const i=e.getBoundingClientRect(),f=t.clientX-i.left,s=t.clientY-i.top,a=o.findIndex((t=>f>=t.x&&f<=t.x+t.width&&s>=t.y&&s<=t.y+t.height));if(-1!==a)r(a),y({x:f-o[a].x,y:s-o[a].y}),f>=o[a].x+o[a].width-10&&s>=o[a].y+o[a].height-10&&h(!0);else if(2===t.button){const t={x:f,y:s,width:100,height:100,text:"New Post-It"};u([].concat((0,l.A)(o),[t]))}},onMouseMove:function(t){if(null===f||d||null!==c)return;const e=n.current;if(null===e)return;const l=e.getBoundingClientRect(),i=t.clientX-l.left,o=t.clientY-l.top;u((t=>t.map(((t,e)=>e===f?a?{...t,width:Math.max(i-t.x,10),height:Math.max(o-t.y,10)}:{...t,x:i-w.x,y:o-w.y}:t))))},onMouseUp:function(){r(null),h(!1),x(!1)},onDoubleClick:function(t){const e=n.current;if(null===e)return;const l=e.getBoundingClientRect(),i=t.clientX-l.left,u=t.clientY-l.top,f=o.findIndex((t=>i>=t.x&&i<=t.x+t.width&&u>=t.y&&u<=t.y+t.height));-1!==f&&s(f)},onContextMenu:t=>t.preventDefault(),style:{border:"1px solid #000",background:g?"#333":"#fff"}}),null!==c&&i.createElement("textarea",{value:o[c].text,onChange:function(t){if(null===c)return;const e=t.target.value;u((t=>t.map(((t,n)=>n===c?{...t,text:e}:t))))},onBlur:function(){s(null)},onKeyDown:function(t){"Escape"===t.key&&(s(null),r(null))},style:{position:"absolute",left:o[c].x+(null===(t=n.current)||void 0===t?void 0:t.offsetLeft),top:o[c].y+(null===(e=n.current)||void 0===e?void 0:e.offsetTop),width:o[c].width,height:o[c].height,background:g?"#555":"#ffeb3b",color:g?"#fff":"#000",border:"none",resize:"none",overflow:"hidden",boxSizing:"border-box",padding:"10px",font:"16px Arial",whiteSpace:"pre-wrap"}}))}}}]);
//# sourceMappingURL=component---src-pages-memo-canvas-tsx-b5d256769e7fbcf830f6.js.map