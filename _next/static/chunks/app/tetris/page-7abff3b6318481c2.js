(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1318],{9813:function(e,r,t){Promise.resolve().then(t.bind(t,2687))},2687:function(e,r,t){"use strict";t.r(r);var n=t(2577),c=t(727);let u=[{name:"s",center:!1,numCode:1,color:"red",currentShapeIndex:0,shape:[[[0,0,0],[0,1,1],[0,1,1]]]},{name:"t",center:!0,numCode:2,color:"orange",currentShapeIndex:0,shape:[[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]],[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]]]},{name:"z",center:!0,numCode:3,color:"yellow",currentShapeIndex:0,shape:[[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]],[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]]},{name:"zr",center:!0,numCode:4,color:"green",startRow:1,currentShapeIndex:0,shape:[[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]],[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]]},{name:"l",center:!0,numCode:5,color:"blue",currentShapeIndex:0,shape:[[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]]]},{name:"lr",center:!0,numCode:6,color:"navy",currentShapeIndex:0,shape:[[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]],[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]]]},{name:"b",center:!0,numCode:7,color:"violet",currentShapeIndex:0,shape:[[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]]}],l=["red","orange","yellow","green","blue","navy","violet"],o=e=>(null!=e?e:0)>0&&(null!=e?e:0)<10,a=e=>void 0===e||(null!=e?e:0)>=10;r.default=()=>{let[e,r]=(0,c.useState)(Array(20).fill([]).map(()=>Array(10).fill(0))),[t,d]=(0,c.useState)([,,,,].fill([]).map(()=>[,,,,].fill(0))),[h,s]=(0,c.useState)(0),i=(0,c.useRef)(null),f=(0,c.useRef)(null),p=(0,c.useRef)(!0),m=(0,c.useRef)(null),v=(0,c.useRef)([0,3]),g=e=>{let r=[];e.forEach((e,t)=>{let n=0;e.forEach((e,r)=>{e>0&&n++}),10===n&&r.push(t)});let t=r.length;e=e.filter((e,t)=>!r.includes(t));for(let r=0;r<t;r++)e.unshift([0,0,0,0,0,0,0,0,0,0]);return s(e=>e+=t**2),e},x=()=>{i.current&&r(e=>{let r=[v.current[0]+1,v.current[1]],t=!0,n=i.current,c=n.shape[n.currentShapeIndex];for(let r=v.current[0];r<v.current[0]+c.length;r++)if(!(r<0)&&!(r>=20))for(let n=v.current[1];n<v.current[1]+c.length;n++)o(e[r][n])&&a(e[r+1]&&e[r+1][n])&&(t=!1);t?v.current=r:p.current=!0;let u=[...e.map(e=>[...e])];for(let r=u.length-1;r>=0;r--)e[r].forEach((e,n)=>{var c;e>0&&e<10&&(null===(c=u[r+1])||void 0===c?void 0:c[n])<10&&t?(u[r+1][n]=e,u[r][n]=0):0!==e&&e<10&&(u[r][n]=10*e)});let l=g(u);return JSON.stringify(u)!==JSON.stringify(e)?l:e})};return(0,c.useEffect)(()=>{d(e=>e.map((e,r)=>e.map((e,t)=>{var n,c,u,l;return(null==f?void 0:null===(l=f.current)||void 0===l?void 0:null===(u=l.shape)||void 0===u?void 0:null===(c=u[0])||void 0===c?void 0:null===(n=c[r])||void 0===n?void 0:n[t])&&f.current.shape[0][r][t]?f.current.numCode:0})))},[f.current]),(0,c.useEffect)(()=>{let e=e=>{i.current&&r(r=>{switch(e.code){case"ArrowLeft":{let e=[v.current[0],v.current[1]-1],t=!0,n=i.current,c=n.shape[n.currentShapeIndex];for(let e=v.current[0];e<v.current[0]+c.length&&t;e++)for(let n=v.current[1];n<v.current[1]+c.length;n++)r[e]&&r[e][n]&&o(r[e][n])&&a(r[e]&&r[e][n-1])&&(t=!1);t&&(v.current=e,r.forEach((e,t)=>{for(let n=0;n<e.length;n++){let c=e[n];0===r[t][n-1]&&c<10&&(r[t][n-1]=c,r[t][n]=0)}}));break}case"ArrowRight":{let e=[v.current[0],v.current[1]+1],t=!0,n=i.current,c=n.shape[n.currentShapeIndex];for(let e=v.current[0];e<v.current[0]+c.length&&t;e++)for(let n=v.current[1];n<v.current[1]+c.length;n++)r[e]&&r[e][n]&&o(r[e][n])&&a(r[e]&&r[e][n+1])&&(t=!1);t&&(v.current=e,r.forEach((e,t)=>{for(let n=e.length-1;n>=0;n--){let c=e[n];0===r[t][n+1]&&c<10&&(r[t][n+1]=c,r[t][n]=0)}}));break}case"ArrowDown":x()}return r})},t=e=>{switch(e.code){case"Space":for(;!p.current;)x();break;case"ArrowUp":r(e=>{let r=i.current,t=r.shape[r.currentShapeIndex],n=!0,c=r.currentShapeIndex+1===r.shape.length?0:r.currentShapeIndex+1,u=r.shape[c];for(let r=v.current[0];r<v.current[0]+t.length&&n;r++)for(let c=v.current[1];c<v.current[1]+t.length;c++)e[r]&&u[r-v.current[0]][c-v.current[1]]>0&&a(e[r]&&e[r][c])&&(n=!1);if(n){for(;v.current[0]<0;)x();for(let n=v.current[0];n<v.current[0]+t.length;n++)for(let c=v.current[1];c<v.current[1]+t.length;c++){if(!e[n])continue;let t=u[n-v.current[0]][c-v.current[1]];t>0&&0===e[n][c]?e[n][c]=r.numCode:0===t&&e[n][c]&&e[n][c]<10&&(e[n][c]=0)}r.currentShapeIndex=c}return e})}};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),m.current=setInterval(()=>x(),300),()=>{m.current&&clearInterval(m.current),window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,c.useEffect)(()=>{p.current&&(p.current=!1,f.current||(f.current=u[Math.floor(Math.random()*u.length)]),i.current?(i.current=f.current,f.current=u[Math.floor(Math.random()*u.length)]):i.current=u[Math.floor(Math.random()*u.length)],v.current=[-1,3],i.current&&(i.current.shape[0].slice(1).forEach((r,t)=>{r.forEach((r,n)=>{r&&e[t][n+3]&&(m.current&&clearInterval(m.current),alert("게임오버"))})}),r(e=>{var r;let t=[...e.map(e=>[...e])];if(null===(r=i.current)||void 0===r?void 0:r.shape){let e=i.current;e.shape[0].slice(1).forEach((r,n)=>{r.forEach((r,c)=>{t[n][c+3]=r?e.numCode:0})})}return t})))},[p.current]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("table",{className:"w-auto border-collapse [&_td]:border [&_td]:border-black [&_td]:w-[30px] [&_td]:h-[30px] [&_td]:p-0",children:(0,n.jsx)("tbody",{children:e.map((r,t)=>(0,n.jsx)("tr",{children:r.map((r,c)=>(0,n.jsx)("td",{style:{backgroundColor:e[t][c]>=10?l[e[t][c]/10-1]:l[e[t][c]-1]},children:r},"".concat(r,"-").concat(c)))},"".concat(r,"-").concat(t)))})}),(0,n.jsx)("table",{className:"w-auto border-collapse [&_td]:border [&_td]:border-black [&_td]:w-[30px] [&_td]:h-[30px] [&_td]:p-0",children:(0,n.jsx)("tbody",{children:t.map((e,r)=>(0,n.jsx)("tr",{children:e.map((e,c)=>(0,n.jsx)("td",{style:{backgroundColor:l[t[r][c]-1]},children:e},"".concat(e,"-").concat(c)))},"".concat(e,"-").concat(r)))})}),(0,n.jsx)("div",{children:h})]})}}},function(e){e.O(0,[1434,5647,1744],function(){return e(e.s=9813)}),_N_E=e.O()}]);