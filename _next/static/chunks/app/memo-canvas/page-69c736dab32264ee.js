(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8730],{892:function(t,e,n){Promise.resolve().then(n.bind(n,1345))},1345:function(t,e,n){"use strict";n.r(e);var l=n(2577),i=n(727);e.default=()=>{var t,e,n,u;let o=(0,i.useRef)(null),[f,r]=(0,i.useState)([]),[h,c]=(0,i.useState)(null),[d,s]=(0,i.useState)(null),[a,x]=(0,i.useState)(!1),[g,p]=(0,i.useState)(!1),[w,y]=(0,i.useState)(!1),[b,v]=(0,i.useState)({x:0,y:0});return(0,i.useEffect)(()=>{let t=o.current;if(null===t)return;let e=t.getContext("2d");null!==e&&(e.clearRect(0,0,t.width,t.height),e.fillStyle=w?"#333":"#fff",e.fillRect(0,0,t.width,t.height),f.forEach(t=>{e.fillStyle=w?"#555":"#ffeb3b",e.fillRect(t.x,t.y,t.width,t.height),e.strokeStyle=w?"#fff":"#000",e.strokeRect(t.x,t.y,t.width,t.height),e.fillStyle=w?"#fff":"#000",e.font="16px Arial";let n=t.text.split(" "),l="",i=t.y+20;n.forEach(n=>{let u=l+n+" ";e.measureText(u).width>t.width-20&&""!==l?(e.fillText(l,t.x+10,i),l=n+" ",i+=20):l=u});let u=l,o=e.measureText(u),f=o.width;for(;f>t.width-20;){let n=u.length-1;for(;e.measureText(u.substring(0,n)).width>t.width-20;)n--;e.fillText(u.substring(0,n),t.x+10,i),u=u.substring(n),i+=20,f=(o=e.measureText(u)).width}e.fillText(u,t.x+10,i)}))},[f,w]),(0,l.jsxs)("div",{onClick:function(t){null!==d&&t.stopPropagation()},children:[(0,l.jsx)("nav",{style:{background:w?"#333":"#fff",padding:"10px"},children:(0,l.jsx)("button",{onClick:function(){y(t=>!t)},children:w?"라이트 모드":"다크 모드"})}),(0,l.jsx)("canvas",{ref:o,width:"800",height:"600",onMouseDown:function(t){if(null!==d)return;t.preventDefault(),2===t.button?p(!0):p(!1);let e=o.current;if(null===e)return;let n=e.getBoundingClientRect(),l=t.clientX-n.left,i=t.clientY-n.top,u=f.findIndex(t=>l>=t.x&&l<=t.x+t.width&&i>=t.y&&i<=t.y+t.height);-1!==u?(c(u),v({x:l-f[u].x,y:i-f[u].y}),l>=f[u].x+f[u].width-10&&i>=f[u].y+f[u].height-10&&x(!0)):2===t.button&&r([...f,{x:l,y:i,width:100,height:100,text:"New Post-It"}])},onMouseMove:function(t){if(null===h||g||null!==d)return;let e=o.current;if(null===e)return;let n=e.getBoundingClientRect(),l=t.clientX-n.left,i=t.clientY-n.top;r(t=>t.map((t,e)=>e===h?a?{...t,width:Math.max(l-t.x,10),height:Math.max(i-t.y,10)}:{...t,x:l-b.x,y:i-b.y}:t))},onMouseUp:function(){c(null),x(!1),p(!1)},onDoubleClick:function(t){let e=o.current;if(null===e)return;let n=e.getBoundingClientRect(),l=t.clientX-n.left,i=t.clientY-n.top,u=f.findIndex(t=>l>=t.x&&l<=t.x+t.width&&i>=t.y&&i<=t.y+t.height);-1!==u&&s(u)},onContextMenu:t=>t.preventDefault(),style:{border:"1px solid #000",background:w?"#333":"#fff"}}),null!==d&&(0,l.jsx)("textarea",{value:f[d].text,onChange:function(t){if(null===d)return;let e=t.target.value;r(t=>t.map((t,n)=>n===d?{...t,text:e}:t))},onBlur:function(){s(null)},onKeyDown:function(t){"Escape"===t.key&&(s(null),c(null))},style:{position:"absolute",left:f[d].x+(null!==(n=null===(t=o.current)||void 0===t?void 0:t.offsetLeft)&&void 0!==n?n:0),top:f[d].y+(null!==(u=null===(e=o.current)||void 0===e?void 0:e.offsetTop)&&void 0!==u?u:0),width:f[d].width,height:f[d].height,background:w?"#555":"#ffeb3b",color:w?"#fff":"#000",border:"none",resize:"none",overflow:"hidden",boxSizing:"border-box",padding:"10px",font:"16px Arial",whiteSpace:"pre-wrap"}})]})}}},function(t){t.O(0,[1434,5647,1744],function(){return t(t.s=892)}),_N_E=t.O()}]);