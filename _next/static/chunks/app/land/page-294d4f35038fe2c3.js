(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5719],{4585:function(t,i,e){Promise.resolve().then(e.bind(e,9195))},9195:function(t,i,e){"use strict";e.r(i);var s=e(2577),a=e(727);class h{draw(){this.cm.context&&(this.cm.context.beginPath(),this.cm.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.cm.context.fill())}constructor(t,i,e){this.x=t,this.y=i,this.radius=Math.random()+.5,this.speed=3*Math.random()+.5,this.cm=e}}class n{draw(){if(this.cm.context){this.cm.context.strokeStyle=this.gradient,this.cm.context.beginPath(),this.cm.context.moveTo(this.x,this.y),this.cm.context.lineTo(this.x,this.y-this.height),this.cm.context.stroke();for(let t=0;t<this.particles.length;t++){let i=this.particles[t];i.y-=i.speed,i.y<this.y-this.height&&(i.y=this.y),i.draw()}}}constructor(t,i,e,s){if(this.x=t,this.y=i,this.height=300,!e.context)throw Error("Context is not initialized");let a=e.canvasHeight-(this.height+(e.canvasHeight-this.y));this.gradient=e.context.createLinearGradient(0,a,0,this.y),this.gradient.addColorStop(0,"rgba(".concat(e.colors2[s],", 0)")),this.gradient.addColorStop(.5,"rgba(".concat(e.colors2[s],", 0.5)")),this.gradient.addColorStop(.75,"rgba(".concat(e.colors2[s],", 0.5)")),this.gradient.addColorStop(1,"rgba(".concat(e.colors2[s],", 1)")),this.particles=[];for(let t=0;t<30;t++)this.particles.push(new h(this.x,this.y,e));this.cm=e}}class r{draw(){if(this.cm.context){this.cm.context.fillStyle=this.gradient,this.cm.context.save(),this.cm.context.filter="blur(20px)",this.cm.context.beginPath(),this.cm.context.ellipse(this.x,this.y,2*this.width+5*Math.abs(Math.sin(this.angle*Math.PI/180*30)),.5*this.width+5*Math.abs(Math.sin(this.angle*Math.PI/180*30)),0,0,2*Math.PI),this.cm.context.fill(),this.angle++,this.cm.context.filter="blur(5px)",this.cm.context.beginPath(),this.cm.context.ellipse(this.x,this.y,this.width,.25*this.width,0,0,2*Math.PI),this.cm.context.fill(),this.cm.context.fillRect(this.x-.5*this.width,this.cm.canvasHeight-(this.height+(this.cm.canvasHeight-this.y)),this.width,this.height),this.cm.context.restore();for(let t=0;t<this.lines.length;t++)this.lines[t].draw()}}constructor(t,i,e,s){this.x=t,this.y=i,this.yForOrder=this.y,this.width=20,this.height=300,this.angle=0,this.lines=[];for(let t=0;t<5;t++)this.lines.push(new n(this.x+(Math.random()*this.width-.5*this.width),this.y,e,s));if(!e.context)throw Error("Context is not initialized");this.gradient=e.context.createLinearGradient(0,e.canvasHeight-(this.height+(e.canvasHeight-this.y)),0,this.y),this.gradient.addColorStop(0,"rgba(".concat(e.colors[s],", 0)")),this.gradient.addColorStop(.5,"rgba(".concat(e.colors[s],", 0.5)")),this.gradient.addColorStop(.75,"rgba(".concat(e.colors[s],", 0.5)")),this.gradient.addColorStop(1,"rgba(".concat(e.colors[s],", 1)")),this.cm=e}}i.default=()=>{let t={canvas:void 0,context:void 0,canvasWidth:0,canvasHeight:0,colors:["222, 35, 18","238, 150, 63","246, 228, 0","110, 210, 70","63, 145, 255","185, 22, 226"],colors2:["255, 160, 150","255, 200, 150","255, 250, 180","195, 255, 170","200, 220, 255","239, 173, 225"],charactersSrc:{somun:"/images/sprite-somun.png",ji:"/images/sprite-ji.png"},playedFrame:0,currentFrame:0};return(0,a.useEffect)(()=>{let i=document.querySelector("#the-canvas");if(!i)return;t.canvas=i,t.context=i.getContext("2d")||void 0;let e=(window.devicePixelRatio,1),s={x:0,y:0},a=[],h=[],n=[],o=0,d=()=>{console.log(window.innerWidth,window.innerHeight),t.canvas&&t.context&&(t.canvasWidth=window.innerWidth,t.canvasHeight=window.innerHeight,t.canvas.width=t.canvasWidth*e,t.canvas.height=t.canvasHeight*e,e>1&&t.context.scale(e,e))},l=()=>{let i=new c(t.charactersSrc.somun,"underAttack",.5*t.canvasWidth-256+64,.5*t.canvasHeight-64,t),e=new c(t.charactersSrc.ji,"attack",.5*t.canvasWidth-64,.5*t.canvasHeight-64,t);h.push(i),h.push(e),h.forEach(t=>n.push(t))},m=()=>{if(!t.context||!t.canvas)return;let i=t.context,e=t.canvas;i.clearRect(0,0,e.width,e.height),n.forEach(e=>{if(e instanceof c&&e.draw(),e instanceof r){let s=e.y/t.canvasHeight+1;i.save(),i.translate(e.x,e.y),i.scale(s,s),i.translate(-e.x,-e.y),e.draw(),i.restore()}}),t.playedFrame++,t.playedFrame%20==0&&(t.playedFrame>1e10&&(t.playedFrame=0),0===t.currentFrame?t.currentFrame=1:t.currentFrame=0),requestAnimationFrame(m)},g=()=>{d(),h.length<2&&l(),m()},x=i=>{if(o>=t.colors.length||!t.canvas)return;s.x=i.clientX-t.canvas.getBoundingClientRect().left,s.y=i.clientY-t.canvas.getBoundingClientRect().top;let e=new r(s.x,s.y,t,o);a.push(e),n.push(e),n.sort((t,i)=>t.yForOrder-i.yForOrder),++o>=t.colors.length&&(h[0].updateAction("attack"),h[1].updateAction("underAttack"))};return t.canvas.addEventListener("click",x),window.addEventListener("resize",g),window.addEventListener("load",g),g(),()=>{window.removeEventListener("click",x),window.removeEventListener("resize",g),window.removeEventListener("load",g)}},[]),(0,s.jsx)("canvas",{id:"the-canvas",className:"bg-[url(/images/BG-city.jpg)] bg-no-repeat bg-center bg-cover"})};class c{setAction(){switch(this.action){case"attack":this.startFrame=0,this.endFrame=1;return;case"underAttack":this.startFrame=2,this.endFrame=3;return;default:this.startFrame=0,this.endFrame=0}this.frame=this.startFrame}updateAction(t){this.action=t,this.setAction()}draw(){this.cm.context&&(this.cm.playedFrame%20==0&&(0===this.cm.currentFrame?this.frame=this.endFrame:this.frame=this.startFrame),this.cm.context.drawImage(this.image,256*this.frame,0,256,256,this.x,this.y,this.width,this.height))}constructor(t,i,e,s,a){this.startFrame=0,this.endFrame=0,this.frame=0,this.width=256,this.height=256,this.x=e,this.y=s,this.yForOrder=this.y+this.height-24,this.action=i,this.image=new Image,this.image.src=t,this.setAction(),this.cm=a}}}},function(t){t.O(0,[1434,5647,1744],function(){return t(t.s=4585)}),_N_E=t.O()}]);