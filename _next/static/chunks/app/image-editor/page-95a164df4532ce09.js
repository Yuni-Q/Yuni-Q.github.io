(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7522],{47:function(t,e,n){Promise.resolve().then(n.bind(n,3887))},3887:function(t,e,n){"use strict";n.r(e);var i=n(2577),l=n(727);let h="/favicon.png",o={x:0,y:0,width:0,height:0},u={x:0,y:0,width:0,height:0};e.default=()=>{let t=(0,l.useRef)(null),e=(0,l.useRef)(null),n=(0,l.useRef)(null),[r,d]=(0,l.useState)(!1),[a,c]=(0,l.useState)(0),[s,f]=(0,l.useState)(!1),[g,x]=(0,l.useState)(o),[w,v]=(0,l.useState)([]);function y(){let n=e.current;if(null===n)return;let i=n.getContext("2d"),l=m(h);l.onload=function(){let{x:t,y:e,width:h,height:o}=p(l,a);C(n,M({width:h,height:o},a)),null==i||i.rotate(Math.PI/180*a),null==i||i.drawImage(l,t,e,h,o),w.forEach(t=>{var e,n;let{...l}=t,h=Math.abs(a)%360,o=null!==(e=l.maxWidth)&&void 0!==e?e:800,d=null!==(n=l.maxHeight)&&void 0!==n?n:600;90===h?(u.x=d-l.y-l.height,u.y=l.x,u.width=l.height,u.height=l.width):180===h?(u.x=o-l.x-l.width,u.y=d-l.y-l.height,u.width=l.width,u.height=l.height):270===h?(u.x=l.y,u.y=o-l.x-l.width,u.width=l.height,u.height=l.width):(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height);let c=null==r?void 0:r.getImageData(u.x,u.y,u.width,u.height);null==i||i.putImageData(c,u.x,u.y)}),null==i||i.restore()};let o=t.current,r=null==o?void 0:o.getContext("2d")}function b(){if(!s)return;let e=t.current,n=null==e?void 0:e.getContext("2d");if(0!==g.width&&0!==g.height){var i,l;let{x:t,y:h,width:o,height:r}=g;if(!(null==n?void 0:n.canvas))return;let d=null!==(i=n.canvas.height)&&void 0!==i?i:600,c=null!==(l=n.canvas.width)&&void 0!==l?l:800;90===a&&(console.log("??",g),u.x=h,u.y=d-t-o,u.width=r,u.height=o),180===a&&(u.x=c-t-o,u.y=d-h-r,u.width=o,u.height=r),270===a&&(u.x=(null==n?void 0:n.canvas.width)-h-r,u.y=t,u.width=r,u.height=o),0===a&&(u.x=t,u.y=h,u.width=o,u.height=r),v(t=>[...t,{x:u.x,y:u.y,width:u.width,height:u.height,maxWidth:null==e?void 0:e.width,maxHeight:null==e?void 0:e.height,rotationAngle:a}])}x(o)}function m(t){let e=new Image;return e.src=t,e}function C(t,e){let{width:n,height:i}=e;null!==t&&([t.width,t.height]=[n,i])}function M(t,e){let{width:n,height:i}=t;return{width:e%180?i:n,height:e%180?n:i}}function p(t,e){let n=M({width:800,height:600},e),i=t.width>t.height+(n.width-n.height),l=i?n.width:t.width*n.height/t.height,h=i?t.height*n.width/t.width:n.height;return{x:-Math.floor(e/180)*l,y:-Math.floor((e+90)%360/180)*h,width:l,height:h}}return(0,l.useEffect)(y,[g]),(0,l.useEffect)(()=>{(function(){let e=t.current;if(null===e)return;let n=e.getContext("2d"),i=m(h);i.onload=function(){let{x:t,y:l,width:h,height:o}=p(i,a);C(e,M({width:h,height:o},a)),null==n||n.rotate(Math.PI/180*a),n&&(n.filter="blur(10px)"),null==n||n.drawImage(i,t,l,h,o),null==n||n.restore()}})(),function(){let t=n.current;if(null===t)return;let e=m(h);e.onload=function(){let{width:n,height:i}=p(e,a);C(t,M({width:n,height:i},a))}}(),y()},[h,a]),(0,l.useEffect)(function(){let t=n.current,e=null==t?void 0:t.getContext("2d");t&&(null==e||e.clearRect(0,0,t.width,t.height)),e&&(e.fillStyle="rgba(255, 255, 255, 0.2)"),null==e||e.fillRect(g.x,g.y,g.width,g.height)},[g]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{style:{color:r?"blue":"black"},onClick:function(){r&&c(0),d(t=>!t)},children:"회전모드"}),r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:function(){c(t=>(t+90)%360)},children:"오른쪽"}),(0,i.jsx)("button",{onClick:function(){c(t=>(t+360-90)%360)},children:"왼쪽"})]}),(0,i.jsx)("button",{style:{color:s?"blue":"black"},onClick:function(){s&&v([]),f(t=>!t)},children:"블러모드"}),(0,i.jsx)("button",{onClick:function(){v([]),c(0),f(!1),d(!1)},children:"지우기"}),(0,i.jsx)("br",{}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},ref:t}),(0,i.jsx)("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},ref:e}),(0,i.jsx)("canvas",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},ref:n,onMouseDown:function(t){var e,i;let{buttons:l,clientX:h,clientY:u}=t;if(console.log("handleMouseDown",{isBlurMode:s,buttons:l}),!s||1!==l)return;let r=null!==(i=null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect())&&void 0!==i?i:new DOMRect(0,0,0,0);x({...o,x:h-r.x,y:u-r.y})},onMouseMove:function(t){var e,i;let{buttons:l,clientX:h,clientY:o}=t;if(!s||1!==l)return;let u=null!==(i=null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect())&&void 0!==i?i:new DOMRect(0,0,0,0);x(t=>({...t,width:h-t.x-u.x,height:o-t.y-u.y}))},onMouseUp:b,onMouseLeave:function(t){let{buttons:e}=t;console.log("handleMouseLeave",{isBlurMode:s,buttons:e}),1===e&&b()}})]})]})}}},function(t){t.O(0,[1434,5647,1744],function(){return t(t.s=47)}),_N_E=t.O()}]);