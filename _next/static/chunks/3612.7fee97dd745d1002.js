(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3612,6764],{2972:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return h}});var s,r,n,a,o=i(2769),c=i(8782);(s=n||(n={})).Club="Club",s.Diamond="Diamond",s.Heart="Heart",s.Spade="Spade",(r=a||(a={}))[r.Two=2]="Two",r[r.Three=3]="Three",r[r.Four=4]="Four",r[r.Five=5]="Five",r[r.Six=6]="Six",r[r.Seven=7]="Seven",r[r.Eight=8]="Eight",r[r.Nine=9]="Nine",r[r.Ten=10]="Ten",r[r.Jack=11]="Jack",r[r.Queen=12]="Queen",r[r.King=13]="King",r[r.Ace=14]="Ace";class h extends o.Scene{create(){let t=this.cameras.main.width,e=this.cameras.main.height;this.add.rectangle(t/2,e/2,t,e,862232,1),this.add.text(t/2,.05*e,"인디언 홀덤",{fontSize:"".concat(.06*e,"px"),color:"#ffd700",fontStyle:"bold"}).setOrigin(.5),this.showPlayerSelection()}showPlayerSelection(){let t=this.cameras.main.width,e=this.cameras.main.height,i=t/2,s=e/2;this.add.text(i,s-.2*e,"플레이어 수를 선택하세요",{fontSize:"".concat(.04*e,"px"),color:"#fff"}).setOrigin(.5);let r=[2,3,4],n=.2*t,a=.1*e,o=.05*t,h=i-(r.length-1)*(n+o)/2;r.forEach((t,i)=>{let r=h+i*(n+o),l=this.add.rectangle(r,s,n,a,5025616,.9);l.setStrokeStyle(3,8505220),l.setInteractive({useHandCursor:!0}),c.Wc.setup(l,()=>{this.numberOfPlayers=t,this.startGame()});let u=this.add.text(r,s,"".concat(t,"명"),{fontSize:"".concat(.04*e,"px"),color:"#fff",fontStyle:"bold"});u.setOrigin(.5),u.setInteractive({useHandCursor:!0}),c.Wc.setup(u,()=>{this.numberOfPlayers=t,this.startGame()})});let l=this.add.rectangle(i,s+.2*e,n,.7*a,6710886,.9);l.setStrokeStyle(3,10066329),l.setInteractive({useHandCursor:!0}),l.on("pointerdown",()=>{c.Wc.setup(l,()=>{this.goToMainMenu()})});let u=this.add.text(i,s+.2*e,"메인 메뉴",{fontSize:"".concat(.035*e,"px"),color:"#fff",fontStyle:"bold"});u.setOrigin(.5),u.setInteractive({useHandCursor:!0}),u.on("pointerdown",()=>{c.Wc.setup(u,()=>{this.goToMainMenu()})})}startGame(){let t=this.cameras.main.width,e=this.cameras.main.height;this.children.removeAll(),this.add.rectangle(t/2,e/2,t,e,862232,1),this.initializeDeck(),this.initializePlayers(),this.dealCards(),this.startRound(),this.isGameActive=!0,this.createGameUI(),this.updateGameState()}initializeDeck(){this.deck=[];let t=[2,3,4,5,6,7,8,9,10,11,12,13,14];["Club","Diamond","Heart","Spade"].forEach(e=>{t.forEach(t=>{this.deck.push({suit:e,rank:t})})});for(let t=this.deck.length-1;t>0;t--){let e=Math.floor(Math.random()*(t+1));[this.deck[t],this.deck[e]]=[this.deck[e],this.deck[t]]}}initializePlayers(){this.players=[];for(let t=0;t<this.numberOfPlayers;t++)this.players.push({id:t,name:"플레이어 ".concat(t+1),chips:this.initialChips,handCard:null,currentBet:0,isFolded:!1})}dealCards(){this.players.forEach(t=>{this.deck.length>0&&(t.handCard=this.deck.shift())})}startRound(){this.pot=0,this.currentBet=0,this.players.forEach(t=>{t.chips>=this.anteAmount&&(t.chips-=this.anteAmount,t.currentBet=0,t.isFolded=!1,this.pot+=this.anteAmount)}),this.currentPlayer=0}createGameUI(){let t=this.cameras.main.width,e=this.cameras.main.height,i=.2*e,s=t/(this.numberOfPlayers+1);this.playerChipTexts=[],this.playerBetTexts=[],this.playerCardObjects=[];for(let r=0;r<this.numberOfPlayers;r++){let n=s*(r+1),a=r===this.currentPlayer,o=0===r;this.add.rectangle(n,i,.15*t,.15*e,a?5025616:3355443,.9).setStrokeStyle(2,a?8505220:6710886),this.add.text(n,i-.05*e,"플레이어 ".concat(r+1),{fontSize:"".concat(.025*e,"px"),color:"#fff",fontStyle:"bold"}).setOrigin(.5);let c=this.add.text(n,i,"칩: ".concat(this.players[r].chips),{fontSize:"".concat(.022*e,"px"),color:"#ffd700",fontStyle:"bold"});c.setOrigin(.5),this.playerChipTexts.push(c);let h=this.add.text(n,i+.03*e,"베팅: ".concat(this.players[r].currentBet),{fontSize:"".concat(.02*e,"px"),color:"#fff"});if(h.setOrigin(.5),this.playerBetTexts.push(h),this.players[r].handCard){let s=this.createCardObject(n,i+.06*e,Math.min(.08*t,.1*e),this.players[r].handCard,!o);o&&(this.myCardObject=s),this.playerCardObjects.push(s)}}this.potText=this.add.text(t/2,.4*e,"팟: ".concat(this.pot),{fontSize:"".concat(.04*e,"px"),color:"#ffd700",fontStyle:"bold"}),this.potText.setOrigin(.5),this.currentPlayerIndicator=this.add.text(t/2,.45*e,"플레이어 ".concat(this.currentPlayer+1,"의 턴"),{fontSize:"".concat(.04*e,"px"),color:"#ffd700",fontStyle:"bold"}),this.currentPlayerIndicator.setOrigin(.5),this.statusText=this.add.text(t/2,.5*e,"베팅하세요",{fontSize:"".concat(.03*e,"px"),color:"#fff"}),this.statusText.setOrigin(.5),0===this.currentPlayer&&this.createBettingButtons();let r=this.add.rectangle(.9*t,.05*e,.15*t,.08*e,6710886,.9);r.setStrokeStyle(3,10066329),r.setInteractive({useHandCursor:!0}),r.on("pointerdown",()=>{c.Wc.setup(r,()=>{this.goToMainMenu()})});let n=this.add.text(.9*t,.05*e,"메인 메뉴",{fontSize:"".concat(.03*e,"px"),color:"#fff",fontStyle:"bold"});n.setOrigin(.5),n.setInteractive({useHandCursor:!0}),n.on("pointerdown",()=>{c.Wc.setup(n,()=>{this.goToMainMenu()})})}createBettingButtons(){let t=this.cameras.main.width,e=this.cameras.main.height,i=.85*e,s=.15*t,r=.08*e,n=.02*t,a=this.add.rectangle(t/2-s-n,i,s,r,2201331,.9);a.setStrokeStyle(3,6600182),a.setInteractive({useHandCursor:!0}),c.Wc.setup(a,()=>{this.call()});let o=this.add.text(t/2-s-n,i,this.currentBet>this.players[0].currentBet?"콜":"체크",{fontSize:"".concat(.035*e,"px"),color:"#fff",fontStyle:"bold"});o.setOrigin(.5),o.setInteractive({useHandCursor:!0}),c.Wc.setup(o,()=>{this.call()});let h=this.add.rectangle(t/2,i,s,r,16750592,.9);h.setStrokeStyle(3,16758605),h.setInteractive({useHandCursor:!0}),c.Wc.setup(h,()=>{this.raise(this.currentBet+5)});let l=this.add.text(t/2,i,"레이즈",{fontSize:"".concat(.035*e,"px"),color:"#fff",fontStyle:"bold"});l.setOrigin(.5),l.setInteractive({useHandCursor:!0}),c.Wc.setup(l,()=>{this.raise(this.currentBet+5)});let u=this.add.rectangle(t/2+s+n,i,s,r,16007990,.9);u.setStrokeStyle(3,15037299),u.setInteractive({useHandCursor:!0}),c.Wc.setup(u,()=>{this.fold()});let d=this.add.text(t/2+s+n,i,"폴드",{fontSize:"".concat(.035*e,"px"),color:"#fff",fontStyle:"bold"});d.setOrigin(.5),d.setInteractive({useHandCursor:!0}),c.Wc.setup(d,()=>{this.fold()})}createCardObject(t,e,i,s){let r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],n=this.add.container(0,0),a=1.4*i,o=this.add.rectangle(t,e,i,a,16777215,1);if(o.setStrokeStyle(2,0),!r){let s=this.add.rectangle(t,e,.9*i,.9*a,1713022,1),r=this.add.text(t,e,"?",{fontSize:"".concat(.4*i,"px"),color:"#fff",fontStyle:"bold"});return r.setOrigin(.5),n.add([o,s,r]),n}let c=new Map([["Club",0],["Diamond",16007990],["Heart",16007990],["Spade",0]]).get(s.suit)||0,h="#".concat(c.toString(16).padStart(6,"0")),l="Club"===s.suit?"♣":"Diamond"===s.suit?"♦":"Heart"===s.suit?"♥":"♠",u=this.add.text(t,e-.2*a,this.getRankText(s.rank),{fontSize:"".concat(.3*i,"px"),color:h,fontStyle:"bold"});u.setOrigin(.5);let d=this.add.text(t,e+.1*a,l,{fontSize:"".concat(.4*i,"px"),color:h,fontStyle:"bold"});return d.setOrigin(.5),n.add([o,u,d]),n}getRankText(t){return t<=10?t.toString():new Map([[11,"J"],[12,"Q"],[13,"K"],[14,"A"]]).get(t)||t.toString()}call(){if(0!==this.currentPlayer)return;let t=this.players[0],e=this.currentBet-t.currentBet;if(e>0){if(t.chips<e){this.statusText.setText("칩이 부족합니다"),this.statusText.setColor("#f44336");return}t.chips-=e,t.currentBet+=e,this.pot+=e}this.updateGameState(),this.nextPlayer()}raise(t){if(0!==this.currentPlayer)return;let e=this.players[0];if(t<=this.currentBet){this.statusText.setText("현재 베팅보다 높아야 합니다"),this.statusText.setColor("#f44336");return}let i=t-e.currentBet;if(e.chips<i){this.statusText.setText("칩이 부족합니다"),this.statusText.setColor("#f44336");return}e.chips-=i,e.currentBet=t,this.currentBet=t,this.pot+=i,this.updateGameState(),this.nextPlayer()}fold(){0===this.currentPlayer&&(this.players[0].isFolded=!0,this.updateGameState(),this.nextPlayer())}nextPlayer(){let t=!1,e=0;for(;!t&&e<this.numberOfPlayers;)this.currentPlayer=(this.currentPlayer+1)%this.numberOfPlayers,this.players[this.currentPlayer].isFolded||(t=!0),e++;let i=this.players.filter(t=>!t.isFolded);if(i.length<=1||i.every(t=>t.currentBet===this.currentBet)&&e>=this.numberOfPlayers){this.showdown();return}0!==this.currentPlayer&&this.isGameActive&&this.time.delayedCall(1e3,()=>{this.aiPlay()}),this.updateGameState()}aiPlay(){if(!this.isGameActive||0===this.currentPlayer)return;let t=this.players[this.currentPlayer],e=this.currentBet-t.currentBet,i=Math.random();if(i<.3&&e>0&&t.chips>=e)t.chips-=e,t.currentBet+=e,this.pot+=e;else if(i<.6&&t.chips>=e+5&&this.currentBet<t.chips){let i=Math.min(e+5,t.chips);t.chips-=i,t.currentBet+=i,this.currentBet=t.currentBet,this.pot+=i}else t.isFolded=!0;this.updateGameState(),this.nextPlayer()}showdown(){if(this.isGameActive=!1,this.myCardObject){this.myCardObject.destroy();let t=this.cameras.main.width,e=this.cameras.main.height,i=t/(this.numberOfPlayers+1)*1;this.myCardObject=this.createCardObject(i,.2*e+.06*e,Math.min(.08*t,.1*e),this.players[0].handCard,!0)}let t=this.players.filter(t=>!t.isFolded),e=t[0];for(let i of t)i.handCard&&i.handCard.rank>e.handCard.rank&&(e=i);let i=t.filter(t=>t.handCard&&t.handCard.rank===e.handCard.rank);if(i.length>1){this.statusText.setText("동점! 새 카드로 재대결합니다"),this.statusText.setColor("#ffd700"),i.forEach(t=>{this.deck.length>0&&(t.handCard=this.deck.shift())}),this.currentBet=0,i.forEach(t=>{t.currentBet=0}),this.currentPlayer=i[0].id,this.isGameActive=!0,this.updateGameState();return}e.chips+=this.pot,this.showWinMessage(e.id)}updateGameState(){for(let t=0;t<this.numberOfPlayers;t++){this.playerChipTexts[t].setText("칩: ".concat(this.players[t].chips)),this.playerBetTexts[t].setText("베팅: ".concat(this.players[t].currentBet));let e=t===this.currentPlayer;this.playerChipTexts[t].setColor(e?"#4caf50":"#ffd700")}this.potText&&this.potText.setText("팟: ".concat(this.pot)),this.currentPlayerIndicator&&this.currentPlayerIndicator.setText("플레이어 ".concat(this.currentPlayer+1,"의 턴")),0===this.currentPlayer&&(this.children.list.filter(t=>t.text&&("콜"===t.text||"체크"===t.text||"레이즈"===t.text||"폴드"===t.text)).forEach(t=>t.destroy()),this.createBettingButtons())}showWinMessage(t){let e=this.cameras.main.width,i=this.cameras.main.height,s=e/2,r=i/2;this.add.rectangle(s,r,e,i,0,.7),this.add.rectangle(s,r,.6*e,.4*i,2763306,1).setStrokeStyle(4,16766720),this.add.text(s,r-.1*i,"\uD83C\uDF89 플레이어 ".concat(t+1," 승리!\n팟: ").concat(this.pot),{fontSize:"".concat(.05*i,"px"),color:"#ffd700",fontStyle:"bold",align:"center"}).setOrigin(.5);let n=this.add.rectangle(s,r+.1*i,.3*e,.08*i,5025616,.9);n.setStrokeStyle(3,8505220),n.setInteractive({useHandCursor:!0}),n.on("pointerdown",()=>{c.Wc.setup(n,()=>{this.goToMainMenu()})});let a=this.add.text(s,r+.1*i,"메인 메뉴",{fontSize:"".concat(.035*i,"px"),color:"#fff",fontStyle:"bold"});a.setOrigin(.5),a.setInteractive({useHandCursor:!0}),a.on("pointerdown",()=>{c.Wc.setup(a,()=>{this.goToMainMenu()})})}goToMainMenu(){c.rX.startScene(this,"DeviceSelectionScene")}constructor(){super("IndianHoldemScene"),this.numberOfPlayers=2,this.deck=[],this.players=[],this.currentPlayer=0,this.pot=0,this.currentBet=0,this.isGameActive=!1,this.anteAmount=1,this.initialChips=100,this.playerCardObjects=[],this.playerChipTexts=[],this.playerBetTexts=[]}}},8782:function(t,e,i){"use strict";i.d(e,{Wc:function(){return r},rX:function(){return s},vz:function(){return n}});class s{static startScene(t,e,i){if(t.scene.start(e,i),!t.game){let i=t.scene.key;if(i&&i!==e){let s=t.scene.get(i);s&&s.scene.isActive()&&(console.log("[SceneTransitionUtils] Stopping current scene: ".concat(i," -> ").concat(e)),s.scene.stop())}return}let s=t.game.scene.scenes||[],r=[];for(let t of s){let i=t.scene.key;i!==e&&t.scene.isActive()&&(console.log("[SceneTransitionUtils] Stopping active scene: ".concat(i," (transitioning to ").concat(e,")")),t.scene.stop(),r.push(i))}r.length>0&&console.log("[SceneTransitionUtils] Stopped ".concat(r.length," scene(s): [").concat(r.join(", "),"] -> ").concat(e))}}class r{static setup(t,e){let i=0,s=0,r=!1;t.on("pointerdown",t=>{i=t.x,s=t.y,r=!1}),t.on("pointermove",t=>{if(t.isDown){let e=Math.abs(t.x-i),n=Math.abs(t.y-s);(e>this.DRAG_THRESHOLD||n>this.DRAG_THRESHOLD)&&(r=!0)}}),t.on("pointerup",()=>{r||e(),r=!1}),t.on("pointercancel",()=>{r=!1})}}r.DRAG_THRESHOLD=10;class n{static create(t,e){let{x:i,y:s,width:n,height:a,text:o,backgroundColor:c=2201331,backgroundAlpha:h=.9,strokeColor:l=6600182,strokeWidth:u=3,textColor:d="#fff",fontSize:f,onClick:p}=e,y=t.add.container(0,0),m=t.add.rectangle(i,s,n,a,c,h);m.setStrokeStyle(u,l),m.setInteractive({useHandCursor:!0}),r.setup(m,p);let g=t.add.text(i,s,o,{fontSize:f?"".concat(f,"px"):void 0,color:d,fontStyle:"bold"});return g.setOrigin(.5),g.setInteractive({useHandCursor:!0}),r.setup(g,p),y.add([m,g]),{container:y,background:m,text:g}}}},6764:function(t,e,i){"use strict";var s,r;t.exports=(null==(s=i.g.process)?void 0:s.env)&&"object"==typeof(null==(r=i.g.process)?void 0:r.env)?i.g.process:i(6515)},6515:function(t){!function(){var e={229:function(t){var e,i,s,r=t.exports={};function n(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(i){try{return e.call(null,t,0)}catch(i){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:n}catch(t){e=n}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c=[],h=!1,l=-1;function u(){h&&s&&(h=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!h){var t=o(u);h=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new f(t,e)),1!==c.length||h||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},i={};function s(t){var r=i[t];if(void 0!==r)return r.exports;var n=i[t]={exports:{}},a=!0;try{e[t](n,n.exports,s),a=!1}finally{a&&delete i[t]}return n.exports}s.ab="//";var r=s(229);t.exports=r}()}}]);