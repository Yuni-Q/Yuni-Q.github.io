(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{GP3R:function(e,n,t){"use strict";t.r(n);var r=t("KQm4"),o=(t("BIHw"),t("q1tI")),c=t.n(o),a=t("vOnD"),l=a.c.table.withConfig({displayName:"sc-2048__Table",componentId:"unuaaf-0"})(["td{border:10px solid #bbada0;width:116px;height:128px;font-size:50px;font-weight:bold;text-align:center;}"]),u=a.c.div.withConfig({displayName:"sc-2048__Wrapper",componentId:"unuaaf-1"})(["user-select:none;.color-2{background-color:#eee4da;color:#776e65;}.color-4{background-color:#eee1c9;color:#776e65;}.color-8{background-color:#f3b27a;color:'white';}.color-16{background-color:#f69664;color:'white';}.color-32{background-color:#f77c5f;color:'white';}.color-64{background-color:#f75f3b;color:'white';}.color-128{background-color:#edd073;color:#776e65;}.color-256{background-color:#edcc62;color:#776e65;}.color-512{background-color:#edc950;color:#776e65;}.color-1024{background-color:#edc53f;color:#776e65;}.color-2048{background-color:#edc22e;color:#776e65;}"]);n.default=function(){var e=Object(o.useState)([]),n=e[0],t=e[1],a=Object(o.useState)(0),i=a[0],f=a[1],s=Object(o.useRef)(!1),h=Object(o.useRef)(!1),b=Object(o.useRef)([0,0]),d=Object(o.useRef)({data:[[]],score:[0,0]}),w=Object(o.useCallback)((function(){var e=[];if(n.forEach((function(n,t){n.forEach((function(n,r){n||e.push([t,r])}))})),e.length){var o=e[Math.floor(Math.random()*e.length)];t((function(e){var n=Object(r.a)(e);return n[o[0]][o[1]]=2,n}))}}),[n]),g=Object(o.useCallback)((function(e){var n=[[],[],[],[]],t=[[],[],[],[]],r=0;return e.forEach((function(e,n){e.forEach((function(e){if(e){var o=t[n];o[o.length-1]===e?(o[o.length-1]*=-2,r+=Math.abs(o[o.length-1])):t[n].push(e)}}))})),Array(4).fill(0).forEach((function(e,r){Array(4).fill(0).forEach((function(e,o){n[r][o]=Math.abs(t[r][o])||0}))})),{newData:n,score:r}}),[]),E=Object(o.useCallback)((function(e){var n=[[],[],[],[]],t=[[],[],[],[]],r=0;return e.forEach((function(e,n){e.forEach((function(o,c){if(e[3-c]){var a=t[n];a[a.length-1]===e[3-c]?(a[a.length-1]*=-2,r+=Math.abs(a[a.length-1])):t[n].push(e[3-c])}}))})),Array(4).fill(0).forEach((function(e,r){Array(4).fill(0).forEach((function(e,o){n[r][3-o]=Math.abs(t[r][o])||0}))})),{newData:n,score:r}}),[]),k=Object(o.useCallback)((function(e){var n=[[],[],[],[]],t=[[],[],[],[]],r=0;return e.forEach((function(e){e.forEach((function(e,n){if(e){var o=t[n];o[o.length-1]===e?(o[o.length-1]*=-2,r+=Math.abs(o[o.length-1])):t[n].push(e)}}))})),Array(4).fill(0).forEach((function(e,r){Array(4).fill(0).forEach((function(e,o){n[o][r]=Math.abs(t[r][o])||0}))})),{newData:n,score:r}}),[]),y=Object(o.useCallback)((function(e){var n=[[],[],[],[]],t=[[],[],[],[]],r=0;return e.forEach((function(n,o){n.forEach((function(n,c){if(e[3-o][c]){var a=t[c];a[a.length-1]===e[3-o][c]?(a[a.length-1]*=-2,r+=Math.abs(a[a.length-1])):t[c].push(e[3-o][c])}}))})),Array(4).fill(0).forEach((function(e,r){Array(4).fill(0).forEach((function(e,o){n[3-o][r]=Math.abs(t[r][o])||0}))})),{newData:n,score:r}}),[]),v=Object(o.useCallback)((function(e){if(console.log(2222),null==n||!n[0])return n;var r={newData:n,score:0};switch(e){case"left":r=g(n);break;case"right":r=E(n);break;case"up":r=k(n);break;case"down":r=y(n);break;default:r={newData:n,score:0}}JSON.stringify(n)!==JSON.stringify(r.newData)&&(d.current.data=n,s.current=!0,f((function(e){return e+r.score}))),t(r.newData)}),[n]),p=Object(o.useCallback)((function(){if(null==n||!n[0])return!1;var e=0;return JSON.stringify(n)===JSON.stringify(g(n).newData)&&(e+=1),JSON.stringify(n)===JSON.stringify(E(n).newData)&&(e+=1),JSON.stringify(n)===JSON.stringify(k(n).newData)&&(e+=1),JSON.stringify(n)===JSON.stringify(y(n).newData)&&(e+=1),e>=4||void 0}),[n]),O=Object(o.useCallback)((function(){var e=[new Array(4).fill(0),new Array(4).fill(0),new Array(4).fill(0),new Array(4).fill(0)];t(e),s.current=!0}),[]);return Object(o.useEffect)((function(){O()}),[]),Object(o.useEffect)((function(){var e=function(e){"ArrowUp"===e.key&&v("up"),"ArrowDown"===e.key&&v("down"),"ArrowLeft"===e.key&&v("left"),"ArrowRight"===e.key&&v("right")},n=function(e){b.current=[e.clientX,e.clientY]},t=function(e){var n=[e.clientX,e.clientY],t=n[0]-b.current[0],r=n[1]-b.current[1];t<0&&Math.abs(t)>Math.abs(r)&&v("left"),t>0&&Math.abs(t)>Math.abs(r)&&v("right"),r>0&&Math.abs(t)<=Math.abs(r)&&v("down"),r<0&&Math.abs(t)<=Math.abs(r)&&v("up")};return window.addEventListener("keydown",e),window.addEventListener("mousedown",n),window.addEventListener("mouseup",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("mousedown",n),window.removeEventListener("mouseup",t)}}),[n]),Object(o.useEffect)((function(){(null==n?void 0:n.length)>3&&!n.flat().every((function(e){return 0===e}))&&p()&&setTimeout((function(){alert("패배했습니다...")}),500),!h.current&&n.flat().includes(2048)&&(h.current=!0,setTimeout((function(){alert("축하합니다. 2048을 만들었습니다.")}),500)),n.length>0&&s.current&&(w(),s.current=!1)}),[n]),Object(o.useEffect)((function(){i===d.current.score[1]&&(d.current.score=[i,i]),d.current.score.unshift(i),d.current.score.length=2}),[i]),c.a.createElement(u,null,c.a.createElement(l,null,c.a.createElement("tbody",null,n.map((function(e,n){return c.a.createElement("tr",{key:e+"-"+n},e.map((function(e,n){return c.a.createElement("td",{className:"color-"+e,key:e+"-"+n},!!e&&e)})))})))),c.a.createElement("div",null,c.a.createElement("span",null,i),c.a.createElement("button",{onClick:function(e){e.stopPropagation(),t(d.current.data),f(d.current.score[1])}},"되돌리기")))}}}]);
//# sourceMappingURL=component---src-pages-2048-tsx-a34509b5d89b7a6b90e3.js.map