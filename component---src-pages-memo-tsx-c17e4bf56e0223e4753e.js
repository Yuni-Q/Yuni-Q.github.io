(self.webpackChunkyuni_q_blog=self.webpackChunkyuni_q_blog||[]).push([[241],{8409:function(e,t,n){"use strict";var a=n(4836);t.I=function(e){let{category:t,action:n,label:a,value:r,nonInteraction:i=!1,transport:o,hitCallback:s,callbackTimeout:c=1e3}=e;if("undefined"!=typeof window&&window.ga){const e={eventCategory:t,eventAction:n,eventLabel:a,eventValue:r,nonInteraction:i,transport:o};s&&"function"==typeof s&&(e.hitCallback=l(s,c)),window.ga("send","event",e)}};var r=a(n(434)),i=a(n(7294)),o=a(n(5697));const l=function(e,t){void 0===t&&(t=1e3);let n=!1;const a=()=>{n||(n=!0,e())};return setTimeout(a,t),a};function s(e){const{eventCategory:t,eventAction:n,eventLabel:a,eventValue:o,...l}=e;return i.default.createElement("a",(0,r.default)({},l,{onClick:r=>{"function"==typeof e.onClick&&e.onClick(r);let i=!0;return(0!==r.button||r.altKey||r.ctrlKey||r.metaKey||r.shiftKey||r.defaultPrevented)&&(i=!1),e.target&&"_self"!==e.target.toLowerCase()&&(i=!1),window.ga?window.ga("send","event",{eventCategory:t||"Outbound Link",eventAction:n||"click",eventLabel:a||e.href,eventValue:o,transport:i?"beacon":"",hitCallback:function(){i&&(document.location=e.href)}}):i&&(document.location=e.href),!1}}))}s.propTypes={href:o.default.string,target:o.default.string,eventCategory:o.default.string,eventAction:o.default.string,eventLabel:o.default.string,eventValue:o.default.number,onClick:o.default.func}},8417:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var a,r=n(5785),i=n(7294),o=n(2788),l=new Uint8Array(16);function s(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(l)}var c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(e){return"string"==typeof e&&c.test(e)},d=[],f=0;f<256;++f)d.push((f+256).toString(16).substr(1));var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n};var m=function(e,t,n){var a=(e=e||{}).random||(e.rng||s)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=a[r];return t}return p(a)};var v=e=>{let{id:t,top:n,left:a,width:r,height:o,text:l,onClickDelete:s,onClickMove:c,onClickResize:u,onChangeText:d}=e;const f=(0,i.useRef)(null),p=(0,i.useRef)(null),m=(0,i.useRef)(null),v=(0,i.useRef)(null),h=(0,i.useRef)(null),g=(0,i.useRef)(null),y=(0,i.useRef)(null),w=(0,i.useRef)(null),b=(0,i.useCallback)((e=>{if(!e.target.dataset.delete)return e.target.dataset.header?(f.current=e.clientX-a,p.current=e.clientY-n,void(h.current=!0)):void 0;s(e)}),[s,a,n]),C=e=>{e.target.dataset.blind&&(g.current=!0)},E=(0,i.useCallback)((e=>{const t=y.current.style;if(h.current){const t=y.current.style;t.top=e.clientY-p.current+"px",t.left=e.clientX-f.current+"px",t.zIndex="1"}if(g.current){const r=w.current.style;r.height=e.clientY-n-30+"px",r.width=e.clientX-a-15+"px",t.zIndex="1"}}),[n,a]),x=(0,i.useCallback)((()=>{c(t,y.current.style.top,y.current.style.left),h.current=!1}),[t,c]),k=(0,i.useCallback)((()=>{g.current=!1,u(t,w.current.style.width,w.current.style.height)}),[t,u]);return(0,i.useEffect)((()=>{const e=m.current,t=v.current;return e.addEventListener("mousedown",b,!0),window.addEventListener("mousemove",E,!0),e.addEventListener("mouseup",x,!0),t.addEventListener("mousedown",C,!0),t.addEventListener("mouseup",k,!0),()=>{e.removeEventListener("mousedown",b,!0),window.removeEventListener("mousemove",E,!0),e.removeEventListener("mouseup",x,!0),t.removeEventListener("mousedown",C,!0),t.removeEventListener("mouseup",k,!0)}}),[b,t,E,d,k,x,l]),i.createElement("div",{className:"memo",ref:y,style:{top:n+"px",left:a+"px"}},i.createElement("div",{className:"header","data-header":!0,"data-id":t,ref:m,onClick:b},i.createElement("h1",{className:"blind"},"메모장"),i.createElement("button",{className:"btn_close","data-delete":!0,"data-id":t,onClick:s},i.createElement("span",{className:"blind"},"닫기"))),i.createElement("div",{className:"content"},i.createElement("textarea",{className:"textarea",ref:w,style:{width:r+"px",height:o+"px"},placeholder:"메모 하십시오!",value:l,onChange:e=>{d(t,e.target.value,e.target)}}),i.createElement("button",{className:"btn_size","data-blind":!0,ref:v},i.createElement("span",{className:"blind"},"메모장 크기 조절"))))};var h=e=>{let{className:t,status:n,size:a=28}=e;return i.createElement("div",{className:"spinner la-ball-pulse "+(t||""),style:{height:a}},i.createElement("div",null),i.createElement("div",null),i.createElement("div",null))},g=n(5503);g.default.apps.length||g.default.initializeApp({apiKey:"AIzaSyDlYM9tmiCS8cpJNCJDt1ayilldy4ZHcqA",authDomain:"yuni-q.firebaseapp.com",databaseURL:"https://yuni-q.firebaseio.com",projectId:"yuni-q",storageBucket:"yuni-q.appspot.com",messagingSenderId:"158413688649",appId:"1:158413688649:web:a15e7e4e8ff8894f049498",measurementId:"G-J4THPFQ6L1"});var y=g.default;let w;const b={apiKey:"AIzaSyDlYM9tmiCS8cpJNCJDt1ayilldy4ZHcqA",authDomain:"yuni-q.firebaseapp.com",databaseURL:"https://yuni-q.firebaseio.com",projectId:"yuni-q",storageBucket:"yuni-q.appspot.com",messagingSenderId:"158413688649",appId:"1:158413688649:web:a15e7e4e8ff8894f049498",measurementId:"G-J4THPFQ6L1"},C=e=>(y.apps.length||y.initializeApp(b),w=y.database(),w.ref("/").child("memo").set(e));var E=n(8251);const x=o.default.div.withConfig({displayName:"memo__StyledLoading",componentId:"sc-e5ril5-0"})(["width:100vw;height:100vh;background:gray;display:flex;color:white;align-items:center;"]);var k=()=>{const{0:e,1:t}=(0,i.useState)(!0),{0:n,1:a}=(0,i.useState)([]),o=(0,i.useRef)(null),l=(0,i.useRef)(!1),s=(0,i.useRef)(!1),c=(0,i.useCallback)((e=>{e.preventDefault(),e.target.dataset.wrap&&a([].concat((0,r.Z)(n),[{id:m(),top:window.event.clientY,left:window.event.clientX,width:200,height:100,text:""}]))}),[n]),u=e=>{const t=n.filter((t=>t.id!==e.target.dataset.id));a(t)},d=(e,t,i)=>{const o=n.find((t=>t.id===e)),l=n.filter((t=>t.id!==e));a([].concat((0,r.Z)(l),[{id:m(),top:parseInt(t,10),left:parseInt(i,10),width:o.width,height:o.height,text:o.text}]))},f=(e,t,i)=>{const o=n.find((t=>t.id===e)),l=n.filter((t=>t.id!==e));a([].concat((0,r.Z)(l),[{id:m(),top:o.top,left:o.left,width:parseInt(t,10),height:parseInt(i,10),text:o.text}]))},p=(e,t)=>{const i=n.find((t=>t.id===e)),o=n.filter((t=>t.id!==e));a([].concat((0,r.Z)(o),[{id:i.id,top:i.top,left:i.left,width:i.width,height:i.height,text:t}]))};return(0,i.useEffect)((()=>{(async e=>{if(!l.current)return l.current=!0;s.current?s.current=!1:C(e)})(JSON.stringify(n))}),[n,c]),(0,i.useEffect)((()=>{const e=o.current;return e.addEventListener("contextmenu",c,!0),()=>e.removeEventListener("contextmenu",c,!0)}),[c]),(0,i.useEffect)((()=>{(0,E.ZP)("memo",E.fz.EXPOSE,"memo"),(async()=>{t(!1)})();(console.log(y),y.apps.length||y.initializeApp(b),w=y.database(),w.ref("/").child("memo")).on("value",(e=>{console.log(222,e);try{s.current=!0,a(JSON.parse(e.node_.value_))}catch(t){C([])}}))}),[]),i.createElement("div",{className:"wrap","data-wrap":!0,ref:o,style:{width:"100vw",height:"100vh"}},!!e&&i.createElement(x,null,i.createElement(h,null)),!e&&n&&n.map((e=>{const{id:t,top:n,left:a,width:r,height:o,text:l}=e;return i.createElement(v,{key:t,id:t,top:n,left:a,width:r,height:o,text:l,onClickDelete:u,onClickMove:d,onClickResize:f,onChangeText:p})})))}},8251:function(e,t,n){"use strict";n.d(t,{fz:function(){return i}});var a=n(8409);const r=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=""),(0,a.I)({category:e,action:t,label:n})};t.ZP=r;const i={EXPOSE:"화면진입",CLICK:"클릭"}},434:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=component---src-pages-memo-tsx-c17e4bf56e0223e4753e.js.map