{"componentChunkName":"component---src-templates-blog-post-js","path":"/develop/nginx-+-https-적용하기/","result":{"data":{"site":{"siteMetadata":{"title":"yuni-q 블로그","author":"yuni-q","siteUrl":"https://yuni-q.github.io","comment":{"disqusShortName":"yuni-q","utterances":"yuni-q"},"sponsor":{"buyMeACoffeeId":"yuniq"}}},"markdownRemark":{"id":"a980a57f-e6ba-5e14-a1a6-1741419dbe64","excerpt":"nginx 설치 certbot-auto 설치 certbot-auto 권한 추가 nginx 설정 추가 include 아래에 다음을 추가합니다. server_name에 와일드카드(*)를 사용할 경우 DNS를 사용해야 한다고 합니다. nginx 실행 certbot-auto 실행 certbot-auto 갱신 certbot-auto는 90일이기 때문에 갱신이 필요합니다. crontab을 활용해서 자동화 할 수 있습니다. 참고 제로초 유투브","html":"<h2 id=\"nginx-설치\" style=\"position:relative;\"><a href=\"#nginx-%EC%84%A4%EC%B9%98\" aria-label=\"nginx 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nginx 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nginx</code></pre></div>\n<h2 id=\"certbot-auto-설치\" style=\"position:relative;\"><a href=\"#certbot-auto-%EC%84%A4%EC%B9%98\" aria-label=\"certbot auto 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>certbot-auto 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> https://dl.eff.org/certbot-auto</code></pre></div>\n<h2 id=\"certbot-auto-권한-추가\" style=\"position:relative;\"><a href=\"#certbot-auto-%EA%B6%8C%ED%95%9C-%EC%B6%94%EA%B0%80\" aria-label=\"certbot auto 권한 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>certbot-auto 권한 추가</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> a+x certbot-auto</code></pre></div>\n<h2 id=\"nginx-설정-추가\" style=\"position:relative;\"><a href=\"#nginx-%EC%84%A4%EC%A0%95-%EC%B6%94%EA%B0%80\" aria-label=\"nginx 설정 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nginx 설정 추가</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vim</span> /etc/nginx/nginx.conf</code></pre></div>\n<ul>\n<li>include 아래에 다음을 추가합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\">server <span class=\"token punctuation\">{</span>\n  server_name yuni<span class=\"token operator\">-</span><span class=\"token keyword\">q</span><span class=\"token operator\">.</span><span class=\"token builtin\">com</span><span class=\"token punctuation\">;</span>\n  listen <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n  location <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n    proxy_set_header HOST $host<span class=\"token punctuation\">;</span>\n    proxy_set_header <span class=\"token keyword\">X</span><span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>Proto $scheme<span class=\"token punctuation\">;</span>\n    proxy_pass http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span><span class=\"token number\">127.0</span><span class=\"token operator\">.</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">:</span><span class=\"token number\">3065</span><span class=\"token punctuation\">;</span>\n    proxy_redirect<span class=\"token punctuation\">:</span> off<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>server_name에 와일드카드(*)를 사용할 경우 DNS를 사용해야 한다고 합니다.</li>\n</ul>\n<h2 id=\"nginx-실행\" style=\"position:relative;\"><a href=\"#nginx-%EC%8B%A4%ED%96%89\" aria-label=\"nginx 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nginx 실행</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl start nginx\n<span class=\"token comment\"># 에러 발생 시 다음 명령어를 통해 상태를 확인합니다.</span>\n<span class=\"token comment\"># sudo systemctl status nginx</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">lsof</span> -i tcp:80 <span class=\"token comment\"># 올바로 실행 되었는지 확\b인합니다.</span></code></pre></div>\n<h2 id=\"certbot-auto-실행\" style=\"position:relative;\"><a href=\"#certbot-auto-%EC%8B%A4%ED%96%89\" aria-label=\"certbot auto 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>certbot-auto 실행</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./certbot-auto</code></pre></div>\n<h2 id=\"certbot-auto-갱신\" style=\"position:relative;\"><a href=\"#certbot-auto-%EA%B0%B1%EC%8B%A0\" aria-label=\"certbot auto 갱신 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>certbot-auto 갱신</h2>\n<ul>\n<li>certbot-auto는 90일이기 때문에 갱신이 필요합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./certbot-auto renew</code></pre></div>\n<ul>\n<li>crontab을 활용해서 자동화 할 수 있습니다.</li>\n</ul>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://www.youtube.com/channel/UCp-vBtwvBmDiGqjvLjChaJw\">제로초 유투브</a></li>\n</ul>","frontmatter":{"title":"nginx + https 적용하기","date":"July 10, 2020"}}},"pageContext":{"slug":"/develop/nginx-+-https-적용하기/","previous":{"fields":{"slug":"/javascript/nullish-coalescing-operator/"},"frontmatter":{"title":"nullish coalescing operator","category":"javascript","draft":false}},"next":{"fields":{"slug":"/study front/day3/"},"frontmatter":{"title":"day3","category":"study front","draft":false}}}}}