{"version":3,"sources":["webpack:///./src/pages/land.tsx"],"names":["Particle","x","y","cm","this","radius","Math","random","speed","draw","context","beginPath","arc","PI","fill","Line","index","height","gradientStartY","canvasHeight","gradient","createLinearGradient","addColorStop","colors2","particles","i","push","strokeStyle","moveTo","lineTo","stroke","length","particle","Light","yForOrder","width","angle","lines","colors","fillStyle","save","filter","ellipse","abs","sin","fillRect","restore","Canvas","styled","canvas","Land","undefined","canvasWidth","charactersSrc","somun","ji","playedFrame","currentFrame","useEffect","document","querySelector","getContext","dpr","window","devicePixelRatio","mouse","lights","characters","allItems","indexOfLight","setup","console","log","innerWidth","innerHeight","scale","Character","forEach","character","clearRect","item","scaleRatio","translate","requestAnimationFrame","click","e","clientX","getBoundingClientRect","left","clientY","top","light","sort","a","b","updateAction","addEventListener","removeEventListener","id","imageSrc","action","image","Image","src","setAction","startFrame","endFrame","frame","drawImage"],"mappings":"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","file":"component---src-pages-land-tsx-79395adfebdb6b43a72f.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\n\nclass Particle {\n  x: number;\n  y: number;\n  radius: number;\n  speed: number;\n  cm: CM;\n\n  constructor(x: number, y: number, cm: CM) {\n    this.x = x;\n    this.y = y;\n    this.radius = Math.random() + 0.5;\n    this.speed = Math.random() * 3 + 0.5;\n    this.cm = cm;\n  }\n\n  draw() {\n    this.cm.context.beginPath();\n    this.cm.context.arc(this.x, this.y, this.radius, 0, Math.PI * 2)\n    this.cm.context.fill();\n  }\n}\n\nclass Line {\n  x: number;\n  y: number;\n  cm: CM;\n  particles: Particle[];\n  height: number;\n  gradient: CanvasGradient;\n\n  constructor(x: number, y: number, cm: CM, index: number) {\n    this.x = x;\n    this.y = y;\n    this.height = 300;\n\n\n    const gradientStartY = cm.canvasHeight - (this.height + (cm.canvasHeight - this.y));\n    this.gradient = cm.context.createLinearGradient(\n      0, gradientStartY,\n      0, this.y\n    )\n    this.gradient.addColorStop(0, `rgba(${cm.colors2[index]}, 0)`)\n    this.gradient.addColorStop(0.5, `rgba(${cm.colors2[index]}, 0.5)`)\n    this.gradient.addColorStop(0.75, `rgba(${cm.colors2[index]}, 0.5)`)\n    this.gradient.addColorStop(1, `rgba(${cm.colors2[index]}, 1)`)\n\n    const numberOfParticles = 30;\n    this.particles = [];\n    for (let i = 0; i < numberOfParticles; i++) {\n      this.particles.push(\n        new Particle(this.x, this.y, cm)\n      );\n    }\n    this.cm = cm;\n  }\n\n  draw() {\n    this.cm.context.strokeStyle = this.gradient;\n    this.cm.context.beginPath();\n    this.cm.context.moveTo(this.x, this.y);\n    this.cm.context.lineTo(this.x, this.y - this.height);\n    this.cm.context.stroke();\n\n    for (let i = 0; i < this.particles.length; i++) {\n      const particle = this.particles[i];\n      particle.y -= particle.speed;\n      if (particle.y < this.y - this.height) {\n        particle.y = this.y;\n      }\n      particle.draw();\n    }\n  }\n\n}\n\nclass Light {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  lines: Line[];\n  gradient: CanvasGradient;\n  cm: CM;\n  angle: number;\n  yForOrder: number;\n\n  constructor(x: number, y: number, cm: CM, index: number) {\n    this.x = x;\n    this.y = y;\n    this.yForOrder = this.y;\n    this.width = 20;\n    this.height = 300;\n    this.angle = 0;\n\n    const numberOfParticles = 5;\n    this.lines = [];\n    for (let i = 0; i < numberOfParticles; i++) {\n      this.lines.push(\n        new Line(\n          this.x + (Math.random() * this.width - this.width * 0.5),\n          this.y,\n          cm,\n          index,\n        )\n      );\n    }\n    this.gradient = cm.context.createLinearGradient(\n      0, cm.canvasHeight - (this.height + (cm.canvasHeight - this.y)),\n      0, this.y\n    )\n    this.gradient.addColorStop(0, `rgba(${cm.colors[index]}, 0)`)\n    this.gradient.addColorStop(0.5, `rgba(${cm.colors[index]}, 0.5)`)\n    this.gradient.addColorStop(0.75, `rgba(${cm.colors[index]}, 0.5)`)\n    this.gradient.addColorStop(1, `rgba(${cm.colors[index]}, 1)`)\n    this.cm = cm;\n  }\n\n  draw() {\n    this.cm.context.fillStyle = this.gradient;\n\n    this.cm.context.save();\n    this.cm.context.filter = 'blur(20px)';\n\n\n    this.cm.context.beginPath();\n    this.cm.context.ellipse(\n      this.x,\n      this.y,\n      this.width * 2 + Math.abs(Math.sin(this.angle * Math.PI / 180 * 30)) * 5,\n      this.width * 0.5 + Math.abs(Math.sin(this.angle * Math.PI / 180 * 30)) * 5,\n      0, 0, Math.PI * 2\n    )\n    this.cm.context.fill();\n    this.angle++;\n\n    this.cm.context.filter = 'blur(5px)';\n    this.cm.context.beginPath();\n    this.cm.context.ellipse(\n      this.x,\n      this.y,\n      this.width,\n      this.width * 0.25,\n      0, 0, Math.PI * 2\n    )\n    this.cm.context.fill();\n\n    this.cm.context.fillRect(\n      this.x - this.width * 0.5,\n      this.cm.canvasHeight - (this.height + (this.cm.canvasHeight - this.y)),\n      this.width,\n      this.height,\n    )\n\n    this.cm.context.restore();\n\n    for (let i = 0; i < this.lines.length; i++) {\n      const line = this.lines[i];\n      line.draw();\n    }\n  }\n}\n\nconst Canvas = styled.canvas`\n  background: url(/images/BG-city.jpg) no-repeat center / cover;\n`;\n\ninterface CM {\n  canvas: HTMLCanvasElement | undefined;\n  context: CanvasRenderingContext2D | undefined;\n  canvasWidth: number;\n  canvasHeight: number;\n  colors: string[];\n  colors2: string[];\n  charactersSrc: {\n    somun: string;\n    ji: string;\n  }\n  playedFrame: number;\n  currentFrame: number;\n}\n\nconst Land = () => {\n  const cm: CM = {\n    canvas: undefined,\n    context: undefined,\n    canvasWidth: 0,\n    canvasHeight: 0,\n    colors: [\n      '222, 35, 18', // red\n      '238, 150, 63', // orange\n      '246, 228, 0', // yellow\n      '110, 210, 70', // green\n      '63, 145, 255', // blue\n      '185, 22, 226', // purple\n    ],\n    colors2: [\n      '255, 160, 150', // red\n      '255, 200, 150', // orange\n      '255, 250, 180', // yellow\n      '195, 255, 170', // green\n      '200, 220, 255', // blue\n      '239, 173, 225', // purple\n    ],\n    charactersSrc: {\n      somun: '/images/sprite-somun.png',\n      ji: '/images/sprite-ji.png',\n    },\n    playedFrame: 0,\n    currentFrame: 0,\n  }\n  useEffect(() => {\n    cm.canvas = document.querySelector('#the-canvas');\n    cm.context = cm.canvas.getContext('2d');\n    const dpr = window.devicePixelRatio > 1 ? 1 : 1;\n    const mouse = { x: 0, y: 0 };\n    const lights: Light[] = [];\n    const characters: Character[] = []\n    const allItems: any[] = []\n    let indexOfLight = 0;\n\n    const setSize = () => {\n      console.log(window.innerWidth, window.innerHeight)\n      cm.canvasWidth = window.innerWidth;\n      cm.canvasHeight = window.innerHeight;\n      cm.canvas.width = cm.canvasWidth * dpr\n      cm.canvas.height = cm.canvasHeight * dpr\n      if (dpr > 1) {\n        cm.context.scale(dpr, dpr);\n      }\n    }\n\n    const setCharacters = () => {\n      const somun = new Character(\n        cm.charactersSrc.somun,\n        'underAttack',\n        (cm.canvasWidth * 0.5) - 256 + 64,\n        (cm.canvasHeight * 0.5) - 64,\n        cm\n      )\n      const ji = new Character(\n        cm.charactersSrc.ji,\n        'attack',\n        (cm.canvasWidth * 0.5) - 64,\n        (cm.canvasHeight * 0.5) - 64,\n        cm\n      )\n\n      characters.push(somun);\n      characters.push(ji);\n\n      characters.forEach(character => allItems.push(character))\n    }\n\n\n    const draw = () => {\n      cm.context.clearRect(0, 0, cm.canvas.width, cm.canvas.height);\n      allItems.forEach(item => {\n        if (item instanceof Character) {\n          item.draw();\n        }\n        if (item instanceof Light) {\n          const scaleRatio = item.y / cm.canvasHeight + 1;\n          cm.context.save();\n          cm.context.translate(item.x, item.y);\n          cm.context.scale(scaleRatio, scaleRatio);\n          cm.context.translate(-item.x, -item.y);\n          item.draw();\n          cm.context.restore();\n        }\n      })\n\n      cm.playedFrame++;\n      if (cm.playedFrame % 20 === 0) {\n        if (cm.playedFrame > 10000000000) {\n          cm.playedFrame = 0;\n        }\n        if (cm.currentFrame === 0) {\n          cm.currentFrame = 1\n        } else {\n          cm.currentFrame = 0\n        }\n      }\n      requestAnimationFrame(draw);\n    }\n\n    const setup = () => {\n      setSize();\n      if (characters.length < 2) {\n        setCharacters();\n      }\n      draw();\n    }\n\n    const click = (e: MouseEvent) => {\n      if (indexOfLight >= cm.colors.length) {\n        return;\n      }\n      // mouse.x = e.layerX;\n      // mouse.y = e.layerY;\n      mouse.x = e.clientX - cm.canvas.getBoundingClientRect().left;\n      mouse.y = e.clientY - cm.canvas.getBoundingClientRect().top;\n\n      const light = new Light(mouse.x, mouse.y, cm, indexOfLight);\n      lights.push(light);\n      allItems.push(light);\n      allItems.sort((a, b) => {\n        return a.yForOrder - b.yForOrder;\n      })\n      indexOfLight++;\n\n      if (indexOfLight >= cm.colors.length) {\n        characters[0].updateAction('attack');\n        characters[1].updateAction('underAttack');\n      }\n    }\n\n    cm.canvas.addEventListener('click', click)\n\n    window.addEventListener('resize', setup)\n    window.addEventListener('load', setup)\n    setup();\n    return () => {\n      window.removeEventListener('click', click)\n      window.removeEventListener('resize', setup)\n      window.removeEventListener('load', setup)\n    }\n  }, [])\n\n  return (\n    <Canvas id=\"the-canvas\"></Canvas>\n  );\n};\n\nexport default Land;\n\ntype Action = 'attack' | 'underAttack';\n\nclass Character {\n  width: number;\n  height: number;\n  x: number;\n  y: number;\n  yForOrder: number;\n  action: Action;\n  image: HTMLImageElement;\n  startFrame: number;\n  endFrame: number;\n  frame: number;\n  cm: CM;\n\n\n  constructor(imageSrc, action, x, y, cm: CM) {\n    this.width = 256;\n    this.height = 256;\n    this.x = x;\n    this.y = y;\n    this.yForOrder = this.y + this.height - 24;\n    this.action = action;\n    this.image = new Image();\n    this.image.src = imageSrc;\n    this.setAction();\n    this.cm = cm;\n  }\n\n  setAction() {\n    switch (this.action) {\n      case 'attack':\n        this.startFrame = 0;\n        this.endFrame = 1;\n        return;\n      case 'underAttack':\n        this.startFrame = 2;\n        this.endFrame = 3;\n        return;\n      default:\n        this.startFrame = 0;\n        this.endFrame = 0;\n    }\n    this.frame = this.startFrame;\n  }\n\n  updateAction(action: Action) {\n    this.action = action;\n    this.setAction();\n  }\n\n  draw() {\n    if (this.cm.playedFrame % 20 === 0) {\n      if (this.cm.currentFrame === 0) {\n        this.frame = this.endFrame;\n      } else {\n        this.frame = this.startFrame;\n      }\n    }\n\n    this.cm.context.drawImage(\n      this.image,\n      (this.frame * 256), 0, 256, 256,\n      this.x, this.y, this.width, this.height,\n    )\n  }\n}\n"],"sourceRoot":""}